(this["webpackJsonp@zmedia/zmp3-desktop"]=this["webpackJsonp@zmedia/zmp3-desktop"]||[]).push([[19],{1574:function(e,t,n){"use strict";var a=n(0),c=n.n(a),r=n(43),i=n(1),o=n(6),l=n.n(o);t.a=c.a.memo((function(e){var t=e.name,n=e.title,a=void 0===n?"":n,o=e.icon,u=e.onClick,s=e.active,d=e.isHoverCircle,m=void 0===d||d,f=e.tooltipContent,E=e.tooltipClassName,b=void 0===E?"":E,v=e.tooltipVisible,g=e.disabledTootip,O=e.disabled,p=e.className||"btn-".concat(t);return c.a.createElement(i.O,{content:f||a,disabled:g,hideOnClick:!1,className:b,visible:v},c.a.createElement(r.b,{className:l()("zm-tooltip-btn",p,{"is-hover-circle":m,"is-active":s}),onClick:u,title:a,icon:o||t,disabled:O}))}))},1575:function(e,t,n){"use strict";var a,c=n(13),r="/page/get/video",i="/video/get/section-relate",o="/video/get/list";!function(e){e.BY_GENRE="genre"}(a||(a={}));var l={getDetail:function(e){return Object(c.d)(r,{id:e})},getSectionRelate:function(e){return Object(c.d)(i,{id:e})},getList:function(e,t,n,a){return Object(c.d)(o,{id:e,type:t,page:n,count:15,sort:a.sort})}};t.a=l},1581:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return O})),n.d(t,"d",(function(){return p}));var a=n(12),c=n.n(a),r=n(22),i=n(8),o=n(0),l=n.n(o),u=n(5),s=n(26),d=n(125),m=n(27),f=n(18),E=n(1574),b=Object(o.memo)((function(e){var t=e.id,n=e.thumbnail,a=Object(u.c)(m.l);return l.a.createElement(g,{id:t,thumbnail:n,isPlaying:a})})),v=Object(o.memo)((function(e){var t=e.id,n=e.thumbnail,a=Object(u.c)(d.i);return l.a.createElement(g,{id:t,thumbnail:n,isPlaying:a})})),g=function(e){var t=e.id,n=e.thumbnail,a=e.isPlaying,u=Object(o.useRef)(document.createElement("video")),d=Object(o.useRef)(a),m=Object(o.useRef)(!1);d.current=a;var b=Object(o.useState)(!1),v=Object(i.a)(b,2),g=v[0],O=v[1],p=Object(o.useMemo)((function(){return!document.pictureInPictureEnabled||u.current.disablePictureInPicture}),[]);Object(o.useEffect)((function(){if(!p){var e=function(){O(!0),m.current=!0,d.current||document.pictureInPictureElement.pause()},t=function(){return O(!1)};return u.current.addEventListener("enterpictureinpicture",e),u.current.addEventListener("leavepictureinpicture",t),function(){u.current.removeEventListener("enterpictureinpicture",e),u.current.removeEventListener("leavepictureinpicture",t)}}}),[]),Object(o.useEffect)((function(){document.pictureInPictureElement&&(a?document.pictureInPictureElement.play():document.pictureInPictureElement.pause())}),[a]),Object(o.useEffect)((function(){if(document.pictureInPictureElement){if(!m.current){var e=setInterval((function(){d.current&&(j(),clearInterval(e))}),100);return function(){return clearInterval(e)}}j()}}),[t]);var j=function(){var e=Object(r.a)(c.a.mark((function e(){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,(a=document.createElement("canvas")).width=a.height=512,u.current.srcObject=a.captureStream(),u.current.muted=!0,(r=new Image).crossOrigin=!0,r.src=n.replace("w240","w480"),e.next=12,r.decode();case 12:return a.getContext("2d").drawImage(r,0,0,512,512),e.next=15,u.current.play();case 15:return e.next=17,u.current.requestPictureInPicture();case 17:e.next=21;break;case 19:e.prev=19,e.t0=e.catch(2);case 21:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}(),h=Object(o.useCallback)(Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.pictureInPictureElement?document.exitPictureInPicture():(j(),Object(f.a)(s.a.PLAYER,"player_pip"));case 1:case"end":return e.stop()}}),e)}))),[t]);return p?null:l.a.createElement(E.a,{name:"restore",title:"Ch\u1ebf \u0111\u1ed9 c\u1eeda s\u1ed5",active:g,onClick:h})},O=function(){if(document.pictureInPictureElement)return setTimeout((function(){document.exitPictureInPicture()}),200)},p=function(){document.pictureInPictureElement&&document.exitPictureInPicture()};Object(o.memo)(b)},1598:function(e,t,n){"use strict";var a=n(0),c=n.n(a),r=n(1),i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function l(e,t,n,a,c){var r=e.naturalWidth,l=e.naturalHeight;t.style.width=a+"px",t.style.height=c+"px",t.width=a,t.height=c;var u=t.getContext("2d");u.clearRect(0,0,a,c);var s=1,d=r/(s=r/a>l/c?l/c:r/a),m=l/s;try{u.drawImage(e,Math.floor((d-a)/-2),Math.floor((m-c)/-2),Math.ceil(d),Math.ceil(m))}catch(f){console.error("There was a problem drawing the image. "+f)}isNaN(n)||n<1||function(e,t,n,a,c,r){if(isNaN(r)||r<1)return;r|=0;var l,u=e.getContext("2d");try{l=u.getImageData(t,n,a,c)}catch(f){throw new Error("unable to access image data: "+f)}var s,d,m,E,b,v,g,O,p,j,h,y,P,I,_,C,L,N,R,k,A,w,T,M=l.data,S=r+r+1,x=a-1,Y=c-1,U=r+1,K=U*(U+1)/2,V={r:0,g:0,b:0,a:0,next:null},D=V;for(m=1;m<S;m++)D=D.next={r:0,g:0,b:0,a:0,next:null},m==U&&(A=D);D.next=V,g=v=0;var z=i[r],B=o[r];for(d=0;d<c;d++){for(I=_=C=O=p=j=0,h=U*(L=M[v]),y=U*(N=M[v+1]),P=U*(R=M[v+2]),O+=K*L,p+=K*N,j+=K*R,D=V,m=0;m<U;m++)D.r=L,D.g=N,D.b=R,D=D.next;for(m=1;m<U;m++)E=v+((x<m?x:m)<<2),O+=(D.r=L=M[E])*(k=U-m),p+=(D.g=N=M[E+1])*k,j+=(D.b=R=M[E+2])*k,I+=L,_+=N,C+=R,D=D.next;for(w=V,T=A,s=0;s<a;s++)M[v]=O*z>>B,M[v+1]=p*z>>B,M[v+2]=j*z>>B,O-=h,p-=y,j-=P,h-=w.r,y-=w.g,P-=w.b,E=g+((E=s+r+1)<x?E:x)<<2,I+=w.r=M[E],_+=w.g=M[E+1],C+=w.b=M[E+2],O+=I,p+=_,j+=C,w=w.next,h+=L=T.r,y+=N=T.g,P+=R=T.b,I-=L,_-=N,C-=R,T=T.next,v+=4;g+=a}for(s=0;s<a;s++){for(_=C=I=p=j=O=0,h=U*(L=M[v=s<<2]),y=U*(N=M[v+1]),P=U*(R=M[v+2]),O+=K*L,p+=K*N,j+=K*R,D=V,m=0;m<U;m++)D.r=L,D.g=N,D.b=R,D=D.next;for(b=a,m=1;m<=r;m++)v=b+s<<2,O+=(D.r=L=M[v])*(k=U-m),p+=(D.g=N=M[v+1])*k,j+=(D.b=R=M[v+2])*k,I+=L,_+=N,C+=R,D=D.next,m<Y&&(b+=a);for(v=s,w=V,T=A,d=0;d<c;d++)M[E=v<<2]=O*z>>B,M[E+1]=p*z>>B,M[E+2]=j*z>>B,O-=h,p-=y,j-=P,h-=w.r,y-=w.g,P-=w.b,E=s+((E=d+U)<Y?E:Y)*a<<2,O+=I+=w.r=M[E],p+=_+=w.g=M[E+1],j+=C+=w.b=M[E+2],w=w.next,h+=L=T.r,y+=N=T.g,P+=R=T.b,I-=L,_-=N,C-=R,T=T.next,v+=a}u.putImageData(l,t,n)}(t,0,0,a,c,n)}n.d(t,"a",(function(){return u}));var u=function(e){var t,n=e.blurRadius,i=void 0===n?0:n,o=e.children,u=e.image,s=Object(a.useRef)();Object(a.useEffect)((function(){d()}),[]),Object(a.useEffect)((function(){t?m(u)?t.src=u:l(t,s.current,i,window.innerWidth,window.innerHeight):d()}),[u]);var d=function(){m(u)?s.current&&l(t,s.current,i,window.innerWidth,window.innerHeight):((t=new Image).crossOrigin="Anonymous",t.onload=function(e){s.current&&l(t,s.current,i,window.innerWidth,window.innerHeight)},t.src=u)},m=function(e){if(t){var n=new Image;return n.src=e,n.src===u.src}return!1};return c.a.createElement(r.l,{className:"video-blur-image"},c.a.createElement("canvas",{className:"react-blur-canvas",ref:s}),o)};Object(a.memo)(u)},1636:function(e,t,n){},1637:function(e,t,n){},1655:function(e,t,n){"use strict";n.r(t);var a=n(9),c=n(15),r=n(8),i=n(6),o=n.n(i),l=n(0),u=n.n(l),s=n(5),d=n(1822),m=n(1564),f=n(1),E=n(2),b=n(10),v=n(169),g=n(11),O=n(87),p=n(27),j=n(96),h=n(7),y=n(274),P=n(194),I=n(36),_=n(28),C=n(275),L=n(1575),N=n(431),R=n(277);var k=u.a.memo((function(e){var t,n=e.currentId,a=e.onClick,c=e.loadingVideo,i=Object(b.e)(L.a.getSectionRelate),o=Object(r.a)(i,2),s=o[0],d=o[1];Object(l.useEffect)((function(){n&&d(n)}),[n]),h.q.debug("SectionRelate | id ",n);var m=(null===(t=s.value)||void 0===t?void 0:t.data)||[];return s.loading||c?u.a.createElement(f.l,{className:"video-recommend"},u.a.createElement(f.l,{className:"video-footer"},u.a.createElement(R.a,{className:"mar-t-30"}))):u.a.createElement(f.l,{className:"video-recommend"},u.a.createElement(f.l,{className:"video-footer"},m.map((function(e,t){return u.a.createElement(N.b,Object.assign({},e,{key:"video.relate.".concat(t),fullhd:3,widescreen:3,desktop:4,touch:4,tablet:6,onClick:a,viewType:E.qb.GRID}))}))))})),A=(n(1636),n(1598)),w=u.a.memo((function(e){var t=e.video,n=e.loading;return u.a.createElement(f.l,{className:"video-blur-bg ".concat(n?"is-hide":"")},u.a.createElement(A.a,{image:t?t.thumbnailM:"",blurRadius:99}))})),T=n(653),M=n(40),S=n(85),x=n(456);n(1637);function Y(e){var t,n=e.videos,c=e.currentId,r=e.videoIdsInQueue,i=e.loading,d=e.theaterMode,m=e.isFullscreen,b=Object(s.c)(j.f),v=Object(C.a)().toggleRepeat,g=Object(T.a)().width,O=Object(C.a)().playVideo,p=_.Array.findIndex(r,c),h=!d&&!m&&g>1200,y=function(e){e&&O(e,!1)};Object(l.useEffect)((function(){var e=document.getElementById("video-queue-scroll");e&&h&&Object(S.scrollTo)(e,74*p,1e3)}),[p,h]);var P,I=Object(l.useMemo)((function(){return u.a.createElement(u.a.Fragment,null,h?u.a.createElement(f.l,{className:"list-playing-body"},u.a.createElement(f.I,{autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,id:"video-queue-scroll",disableScrollParent:!0},u.a.createElement(x.a,{fullhd:"1.2",widescreen:2,desktop:20,touch:3,tablet:3,items:n,showImageArtist:!1,currentIndex:p,disableSlide:!0,onClick:y}))):u.a.createElement(x.a,{fullhd:"1.2",widescreen:2,desktop:20,touch:3,tablet:3,items:n,showImageArtist:!1,currentIndex:p,disableSlide:!1,onClick:y}))}),[n,p,h]);return i&&p<0||_.Array.isEmpty(n)?u.a.createElement(f.l,{className:o()("video-queue",(P={},Object(a.a)(P,"is-vertical",h),Object(a.a)(P,"is-horizontal",!h),Object(a.a)(P,"is-loading",!0),P))},u.a.createElement("div",{className:"list-playing"},u.a.createElement(f.i,{className:"mar-b-30"},u.a.createElement(R.a,{fullhd:"1.2",widescreen:2,desktop:20,touch:3,tablet:3,countItem:10,countSection:1,showImageArtist:!1,viewType:h?E.qb.LIST:E.qb.SLIDER})))):u.a.createElement(f.l,{className:o()("video-queue",(t={},Object(a.a)(t,"is-vertical",h),Object(a.a)(t,"is-horizontal",!h),t))},u.a.createElement("div",{className:"list-playing"},u.a.createElement(f.i,{className:"mar-b-30"},u.a.createElement(f.l,{className:"list-playing-header"},u.a.createElement(f.M,{renderAs:"h3",className:"pull-left"},"Danh s\xe1ch ph\xe1t"),u.a.createElement(f.d,{className:"zm-auto-play-switch pull-left",onClick:v},u.a.createElement("div",null,"T\u1ef0 \u0110\u1ed8NG PH\xc1T"),u.a.createElement(f.q,{icon:b?u.a.createElement(M.v,null):u.a.createElement(M.w,null),className:o()("ic-svg-switch",{"zm-switch-off":b})}))),I)))}u.a.memo(Y);var U,K=n(1577),V=n(19),D=n.n(V),z=n(280),B=n(1581),H=n(16),F=n(316);!function(e){e[e.PLAY_PAUSE_KEY=1]="PLAY_PAUSE_KEY",e[e.VOLUME_UP_KEY=2]="VOLUME_UP_KEY",e[e.VOLUME_DOWN_KEY=3]="VOLUME_DOWN_KEY",e[e.FULL_SCREEN_KEY=4]="FULL_SCREEN_KEY",e[e.REWIND_KEY=5]="REWIND_KEY",e[e.FORWARD_KEY=6]="FORWARD_KEY",e[e.VOLUME_MUTE_KEY=8]="VOLUME_MUTE_KEY",e[e.NUMBER_KEY=9]="NUMBER_KEY"}(U||(U={}));var W=n(1649),G=n.n(W),Q=n(1650),q=n.n(Q),X=n(1651),J=n.n(X),Z=n(1652),$=n.n(Z),ee={id:"zmp3Player",playerId:"zmp3Player",product:"zmp3_video_v6",storageKey:E.A.MV_PLAYER,height:0,width:"100%",autoPlay:!0,volume:50,dblClickToFullScreen:!1,plugins:[G.a,q.a,J.a,$.a],controls:{time:{delimiter:"|"},seekBar:{bufferedColor:"#b8b8b8",backgroundColor:"#626262"},fullscreen:{dblClickToFullScreen:!0,functionFullscreen:function(){return Object(y.toggleFullScreen)()}}}},te={ControlsPlugin:{disabled:!1,volumeBarShowOnHover:!0,layout:{left:["playpause","next","volume","time"],right:["settings","theatermode","fullscreen"],default:["seekbar"]},theme:K.Constant.MediaControlConst.THEME.PURPLE},KaraokePlugin:{disabled:!1,lines:2,styles:{lineHeight:2,textColor:"#fff",highlightColor:"#d269ff",fontSize:"1.8em",backgroundStyles:{backgroundColor:"",borderRadius:".3em"},controlButton:{activeColor:"#d269ff",inactiveColor:"#fff"}}},LoadingSpinnerPlugin:{showLabel:!0},PrevButtonPlugin:{classIcon:"icon ic-pre"},RepeatPlugin:{disabled:!1,classIcon:"icon ic-repeat",classIconActive:"icon-active"},AutoPlayPlugin:{showBoxUnmute:!1,timeout:3e3}},ne={disabled:!1,lines:2,styles:{lineHeight:2,textColor:"#fff",highlightColor:"#d269ff",fontSize:"1.8em",backgroundStyles:{backgroundColor:"",borderRadius:".3em"},controlButton:{classIcon:"icon ic-karaoke",classIconActive:"icon-active"}}};var ae=Object(l.memo)((function(e){var t=e.currentId,n=e.videoIdsInQueue,a=e.video,c=e.videos,i=e.loading,o=e.isPlaying,d=e.clearState,m=e.setIsPlaying,v=e.setReloadVideo,O=Object(C.a)(),P=O.playNextVideo,I=O.playPrevVideo,L=O.toggleIsOpen,N=O.toggleRepeat,R=O.offRepeat,k=O.toggleMinimize,A=O.toggleFullscreen,w=O.toggleTheaterMode,T=Object(s.b)(),M=Object(l.useState)(),S=Object(r.a)(M,2),x=S[0],Y=S[1],V=Object(s.c)(j.g),W=Object(s.c)(j.f),G=Object(s.c)(g.j),Q=Object(s.c)(g.f),q=Object(s.c)(j.e),X=document.getElementsByClassName("zm-layout")[0],J=Object(s.c)(p.f),Z=Object(l.useCallback)((function(e){return!!o}),[o]);Object(b.g)(Z,[o]);var $=function(e){w(e)},ae=function(){N()},ce=function(){P(t,n,c)},re=function(){var e=_.Array.findIndex(n,t);0===e?(x.pause(),x.seek(0),setTimeout((function(){return x.play()}),0)):I(e,n,c)},ie=function(){P(t,n,c)},oe=function(e){A(e)},le=function(){m(!1)},ue=function(){m(!0)},se=Object(l.useCallback)((function(){L(!1)}),[]),de=Object(l.useCallback)((function(){k(!1)}),[]),me=function(){x&&(x.stop(),x.destroy()),Y(null)},fe=function(){var e,t,n,c,i=Object.assign({},ne,{lyricUrl:a.lyric}),o=Q||a.disabledAds?{}:{source:Object(F.a)(a.encodeId,E.pb),poster:!0},l=Object.assign({},te,{KaraokePlugin:i,ads:o});(null===a||void 0===a||null===(e=a.streaming)||void 0===e?void 0:e.hls)?(n=function(e,t){var n=Object.values(e),a={};if(t)return a.source=n[n.length-1],a;switch(n.length){case 4:a.source=n[1],a.sourceLevelQuality=[{label:"1080p",disabled:!0,index:99},{label:"720p",disabled:!0,index:99}];break;case 3:a.source=n[1],a.sourceLevelQuality=[{label:"720p",disabled:!0,index:99}];break;case 2:a.source=n[1],a.sourceLevelQuality=[];default:a.source=n[0],a.sourceLevelQuality=[]}return a}(a.streaming.hls,G),c=Object.assign({},ee,{loop:W,source:n.source,poster:a.thumbnailM,mimeType:"application/x-mpegURL",sources:n.sourceLevelQuality,pluginsOptions:l})):(null===a||void 0===a||null===(t=a.streaming)||void 0===t?void 0:t.mp4)?(n=function(e,t){for(var n={},a=[],c=0,i=0,o=Object.entries(e);i<o.length;i++){var l=Object(r.a)(o[i],2),u=l[0],s=l[1],d={};d.label=u.toLowerCase(),d.source=s||"",d.index=c,s&&"ERROR"!==s&&a.push(d),c++}return a.length>0?(n.sourceLevelQuality=a.reverse(),n.source=a[a.length-1].source):n.source="ERROR",n}(a.streaming.mp4),c=Object.assign({},ee,{loop:W,source:n.source,poster:a.thumbnailM,mimeType:"video/mp4",sources:n.sourceLevelQuality,pluginsOptions:l})):c=Object.assign({},ee,{source:"ERROR",poster:a.thumbnailM,mimeType:"video/mp4",pluginsOptions:l});var u=new K.Player(c),s=document.getElementById("videoPlayer");u.attachTo(s),u.disableMediaControl(),Y(u)};Object(l.useEffect)((function(){a&&!i&&q&&(me(),fe())}),[a,i,q]);var Ee=function(){v(!0)};Object(l.useEffect)((function(){return function(){d(),me(),R()}}),[]),Object(l.useEffect)((function(){if(x){var e=x.getPlugin("RepeatPlugin");e&&e.setState(W)}}),[W]),Object(l.useEffect)((function(){q&&X.classList.remove("has-player")}),[q]),Object(l.useEffect)((function(){var e=function(){x.pause(),L(!1)};return q&&J.once(K.Events.PLAYER_PLAY,e),function(){q&&J.off(K.Events.PLAYER_PLAY,e)}}),[q,x,J]),Object(l.useEffect)((function(){if(x){w(x.isTheaterMode()),x.on(K.Events.PLAYER_THEATER_MODE_CHANGE,$),x.on(K.Events.PLAYER_ENDED,ie),x.on(K.Events.PLAYER_FULLSCREEN,oe),x.on(K.Events.PLAYER_PAUSE,le),x.on(K.Events.PLAYER_PLAY,ue),x.on(K.Events.PLAYER_QUALITY_LEVELS_SELECTED,(function(e){var t={title:"Xem MV ch\u1ea5t l\u01b0\u1ee3ng cao",text:"B\u1ea1n c\u1ea7n \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng t\xednh n\u0103ng n\xe0y",buttonText:"\u0110\u0103ng nh\u1eadp",functionComplete:Ee};e.disabled&&T(Object(H.o)({type:E.G.VIP,option:t}))}));var e=x.getPlugin("NextButtonPlugin");e&&e.on(e._nameEvents.PLUGIN_NEXT_BUTTON_CLICK,ce);var t=x.getPlugin("PrevButtonPlugin");t&&t.on(t._nameEvents.PLUGIN_PREV_BUTTON_CLICK,re);var n=x.getPlugin("RepeatPlugin");n&&n.on(n._nameEvents.PLUGIN_REPEAT_TOGGLE,ae)}return function(){if(x){x.off(K.Events.PLAYER_THEATER_MODE_CHANGE,$),x.off(K.Events.PLAYER_ENDED,ie),x.off(K.Events.PLAYER_FULLSCREEN,oe),x.off(K.Events.PLAYER_PAUSE,le),x.off(K.Events.PLAYER_PLAY,ue);var e=x.getPlugin("NextButtonPlugin");e&&e.off(e._nameEvents.PLUGIN_NEXT_BUTTON_CLICK,ce);var t=x.getPlugin("PrevButtonPlugin");t&&t.off(t._nameEvents.PLUGIN_PREV_BUTTON_CLICK,re);var n=x.getPlugin("RepeatPlugin");n&&n.off(n._nameEvents.PLUGIN_REPEAT_TOGGLE,ae)}}}),[x,n]),Object(l.useEffect)((function(){var e=function(e){var t,n=!((t=e).metaKey||t.ctrlKey||t.altKey)&&(function(e){return 32===e.keyCode||179===e.keyCode}(t)?U.PLAY_PAUSE_KEY:function(e){return 38===e.keyCode}(t)?U.VOLUME_UP_KEY:function(e){return 40===e.keyCode}(t)?U.VOLUME_DOWN_KEY:function(e){return 77===e.keyCode}(t)?U.VOLUME_MUTE_KEY:function(e){return 70===e.keyCode}(t)?U.FULL_SCREEN_KEY:function(e){return 37===e.keyCode||177===e.keyCode}(t)?U.REWIND_KEY:function(e){return 39===e.keyCode||176===e.keyCode}(t)?U.FORWARD_KEY:!!function(e){return e.keyCode>47&&e.keyCode<59||e.keyCode>95&&e.keyCode<106}(t)&&U.NUMBER_KEY);if(!n)return!0;if(e.metaKey||e.ctrlKey||e.altKey)return!1;var a=e.target;if("INPUT"===a.nodeName||"TEXTAREA"===a.nodeName)return!1;switch(e.preventDefault(),e.stopPropagation(),n){case U.PLAY_PAUSE_KEY:x.togglePlay();break;case U.VOLUME_UP_KEY:x.setVolume(100*x.getVolume()+5,!0);break;case U.VOLUME_DOWN_KEY:x.setVolume(100*x.getVolume()-5,!0);break;case U.VOLUME_MUTE_KEY:x.isMuted()?x.unmute(!0):x.mute(!0);break;case U.FULL_SCREEN_KEY:Object(y.toggleFullScreen)(),A();break;case U.REWIND_KEY:x.seek(x.getCurrentTime()-5);break;case U.FORWARD_KEY:x.seek(x.getCurrentTime()+5);break;case U.NUMBER_KEY:var c=function(e){var t=48;return e.keyCode>95&&(t=96),e.keyCode-t}(e);x.seek(x.getDuration()*c*.1)}return!0};return x&&document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[x]),Object(l.useEffect)((function(){if(!Object(h.i)()&&navigator.mediaSession&&a){Object(B.d)();var e=navigator.mediaSession;return e.metadata=new MediaMetadata({title:a.title,artist:a.artistsNames,artwork:[{src:a.thumbnailM,sizes:"96x96",type:"image/png"},{src:a.thumbnailM,sizes:"128x128",type:"image/png"},{src:a.thumbnailM,sizes:"192x192",type:"image/png"},{src:a.thumbnailM,sizes:"256x256",type:"image/png"},{src:a.thumbnailM,sizes:"384x384",type:"image/png"},{src:a.thumbnailM,sizes:"512x512",type:"image/png"}]}),x&&(e.setActionHandler("play",(function(){return x.togglePlay()})),e.setActionHandler("pause",(function(){return x.togglePlay()})),e.setActionHandler("previoustrack",(function(){return re()})),e.setActionHandler("nexttrack",(function(){return ce()}))),function(){if(x){var t=function(){};e.setActionHandler("play",t),e.setActionHandler("pause",t),e.setActionHandler("previoustrack",t),e.setActionHandler("nexttrack",t)}}}}),[x,a]),h.q.debug("Video Player render ",t," | ",a);var be=a||{},ve=be.title,ge=be.artists;return i?u.a.createElement(u.a.Fragment,null,V?u.a.createElement(D.a,{width:"100%",height:"100%",duration:2}):u.a.createElement(D.a,{width:"100%",height:0,duration:2,style:{paddingBottom:"56.25%"}})):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{id:"videoPlayer"},u.a.createElement(f.l,{className:"player-button-minimize"},u.a.createElement(f.P,{className:"mar-r-5",icon:"floating",title:"M\u1edf r\u1ed9ng",onClick:de}),u.a.createElement(f.P,{title:"\u0110\xf3ng",icon:"close",onClick:se})),u.a.createElement(f.l,{className:"player-info-fullscreen"},"Cu\u1ed9n trang \u0111\u1ec3 xem nhi\u1ec1u h\u01a1n",u.a.createElement(f.q,{icon:"go-down"}))),u.a.createElement(f.l,{className:"video-info-minimize"},u.a.createElement(f.l,{renderAs:"span"},ve),u.a.createElement(f.M,{renderAs:"span",subtitle:!0},"\xa0-\xa0",ge&&u.a.createElement(z.a,{items:ge}))))})),ce=u.a.memo((function(e){var t=e.video,n=e.currentId,a=e.videoIdsInQueue,c=e.videos,r=e.loading,i=e.isPlaying,l=e.isFullscreen,d=e.clearState,m=e.setIsPlaying,E=e.setReloadVideo,b=Object(s.c)(j.g);return u.a.createElement(f.l,{className:o()("video-body",{"theater-mode":b})},u.a.createElement(f.i,null,u.a.createElement(f.h,{multiline:!0},u.a.createElement(f.h.Column,{className:"video-player",marginClass:"mar-b-0"},u.a.createElement(ae,{video:t,currentId:n,videos:c,videoIdsInQueue:a,loading:r,isPlaying:i,clearState:d,setIsPlaying:m,setReloadVideo:E})),u.a.createElement(f.h.Column,{className:"queue-player",marginClass:"mar-b-0"},u.a.createElement(Y,{theaterMode:b,isFullscreen:l,videoIdsInQueue:a,videos:c,currentId:n,loading:r})))))})),re=n(222),ie=n(32);var oe=u.a.memo((function(e){var t=e.video,n=e.className;return u.a.createElement(f.k,{className:o()(n,"pad-t-10","pad-b-10")},u.a.createElement(f.B,null,u.a.createElement(f.B.List,null,u.a.createElement(f.B.List.Item,null,u.a.createElement(ie.c,{object:t})),u.a.createElement(f.B.List.Item,null,u.a.createElement(ie.i,{object:t,type:E.N.VIDEO})))))})),le=n(26),ue=u.a.memo((function(e){var t,n=e.video,a=e.toggleIsOpen,c=e.loading,i=(e.isFullscreen,(n||{}).song),o=Object(b.C)(),s=Object(r.a)(o,1)[0],d=Object(C.a)().toggleMinimize,m=Object(l.useCallback)((function(){a(),s.playSong(i)}),[i]),v=Object(l.useCallback)((function(){a(!1)}),[]),g=Object(l.useCallback)((function(){d(!0)}),[]),O=Object(b.i)({containerId:"video-scroll"}),p=O.ref,j=O.ContextMenu,h=O.handleContextMenu;return c||!n?u.a.createElement(f.l,{className:"video-header is-loading"},u.a.createElement(f.y,null,u.a.createElement(f.y.Side,{align:"left"},u.a.createElement(f.y.Item,null,u.a.createElement(f.A,null,u.a.createElement(f.A.Left,null,u.a.createElement(D.a,{width:40,height:40,duration:2,circle:!0})),u.a.createElement(f.A.Content,null,u.a.createElement(D.a,{width:"400px",duration:2}),u.a.createElement(D.a,{width:"300px",duration:2}))))),u.a.createElement(f.y.Side,{align:"right"},u.a.createElement(f.P,{icon:"close",title:"\u0110\xf3ng",onClick:v})))):u.a.createElement(f.l,{className:"video-header"},u.a.createElement(f.y,null,u.a.createElement(f.y.Side,{align:"left"},u.a.createElement(f.y.Item,null,u.a.createElement(f.A,null,n.artist&&u.a.createElement(f.A.Left,null,u.a.createElement(f.t,{size:40,rounded:!0,src:null===(t=n.artist)||void 0===t?void 0:t.thumbnail})),u.a.createElement(f.A.Content,null,u.a.createElement(re.a,{video:n,titleLink:!1})),u.a.createElement(f.A.Right,null,u.a.createElement(ie.e,{objectId:n.encodeId,objectType:E.N.VIDEO,object:n}),(null===i||void 0===i?void 0:i.encodeId)&&u.a.createElement(f.P,{icon:"song",title:"Nghe Audio",onClick:m}),u.a.createElement(f.l,{domRef:p,className:"header-more-menu"},u.a.createElement(f.P,{icon:"more",title:"Kh\xe1c",onClick:h}),u.a.createElement(j,null,u.a.createElement(oe,{video:n,className:"video-context-menu"}))))))),u.a.createElement(f.y.Side,{align:"right"},u.a.createElement(ie.g,{component:function(e){return u.a.createElement(f.P,Object.assign({className:"mar-r-10",icon:"minimize",title:"Thu nh\u1ecf"},e))},onClickFn:g,category:le.a.MV_DETAIL,action:"Mv",label:"Mini"}),u.a.createElement(f.P,{icon:"close",title:"\u0110\xf3ng",onClick:v}))))})),se=u.a.memo((function(){var e,t=Object(l.useRef)(null),n=u.a.useRef(0),i=Object(s.c)(j.a),d=Object(b.A)().addNotify,N=Object(C.a)(),R=N.toggleIsOpen,A=N.clear,T=N.toggleMinimize,M=Object(m.a)(),S=Object(s.c)(j.e),x=Object(s.c)(j.d),Y=Object(s.c)(j.c),U=Object(l.useState)(!1),K=Object(r.a)(U,2),V=K[0],D=K[1],z=Object(l.useState)(!1),B=Object(r.a)(z,2),H=B[0],F=B[1],W=Object(l.useState)(!1),G=Object(r.a)(W,2),Q=G[0],q=G[1],X=Object(l.useState)([]),J=Object(r.a)(X,2),Z=J[0],$=J[1],ee=Object(l.useState)([]),te=Object(r.a)(ee,2),ne=te[0],ae=te[1],re=Object(l.useState)(),ie=Object(r.a)(re,2),oe=ie[0],le=ie[1],se=Object(l.useState)(!1),de=Object(r.a)(se,2),me=de[0],fe=de[1],Ee=Object(s.c)(j.b),be=Object(l.useState)(!0),ve=Object(r.a)(be,2),ge=ve[0],Oe=ve[1],pe=Object(s.c)(g.m),je=Object(l.useState)(!1),he=Object(r.a)(je,2),ye=he[0],Pe=he[1],Ie=Object(l.useRef)(!1),_e=Object(s.c)(O.a),Ce=Object(s.c)(p.f);Object(l.useEffect)((function(){Me()}),[Ee]);var Le=Object(b.e)(L.a.getDetail),Ne=Object(r.a)(Le,2),Re=Ne[0],ke=Ne[1];Object(l.useEffect)((function(){S&&!x||window.history.replaceState({},"",I.a.get(E.A.MV_PREV_OPEN_URL)||"/")}),[S,x]),Object(l.useEffect)((function(){S&&-1===window.location.href.indexOf("/video-clip/")&&I.a.set(E.A.MV_PREV_OPEN_URL,window.location.href)}),[S,M]),Object(l.useEffect)((function(){if(Re.value&&S&&!x){var e,t=null===(e=Re.value)||void 0===e?void 0:e.data;ge?(window.history.pushState({},t.title,t.link),Oe(!1)):window.history.replaceState({},t.title,t.link)}}),[S,x,Re.value]),Object(l.useEffect)((function(){Re.error&&d({status:E.db.ERROR,text:Re.error.msg})}),[Re]),Object(l.useEffect)((function(){x&&Oe(!0)}),[x]);var Ae=(Re.loading||me)&&!x&&!Y,we=[oe,ne,Ae,V,Y,H];Object(l.useEffect)((function(){var e=document.getElementsByClassName("video-fullscreen-wrapper")[0];return e&&e.addEventListener("mousemove",Ye),e&&e.addEventListener("mouseleave",Ue),Y?Ye():(F(!1),D(!1)),function(){e&&e.removeEventListener("mousemove",Ye),e&&e.removeEventListener("mouseleave",Ue)}}),[Y,H]),Object(l.useEffect)((function(){var e;i&&(le(void 0),ke(i),null===(e=t.current)||void 0===e||e.scrollTo(0,0))}),[i]),Object(l.useEffect)((function(){var e;ye&&(le(void 0),ke(i),null===(e=t.current)||void 0===e||e.scrollTo(0,0))}),[ye]),Object(l.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.scrollTo(0,0)}),[Y]),Object(l.useEffect)((function(){if(Re.value){var e,t=null===(e=Re.value)||void 0===e?void 0:e.data;Te(t),Object(P.o)(t.title,t.artistsNames)}}),[Re.value]),Object(l.useEffect)((function(){return S&&(fe(!0),document.body.style.overflow="hidden",document.body.style.backgroundColor="#000",setTimeout((function(){return fe(!1)}),700)),function(){document.body.removeAttribute("style")}}),[i,S]),Object(l.useEffect)((function(){return!t.current&&S&&(t.current=document.getElementById(E.p.SECTION_VIDEO)),function(){S&&(setTimeout((function(){return A()}),700),Oe(!0),t.current=null)}}),[S]),Object(l.useEffect)((function(){S&&!x||Object(P.q)();var e=function(){R(!1)};return S&&Ce.once(E.Q.PLAYER_PLAY,e),function(){S&&Ce.off(E.Q.PLAYER_PLAY,e)}}),[S,x,Ce]),Object(l.useEffect)((function(){Y&&(Q?xe():Se())}),[Q,Y]),Object(l.useEffect)((function(){var e;M.trigger===E.y.LOAD||-1!==(null===(e=M.pathname)||void 0===e?void 0:e.indexOf("/video-clip/"))||!S||x||Re.loading||(T(!0),Object(y.closeFullscreen)())}),[M]),Object(l.useEffect)((function(){M.trigger===E.y.POP_STATE&&T(!0)}),[M]),Object(l.useEffect)((function(){!Ie.current&&Z.length&&_e&&(Ie.current=!0,v.a.getSuggestMV(i).then((function(e){if(e){var t=_.Array.insert(Object(c.a)(Z),e,2);$(t),ae(t.map((function(e){return e.encodeId})))}})))}),[Z,_e]);var Te=function(e){if(le(e),!Z.length&&e.recommends&&e.recommends.length){e.recommends=e.recommends.filter((function(e){return e.isWorldWide||pe})),$([e].concat(Object(c.a)(e.recommends)));var t=[];t.push(e.encodeId),e.recommends.forEach((function(e){t.push(e.encodeId)})),ae(t)}},Me=function(){ae([]),$([]),le(void 0)},Se=function(){clearTimeout(n.current),D(!0),F(!0)},xe=function(){F(!1),setTimeout((function(){return Ye()}),0)},Ye=Object(l.useCallback)((function(){H||(clearTimeout(n.current),D(!0),n.current=setTimeout((function(){return Ue()}),3e3))}),[H]),Ue=Object(l.useCallback)((function(){H||(clearTimeout(n.current),D(!1))}),[H]),Ke=Object(l.useCallback)((function(){var e;return h.q.debug("Video renderContent ",i," | ",oe,Ae),u.a.createElement(f.l,{className:Ae?"video-loading":"video-wrapper"},u.a.createElement(w,{video:oe,loading:Ae}),u.a.createElement(f.l,{className:"video-container"},u.a.createElement(f.l,{className:o()((e={},Object(a.a)(e,"video-fullscreen-wrapper",Y),Object(a.a)(e,"is-show-info",V),e))},u.a.createElement(ue,{video:oe,toggleIsOpen:R,loading:Ae,isFullscreen:Y}),u.a.createElement(ce,{video:oe,currentId:i,videoIdsInQueue:ne,loading:Ae,clearState:Me,setIsPlaying:q,setReloadVideo:Pe,isPlaying:Q,videos:Z,isFullscreen:Y})),u.a.createElement(k,{currentId:i,loadingVideo:Ae})))}),[we]);return u.a.createElement(f.l,{className:o()("zm-video-modal",(e={},Object(a.a)(e,"video-minimize",x),Object(a.a)(e,"video-fullscreen",Y),e))},u.a.createElement(f.I,{autoHide:!0,autoHideTimeout:1e3,autoHideDuration:200,id:E.p.SECTION_VIDEO},Ke()))}));var de=Object(l.memo)((function(){var e=Object(s.c)(j.e),t=Object(s.c)(j.d),n=Object(C.a)().toggleMinimize,a=Object(l.useCallback)((function(){t&&n(!1)}),[t]);return u.a.createElement(d.a,{in:e,mountOnEnter:!0,unmountOnExit:!0,timeout:600,classNames:"zm-video-animation",onExited:a},u.a.createElement(se,null))}));n.d(t,"VideoService",(function(){return L.a})),n.d(t,"default",(function(){return de}))}}]);