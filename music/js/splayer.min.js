/*!
* SPlayer: Supercharged HTML5 Music Player 
* Version: 2.5.1 
* Build: 25100 
* Â© JaguarScript (https://jaguar-script.web.app) */
"use strict";!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SPlayer=t()}(this,function(){var opt={timeFormat:"auto",metadata:"auto",extradata:!0,fetch:"mediainfo",multithreading:"auto",autoExtract:!0,autoUrlize:!0,embeddedImages:!0,embeddedImagesType:"blob",internetService:"lastfm",corsProxy:"https://kastproxy-us.herokuapp.com/",lastfmKey:"9bba0e6f2ebf18ca2e56865fd9ab8268",enhanceAutocorrect:!0,allowFetchingEntireFile:!1,shareParams:"url",defaultDataObjectsForStreams:!1,maxProcessing:"auto",history:!0,historyLimit:50,lastSession:!0,autoRestore:!0,volume:80,muted:!1,rate:1},d={global:{},track:{},stream:{},playlist:{},collection:{},album:{},artist:{},genre:{},storage:{},queue:{},history:{},task:{},_:{}},p={durationchange:1,ready:1,error:1,ended:1};function y(e,t,r){if(!e)return this;var n,a;p[e]&&y("_"+e,t,r);var i="global";if(!(n=r?(a=r.id,i=r.type,d[i][a]&&d[i][a][e]):d[i][e]))return this;for(var o=0,s=n.length;o<n.length;o++){var u=n[o].type,l=n[o].fn,c=n[o].dataObject,f=n[o].callback;l.apply(l,t),f&&f.apply(f,[u,l,c]),s!==n.length&&(o--,s=n.length)}return this}function e(){var e=opt.shareParams;"url"===e&&(e="search");var t=function(e,t,r){t="hash"===t?"#":"?",r=r.replace(/[\[\]]/g,"\\$&");var n=new RegExp("["+t+"&]"+r+"(=([^&#]*)|&|#|$)").exec(e);return n&&n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):null}(document.location[e],e,"splayer");return t&&at.call(t.split(";"),function(e){var n;at.call(e.split("."),function(e){var t=/\((.*?)\)/.exec(e);if(t=t&&t[1].split(","),n){var r=e.substr(0,e.indexOf("("));n[r].apply(n,t)}else n=t?Xt(t[0],t[1]):Xt})}),this}function JSONPrune(){var p,A,n=function(e,t){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r)},a=function(e,t){for(var r in e)t(r)},i=function(e,t,r){null!=e&&(r=r||{},Object.getOwnPropertyNames(e).forEach(function(e){r[e]||(t(e),r[e]=!0)}),i(Object.getPrototypeOf(e),t,r))};Object.defineProperty(Date.prototype,"toPrunedJSON",{value:Date.prototype.toJSON});var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function g(e){return t.lastIndex=0,t.test(e)?'"'+e.replace(t,function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}var e=function(e,t,c){var f,d='"-pruned-"';if("object"==typeof t){var r=t;t=r.depthDecr,c=r.arrayMaxLength,A=r.iterator||n,r.allProperties?A=i:r.inheritedProperties&&(A=a),"prunedString"in r&&(d=r.prunedString),r.replacer&&(f=r.replacer)}else A=n;return p=[],c=c||1e6,function t(e,r,n){var a,i,o,s,u=r[e];switch(u&&"object"==typeof u&&"function"==typeof u.toPrunedJSON&&(u=u.toPrunedJSON(e)),u&&"function"==typeof u.toJSON&&(u=u.toJSON()),typeof u){case"string":return g(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(n<=0||-1!==p.indexOf(u)){if(f){var l=f(u,d,!0);return void 0===l?void 0:""+l}return d}if(p.push(u),s=[],"[object Array]"!==Object.prototype.toString.apply(u))return A(u,function(e){try{(i=t(e,u,n-1))&&s.push(g(e)+":"+i)}catch(e){}}),"{"+s.join(",")+"}";for(o=Math.min(u.length,c),a=0;a<o;a+=1)s[a]=t(a,u,n-1)||"null";return i="["+s.join(",")+"]",f&&u.length>c?f(u,i,!1):i;case"function":case"undefined":return f?f(u,void 0,!1):void 0}}("",{"":e},t=t||100)};return e.forEachProperty=i,JSON.prune=e}var A=[],B="__splayer__",o=window.Audio,f=o&&[new o,new o];o&&(f[0].preload=f[1].preload="metadata",f[0].setAttribute("data-engine",0),f[1].setAttribute("data-engine",1));var n,a=window.XMLHttpRequest,s=window.URL||window.webkitURL||window.mozURL||window.msURL||window.oURL,i=window.Blob,u=window.BlobBuilder||window.WebKitBlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder,l=window.Worker,_=window.FileReader,t=window.File,g=window.Uint8Array,c=window.atob,v=window.JSON&&JSON.parse,h=JSONPrune(),m=window.setTimeout,b=window.setInterval,k=window.clearTimeout,r=window.clearInterval,R=window.parseInt,w=window.Date,T=window.encodeURIComponent,O=window.encodeURI,F={}.hasOwnProperty,C=String.fromCharCode,E=window.btoa;try{(n=window.localStorage).setItem(B,B),n.removeItem(B)}catch(e){}var I={"audio/mpeg":1,"audio/mp3":1,"audio/ogg":1,"audio/x-m4a":1,"audio/m4a":1,"audio/x-mp4":1,"audio/mp4":1,"audio/mp4a":1,"audio/x-aac":1,"audio/aac":1,"audio/aacp":1},x={mp3:1,ogg:1,oga:1,aac:1,m4a:1,mp4:1},M={tracks:1,streams:1,playlists:1,collections:1,albums:1,artists:1,genres:1},q={queue:1,history:1,storage:1,task:1,_:1},P={track:1,stream:1},D={history:"SPlayer History",task:"SPlayer Task",_:"SPlayer Private",queue:"SPlayer Queue",storage:"SPlayer Offline Storage"},j=["loop","muted","volume","buffered","controls","played","currentSrc","currentTime","duration","ended","paused","mediaGroup","crossOrigin","playbackRate","readyState","seekable","seeking","preload","autoplay"],L={activeAudioEngine:0,_currentAudio:o&&f[0],finishedTasks:0,totalTasks:7,codecTasks:4,finishedCodecTasks:0,__ERROR__:null,worker:null,backgroundEvents:[]},U={mp3:"data:audio/mpeg;base64,//MUxAAB6AXgAAAAAPP+c6nf//yi/6f3//MUxAMAAAIAAAjEcH//0fTX6C9Lf//0//MUxA4BeAIAAAAAAKX2/6zv//+IlR4f//MUxBMCMAH8AAAAABYWalVMQU1FMy45//MUxBUB0AH0AAAAADkuM1VVVVVVVVVV//MUxBgBUATowAAAAFVVVVVVVVVVVVVV",ogg:"data:audio/ogg;base64,T2dnUwACAAAAAAAAAAD/QwAAAAAAAM2LVKsBHgF2b3JiaXMAAAAAAUSsAAAAAAAAgLsAAAAAAAC4AU9nZ1MAAAAAAAAAAAAA/0MAAAEAAADmvOe6Dy3/////////////////MgN2b3JiaXMdAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAwNzA2MjIAAAAAAQV2b3JiaXMfQkNWAQAAAQAYY1QpRplS0kqJGXOUMUaZYpJKiaWEFkJInXMUU6k515xrrLm1IIQQGlNQKQWZUo5SaRljkCkFmVIQS0kldBI6J51jEFtJwdaYa4tBthyEDZpSTCnElFKKQggZU4wpxZRSSkIHJXQOOuYcU45KKEG4nHOrtZaWY4updJJK5yRkTEJIKYWSSgelU05CSDWW1lIpHXNSUmpB6CCEEEK2IIQNgtCQVQAAAQDAQBAasgoAUAAAEIqhGIoChIasAgAyAAAEoCiO4iiOIzmSY0kWEBqyCgAAAgAQAADAcBRJkRTJsSRL0ixL00RRVX3VNlVV9nVd13Vd13UgNGQVAAABAEBIp5mlGiDCDGQYCA1ZBQAgAAAARijCEANCQ1YBAAABAABiKDmIJrTmfHOOg2Y5aCrF5nRwItXmSW4q5uacc845J5tzxjjnnHOKcmYxaCa05pxzEoNmKWgmtOacc57E5kFrqrTmnHPGOaeDcUYY55xzmrTmQWo21uaccxa0pjlqLsXmnHMi5eZJbS7V5pxzzjnnnHPOOeecc6oXp3NwTjjnnHOi9uZabkIX55xzPhmne3NCOOecc84555xzzjnnnHOC0JBVAAAQAABBGDaGcacgSJ+jgRhFiGnIpAfdo8MkaAxyCqlHo6ORUuoglFTGSSmdIDRkFQAACAAAIYQUUkghhRRSSCGFFFKIIYYYYsgpp5yCCiqppKKKMsoss8wyyyyzzDLrsLPOOuwwxBBDDK20EktNtdVYY62555xrDtJaaa211koppZRSSikIDVkFAIAAABAIGWSQQUYhhRRSiCGmnHLKKaigAkJDVgEAgAAAAgAAADzJc0RHdERHdERHdERHdETHczxHlERJlERJtEzL1ExPFVXVlV1b1mXd9m1hF3bd93Xf93Xj14VhWZZlWZZlWZZlWZZlWZZlWYLQkFUAAAgAAIAQQgghhRRSSCGlGGPMMeegk1BCIDRkFQAACAAgAAAAwFEcxXEkR3IkyZIsSZM0S7M8zdM8TfREURRN01RFV3RF3bRF2ZRN13RN2XRVWbVdWbZt2dZtX5Zt3/d93/d93/d93/d93/d1HQgNWQUASAAA6EiOpEiKpEiO4ziSJAGhIasAABkAAAEAKIqjOI7jSJIkSZakSZ7lWaJmaqZneqqoAqEhqwAAQAAAAQAAAAAAKJriKabiKaLiOaIjSqJlWqKmaq4om7Lruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7rui4QGrIKAJAAANCRHMmRHEmRFEmRHMkBQkNWAQAyAAACAHAMx5AUybEsS9M8zdM8TfRET/RMTxVd0QVCQ1YBAIAAAAIAAAAAADAkw1IsR3M0SZRUS7VUTbVUSxVVT1VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTVN0zRNIDRkJQAABADAYo3B5SAhJSXl3hDCEJOeMSYhtV4hBJGS3jEGFYOeMqIMct5C4xCDHggNWREARAEAAMYgxxBzyDlHqZMSOeeodJQa5xyljlJnKcWYYs0oldhSrI1zjlJHraOUYiwtdpRSjanGAgAAAhwAAAIshEJDVgQAUQAAhDFIKaQUYow5p5xDjCnnmHOGMeYcc44556B0UirnnHROSsQYc445p5xzUjonlXNOSiehAACAAAcAgAALodCQFQFAnACAQZI8T/I0UZQ0TxRFU3RdUTRd1/I81fRMU1U90VRVU1Vt2VRVWZY8zzQ901RVzzRV1VRVWTZVVZZFVdVt03V123RV3ZZt2/ddWxZ2UVVt3VRd2zdV1/Zd2fZ9WdZ1Y/I8VfVM03U903Rl1XVtW3VdXfdMU5ZN15Vl03Vt25VlXXdl2fc103Rd01Vl2XRd2XZlV7ddWfZ903WF35VlX1dlWRh2XfeFW9eV5XRd3VdlVzdWWfZ9W9eF4dZ1YZk8T1U903RdzzRdV3VdX1dd19Y105Rl03Vt2VRdWXZl2fddV9Z1zzRl2XRd2zZdV5ZdWfZ9V5Z13XRdX1dlWfhVV/Z1WdeV4dZt4Tdd1/dVWfaFV5Z14dZ1Ybl1XRg+VfV9U3aF4XRl39eF31luXTiW0XV9YZVt4VhlWTl+4ViW3feVZXRdX1ht2RhWWRaGX/id5fZ943h1XRlu3efMuu8Mx++k+8rT1W1jmX3dWWZfd47hGDq/8OOpqq+brisMpywLv+3rxrP7vrKMruv7qiwLvyrbwrHrvvP8vrAso+z6wmrLwrDatjHcvm4sv3Acy2vryjHrvlG2dXxfeArD83R1XXlmXcf2dXTjRzh+ygAAgAEHAIAAE8pAoSErAoA4AQCPJImiZFmiKFmWKIqm6LqiaLqupGmmqWmeaVqaZ5qmaaqyKZquLGmaaVqeZpqap5mmaJqua5qmrIqmKcumasqyaZqy7LqybbuubNuiacqyaZqybJqmLLuyq9uu7Oq6pFmmqXmeaWqeZ5qmasqyaZquq3meanqeaKqeKKqqaqqqraqqLFueZ5qa6KmmJ4qqaqqmrZqqKsumqtqyaaq2bKqqbbuq7Pqybeu6aaqybaqmLZuqatuu7OqyLNu6L2maaWqeZ5qa55mmaZqybJqqK1uep5qeKKqq5ommaqqqLJumqsqW55mqJ4qq6omea5qqKsumatqqaZq2bKqqLZumKsuubfu+68qybqqqbJuqauumasqybMu+78qq7oqmKcumqtqyaaqyLduy78uyrPuiacqyaaqybaqqLsuybRuzbPu6aJqybaqmLZuqKtuyLfu6LNu678qub6uqrOuyLfu67vqucOu6MLyybPuqrPq6K9u6b+sy2/Z9RNOUZVM1bdtUVVl2Zdn2Zdv2fdE0bVtVVVs2TdW2ZVn2fVm2bWE0Tdk2VVXWTdW0bVmWbWG2ZeF2Zdm3ZVv2ddeVdV/XfePXZd3murLty7Kt+6qr+rbu+8Jw667wCgAAGHAAAAgwoQwUGrISAIgCAACMYYwxCI1SzjkHoVHKOecgZM5BCCGVzDkIIZSSOQehlJQy5yCUklIIoZSUWgshlJRSawUAABQ4AAAE2KApsThAoSErAYBUAACD41iW55miatqyY0meJ4qqqaq27UiW54miaaqqbVueJ4qmqaqu6+ua54miaaqq6+q6aJqmqaqu67q6Lpqiqaqq67qyrpumqqquK7uy7Oumqqqq68quLPvCqrquK8uybevCsKqu68qybNu2b9y6ruu+7/vCka3rui78wjEMRwEA4AkOAEAFNqyOcFI0FlhoyEoAIAMAgDAGIYMQQgYhhJBSSiGllBIAADDgAAAQYEIZKDRkRQAQJwAAGEMppJRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkgppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkqppJRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoplVJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSCgCQinAAkHowoQwUGrISAEgFAACMUUopxpyDEDHmGGPQSSgpYsw5xhyUklLlHIQQUmktt8o5CCGk1FJtmXNSWosx5hgz56SkFFvNOYdSUoux5ppr7qS0VmuuNedaWqs115xzzbm0FmuuOdecc8sx15xzzjnnGHPOOeecc84FAOA0OACAHtiwOsJJ0VhgoSErAYBUAAACGaUYc8456BBSjDnnHIQQIoUYc845CCFUjDnnHHQQQqgYc8w5CCGEkDnnHIQQQgghcw466CCEEEIHHYQQQgihlM5BCCGEEEooIYQQQgghhBA6CCGEEEIIIYQQQgghhFJKCCGEEEIJoZRQAABggQMAQIANqyOcFI0FFhqyEgAAAgCAHJagUs6EQY5Bjw1BylEzDUJMOdGZYk5qMxVTkDkQnXQSGWpB2V4yCwAAgCAAIMAEEBggKPhCCIgxAABBiMwQCYVVsMCgDBoc5gHAA0SERACQmKBIu7iALgNc0MVdB0IIQhCCWBxAAQk4OOGGJ97whBucoFNU6iAAAAAAAAwA4AEA4KAAIiKaq7C4wMjQ2ODo8AgAAAAAABYA+AAAOD6AiIjmKiwuMDI0Njg6PAIAAAAAAAAAAICAgAAAAAAAQAAAAICAT2dnUwAE7AwAAAAAAAD/QwAAAgAAADuydfsFAQEBAQEACg4ODg==",m4a:"data:audio/x-m4a;base64,AAAAGGZ0eXBNNEEgAAACAGlzb21pc28yAAAACGZyZWUAAAAfbWRhdN4EAABsaWJmYWFjIDEuMjgAAAFoAQBHAAACiG1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAYAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAG0dHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAYAAAAAAAAAAAAAAAAAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAABUG1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAArEQAAAQAVcQAAAAAAC1oZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU291bmRIYW5kbGVyAAAAAPttaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAL9zdGJsAAAAW3N0c2QAAAAAAAAAAQAAAEttcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAACdlc2RzAAAAAAMZAAEABBFAFQAAAAABftAAAAAABQISCAYBAgAAABhzdHRzAAAAAAAAAAEAAAABAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAXAAAAAQAAABRzdGNvAAAAAAAAAAEAAAAoAAAAYHVkdGEAAABYbWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAraWxzdAAAACOpdG9vAAAAG2RhdGEAAAABAAAAAExhdmY1Mi42NC4y",aac:"data:audio/aac;base64,//FQQAPf/N4EAABsaWJmYWFjIDEuMjgAAAGQAQBH//FQQAG//ADIAIAjgP/xUEABv/wAyACAI4D/8VBAAb/8AMgAgCOA//FQQAG//ADIAIAjgA=="};function V(e){if(!a)return!1;var t=new a;try{t.open("get","/",!0),t.responseType=e}catch(e){return!1}return"response"in t&&t.responseType===e}var W,z,N=a&&"withCredentials"in new a,Q=V("blob"),X=V("arraybuffer"),K=o&&f[0].canPlayType,H=_&&_.prototype.readAsArrayBuffer&&s,Z=i||u,J=t&&H,G=N&&H,Y={essential:!!(K&&A.indexOf&&window.addEventListener),storage:!(!n||!v),metadata:!!G,multithreading:null,attributes:{},formats:{},inputs:{url:N,blob:!(!Z||!H),file:!!J,data:!(!c||!Z)},extra:{XHR2:N,XHRTypeBlob:Q,XHRTypeArrayBuffer:X,workerFileReader:null}};function $(e){k(W);var t=void 0!==e&&"playing"===e.type;this.onplaying=null,Y.attributes.autoplay=t,Ze(L.totalTasks,++L.finishedTasks)}function ee(e){k(z);var t=void 0!==e&&"loadeddata"===e.type;this.onloadeddata=null,Y.attributes.preload=t,Ze(L.totalTasks,++L.finishedTasks)}function te(){if(K){var e=new o,t=new o;e.src=t.src=Y.formats.mp3?U.mp3:U.ogg,e.autoplay=!0,t.preload="auto",e.onplaying=$,t.onloadeddata=ee,W=m($,300),z=m(ee,300)}}function re(e){return!(!K||!f[0].canPlayType(e).replace(/^no$/,""))}function ne(t,e){if(!K)return Y.formats[t]=null,"ogg"===t&&(Y.formats.oga=null),void("m4a"===t&&(Y.formats.mp4=null));var r=new o,n=m(function(){Y.formats[t]="aac"===t&&re("audio/aac;"),"ogg"===t&&(Y.formats.oga=!1),"m4a"===t&&(Y.formats.mp4=!1),L.codecTasks===++L.finishedCodecTasks&&te(),Ze(L.totalTasks,++L.finishedTasks),r.onerror=r.onloadeddata=null},1e3);r.src=e,r.load(),r.onloadeddata=function(){k(n),Y.formats[t]=!0,"ogg"===t&&(Y.formats.oga=!0),"m4a"===t&&(Y.formats.mp4=!0),L.codecTasks===++L.finishedCodecTasks&&te(),Ze(L.totalTasks,++L.finishedTasks),this.onerror=this.onloadeddata=null},r.onerror=function(e){k(n),Y.formats[t]="aac"===t&&re("audio/aac;"),"ogg"===t&&(Y.formats.oga=!1),"m4a"===t&&(Y.formats.mp4=!1),L.codecTasks===++L.finishedCodecTasks&&te(),Ze(L.totalTasks,++L.finishedTasks),this.onerror=this.onloadeddata=null}}for(var ae in U)F.call(U,ae)&&ne(ae,U[ae]);if(function(){if(!l||!Z||!s)return Y.multithreading=!1,Ze(L.totalTasks,++L.finishedTasks);var e,t,r;try{e=s.createObjectURL($e(["onmessage=function(e){postMessage(!!(self.FileReader && self.FileReader.prototype.readAsArrayBuffer))}"],{type:"text/javascript"})),(t=new l(e)).onmessage=function(e){Y.extra.workerFileReader=e.data,Y.multithreading=!0,Ze(L.totalTasks,++L.finishedTasks),a()},t.onerror=n,r=m(n,300),t.postMessage(B)}catch(e){n()}function n(){Y.multithreading=!1,Ze(L.totalTasks,++L.finishedTasks),a()}function a(){e&&s.revokeObjectURL(e),t&&t.terminate(),r&&k(r),t.onmessage=t.onerror=null}}(),K)for(var ie=0,oe=j.length;ie<oe;ie++)Y.attributes[j[ie]]=j[ie]in f[0];function JSMediaTags(){!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).jsmediatags=e()}}(function(){return function i(o,s,u){function l(r,e){if(!s[r]){if(!o[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(c)return c(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var a=s[r]={exports:{}};o[r][0].call(a.exports,function(e){var t=o[r][1][e];return l(t||e)},a,a.exports,i,o,s,u)}return s[r].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,r){},{}],2:[function(e,t,r){t.exports=XMLHttpRequest},{}],3:[function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=e("./MediaFileReader"),n=function(e){function a(e){var t,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=this,c(u(t=!(n=s(a).call(this))||"object"!==i(n)&&"function"!=typeof n?u(r):n),"_array",void 0),c(u(t),"_size",void 0),t._array=e,t._size=e.length,t._isInitialized=!0,t}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(a,f),t=a,n=[{key:"canReadFile",value:function(e){return Array.isArray(e)||"function"==typeof Buffer&&Buffer.isBuffer(e)}}],(r=[{key:"init",value:function(e){setTimeout(e.onSuccess,0)}},{key:"loadRange",value:function(e,t){setTimeout(t.onSuccess,0)}},{key:"getByteAt",value:function(e){if(e>=this._array.length)throw new Error("Offset "+e+" hasn't been loaded yet.");return this._array[e]}}])&&o(t.prototype,r),n&&o(t,n),a}();t.exports=n},{"./MediaFileReader":11}],4:[function(e,t,r){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=e("./ChunkedFileData"),d=e("./MediaFileReader"),n=function(e){function a(e){var t,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=this,c(u(t=!(n=s(a).call(this))||"object"!==i(n)&&"function"!=typeof n?u(r):n),"_blob",void 0),c(u(t),"_fileData",void 0),t._blob=e,t._fileData=new f,t}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(a,d),t=a,n=[{key:"canReadFile",value:function(e){return"undefined"!=typeof Blob&&e instanceof Blob||"undefined"!=typeof File&&e instanceof File}}],(r=[{key:"_init",value:function(e){this._size=this._blob.size,setTimeout(e.onSuccess,1)}},{key:"loadRange",value:function(r,n){var a=this,e=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,r[0],r[1]+1),i=new FileReader;i.onloadend=function(e){var t=new Uint8Array(i.result);a._fileData.addData(r[0],t),n.onSuccess()},i.onerror=i.onabort=function(e){n.onError&&n.onError({type:"blob",info:i.error})},i.readAsArrayBuffer(e)}},{key:"getByteAt",value:function(e){return this._fileData.getByteAt(e)}}])&&o(t.prototype,r),n&&o(t,n),a}();t.exports=n},{"./ChunkedFileData":5,"./MediaFileReader":11}],5:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var i=function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=void 0,(t="_fileData")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,this._fileData=[]}return a(n,null,[{key:"NOT_FOUND",get:function(){return-1}}]),a(n,[{key:"addData",value:function(e,t){var r=e+t.length-1,n=this._getChunkRange(e,r);if(-1===n.startIx)this._fileData.splice(n.insertIx||0,0,{offset:e,data:t});else{var a=this._fileData[n.startIx],i=this._fileData[n.endIx],o=e>a.offset,s=r<i.offset+i.data.length-1,u={offset:Math.min(e,a.offset),data:t};if(o){var l=this._sliceData(a.data,0,e-a.offset);u.data=this._concatData(l,t)}if(s){l=this._sliceData(u.data,0,i.offset-u.offset);u.data=this._concatData(l,i.data)}this._fileData.splice(n.startIx,n.endIx-n.startIx+1,u)}}},{key:"_concatData",value:function(e,t){if("undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e)){var r=new e.constructor(e.length+t.length);return r.set(e,0),r.set(t,e.length),r}return e.concat(t)}},{key:"_sliceData",value:function(e,t,r){return e.slice?e.slice(t,r):e.subarray(t,r)}},{key:"_getChunkRange",value:function(e,t){for(var r=-1,n=-1,a=0,i=0;i<this._fileData.length;a=++i){var o=(s=this._fileData[i].offset)+this._fileData[i].data.length;if(t<s-1)break;if(e<=o+1&&s-1<=t){r=i;break}}if(-1===r)return{startIx:-1,endIx:-1,insertIx:a};for(i=r;i<this._fileData.length;i++){var s;if((s=this._fileData[i].offset)-1<=t&&(n=i),t<=(o=s+this._fileData[i].data.length)+1)break}return-1===n&&(n=r),{startIx:r,endIx:n}}},{key:"hasDataRange",value:function(e,t){for(var r=0;r<this._fileData.length;r++){var n=this._fileData[r];if(t<n.offset)return!1;if(e>=n.offset&&t<n.offset+n.data.length)return!0}return!1}},{key:"getByteAt",value:function(e){for(var t,r=0;r<this._fileData.length;r++){var n=this._fileData[r].offset,a=n+this._fileData[r].data.length-1;if(n<=e&&e<=a){t=this._fileData[r];break}}if(t)return t.data[e-t.offset];throw new Error("Offset "+e+" hasn't been loaded yet.")}}]),n}();t.exports=i},{}],6:[function(e,t,r){function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=e("./MediaTagReader"),d=[4,132],p=[6,134],I=["Other","32x32 pixels 'file icon' (PNG only)","Other file icon","Cover (front)","Cover (back)","Leaflet page","Media (e.g. label side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"],n=function(e){function s(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=this,f(c(t=!(n=(e=l(s)).call.apply(e,[this].concat(i)))||"object"!==u(n)&&"function"!=typeof n?c(r):n),"_commentOffset",void 0),f(c(t),"_pictureOffset",void 0),t}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(s,o),t=s,n=[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:4}}},{key:"canReadTagFormat",value:function(e){return"fLaC"===String.fromCharCode.apply(String,e.slice(0,4))}}],(r=[{key:"_loadData",value:function(e,t){var r=this;e.loadRange([4,7],{onSuccess:function(){r._loadBlock(e,4,t)}})}},{key:"_loadBlock",value:function(e,t,r){var n=this,a=e.getByteAt(t),i=e.getInteger24At(t+1,!0);if(-1!==d.indexOf(a)){var o=t+4;e.loadRange([o,o+i],{onSuccess:function(){n._commentOffset=o,n._nextBlock(e,t,a,i,r)}})}else if(-1!==p.indexOf(a)){o=t+4;e.loadRange([o,o+i],{onSuccess:function(){n._pictureOffset=o,n._nextBlock(e,t,a,i,r)}})}else n._nextBlock(e,t,a,i,r)}},{key:"_nextBlock",value:function(e,t,r,n,a){var i=this;127<r?i._commentOffset?a.onSuccess():a.onError({type:"loadData",info:"Comment block could not be found."}):e.loadRange([t+4+n,t+4+4+n],{onSuccess:function(){i._loadBlock(e,t+4+n,a)}})}},{key:"_parseData",value:function(e,t){for(var r,n,a,i,o,s,u=e.getLongAt(this._commentOffset,!1)+(this._commentOffset+4),l=e.getLongAt(u,!1),c=u+4,f=0;f<l;f++){var d=e.getLongAt(c,!1),p=e.getStringWithCharsetAt(c+4,d,"utf-8").toString(),A=p.indexOf("="),g=[p.slice(0,A),p.slice(A+1)];switch(g[0]){case"TITLE":r=g[1];break;case"ARTIST":n=g[1];break;case"ALBUM":a=g[1];break;case"TRACKNUMBER":i=g[1];break;case"GENRE":o=g[1]}c+=4+d}if(this._pictureOffset){var h=e.getLongAt(this._pictureOffset,!0),m=this._pictureOffset+4,y=e.getLongAt(m,!0),_=m+4,v=e.getStringAt(_,y),b=_+y,k=e.getLongAt(b,!0),R=b+4,w=e.getStringWithCharsetAt(R,k,"utf-8").toString(),T=R+k+16,O=e.getLongAt(T,!0),C=T+4,E=e.getBytesAt(C,O,!0);s={format:v,type:I[h],description:w,data:E}}return{type:"FLAC",version:"1",tags:{title:r,artist:n,album:a,track:i,genre:o,picture:s}}}}])&&a(t.prototype,r),n&&a(t,n),s}();t.exports=n},{"./MediaTagReader":12}],7:[function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./MediaTagReader"),a=(e("./MediaFileReader"),function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,s(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,l),r=t,a=[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(e){return"TAG"===String.fromCharCode.apply(String,e.slice(0,3))}}],(n=[{key:"_loadData",value:function(e,t){var r=e.getSize();e.loadRange([r-128,r-1],t)}},{key:"_parseData",value:function(e,t){var r=e.getSize()-128,n=e.getStringWithCharsetAt(r+3,30).toString(),a=e.getStringWithCharsetAt(r+33,30).toString(),i=e.getStringWithCharsetAt(r+63,30).toString(),o=e.getStringWithCharsetAt(r+93,4).toString(),s=e.getByteAt(r+97+28),u=e.getByteAt(r+97+29);if(0==s&&0!=u)var l="1.1",c=e.getStringWithCharsetAt(r+97,28).toString();else{l="1.0",c=e.getStringWithCharsetAt(r+97,30).toString();u=0}var f=e.getByteAt(r+97+30);if(f<255)var d=A[f];else d="";var p={type:"ID3",version:l,tags:{title:n,artist:a,album:i,year:o,comment:c,genre:d}};return u&&(p.tags.track=u),p}}])&&i(r.prototype,n),a&&i(r,a),t}()),A=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychadelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk-Rock","National Folk","Swing","Fast Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","Acapella","Euro-House","Dance Hall"];t.exports=a},{"./MediaFileReader":11,"./MediaTagReader":12}],8:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e("./MediaFileReader");var f=e("./StringUtils"),i=e("./ArrayFileReader"),a={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",CHAP:"Chapter",CTOC:"Table of contents",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"},o=function(){function h(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h)}var e,t,r;return e=h,r=[{key:"getFrameReaderFunction",value:function(e){return e in s?s[e]:"T"===e[0]?s["T*"]:"W"===e[0]?s["W*"]:null}},{key:"readFrames",value:function(e,t,r,n,a){for(var i={},o=this._getFrameHeaderSize(n);e<t-o;){var s=this._readFrameHeader(r,e,n),u=s.id;if(!u)break;var l=s.flags,c=s.size,f=e+s.headerSize,d=r;if(e+=s.headerSize+s.size,!a||-1!==a.indexOf(u)){if("MP3e"===u||"\0MP3"===u||"\0\0MP"===u||" MP3"===u)break;l&&l.format.unsynchronisation&&(d=this.getUnsyncFileReader(d,f,c),f=0,c=d.getSize()),l&&l.format.data_length_indicator&&(f+=4,c-=4);var p=h.getFrameReaderFunction(u),A=p?p.apply(this,[f,c,d,l,n]):null,g={id:u,size:c,description:this._getFrameDescription(u),data:A};u in i?(i[u].id&&(i[u]=[i[u]]),i[u].push(g)):i[u]=g}}return i}},{key:"_getFrameHeaderSize",value:function(e){var t=e.major;return 2==t?6:3==t||4==t?10:0}},{key:"_readFrameHeader",value:function(e,t,r){var n=r.major,a=null,i=this._getFrameHeaderSize(r);switch(n){case 2:var o=e.getStringAt(t,3),s=e.getInteger24At(t+3,!0);break;case 3:o=e.getStringAt(t,4),s=e.getLongAt(t+4,!0);break;case 4:o=e.getStringAt(t,4),s=e.getSynchsafeInteger32At(t+4)}return o!=String.fromCharCode(0,0,0)&&o!=String.fromCharCode(0,0,0,0)||(o=""),o&&2<n&&(a=this._readFrameFlags(e,t+8)),{id:o||"",size:s||0,headerSize:i||0,flags:a}}},{key:"_readFrameFlags",value:function(e,t){return{message:{tag_alter_preservation:e.isBitSetAt(t,6),file_alter_preservation:e.isBitSetAt(t,5),read_only:e.isBitSetAt(t,4)},format:{grouping_identity:e.isBitSetAt(t+1,7),compression:e.isBitSetAt(t+1,3),encryption:e.isBitSetAt(t+1,2),unsynchronisation:e.isBitSetAt(t+1,1),data_length_indicator:e.isBitSetAt(t+1,0)}}}},{key:"_getFrameDescription",value:function(e){return e in a?a[e]:"Unknown"}},{key:"getUnsyncFileReader",value:function(e,t,r){for(var n=e.getBytesAt(t,r),a=0;a<n.length-1;a++)255===n[a]&&0===n[a+1]&&n.splice(a+1,1);return new i(n)}}],(t=null)&&n(e.prototype,t),r&&n(e,r),h}(),s={};function d(e){var t;switch(e){case 0:t="iso-8859-1";break;case 1:t="utf-16";break;case 2:t="utf-16be";break;case 3:t="utf-8";break;default:t="iso-8859-1"}return t}function u(e,t,r,n){var a=r.getStringWithCharsetAt(e+1,t-1,n),i=r.getStringWithCharsetAt(e+1+a.bytesReadCount,t-1-a.bytesReadCount,n);return{user_description:a.toString(),data:i.toString()}}s.APIC=function(e,t,r,n,a){var i=e,o=d(r.getByteAt(e));switch(a&&a.major){case 2:var s=r.getStringAt(e+1,3);e+=4;break;case 3:case 4:e+=1+(s=r.getStringWithCharsetAt(e+1,t-1)).bytesReadCount;break;default:throw new Error("Couldn't read ID3v2 major version.")}var u=r.getByteAt(e),l=p[u],c=r.getStringWithCharsetAt(e+1,t-(e-i)-1,o);return e+=1+c.bytesReadCount,{format:s.toString(),type:l,description:c.toString(),data:r.getBytesAt(e,i+t-e)}},s.CHAP=function(e,t,r,n,a){var i=e,o={},s=f.readNullTerminatedString(r.getBytesAt(e,t));o.id=s.toString(),e+=s.bytesReadCount,o.startTime=r.getLongAt(e,!0),e+=4,o.endTime=r.getLongAt(e,!0),e+=4,o.startOffset=r.getLongAt(e,!0),e+=4,o.endOffset=r.getLongAt(e,!0);var u=t-((e+=4)-i);return o.subFrames=this.readFrames(e,e+u,r,a),o},s.CTOC=function(e,t,r,n,a){var i=e,o={childElementIds:[],id:void 0,topLevel:void 0,ordered:void 0,entryCount:void 0,subFrames:void 0},s=f.readNullTerminatedString(r.getBytesAt(e,t));o.id=s.toString(),e+=s.bytesReadCount,o.topLevel=r.isBitSetAt(e,1),o.ordered=r.isBitSetAt(e,0),e++,o.entryCount=r.getByteAt(e),e++;for(var u=0;u<o.entryCount;u++){var l=f.readNullTerminatedString(r.getBytesAt(e,t-(e-i)));o.childElementIds.push(l.toString()),e+=l.bytesReadCount}var c=t-(e-i);return o.subFrames=this.readFrames(e,e+c,r,a),o},s.COMM=function(e,t,r,n,a){var i=e,o=d(r.getByteAt(e)),s=r.getStringAt(e+1,3),u=r.getStringWithCharsetAt(e+4,t-4,o);e+=4+u.bytesReadCount;var l=r.getStringWithCharsetAt(e,i+t-e,o);return{language:s,short_description:u.toString(),text:l.toString()}},s.COM=s.COMM,s.PIC=function(e,t,r,n,a){return s.APIC(e,t,r,n,a)},s.PCNT=function(e,t,r,n,a){return r.getLongAt(e,!1)},s.CNT=s.PCNT,s["T*"]=function(e,t,r,n,a){var i=d(r.getByteAt(e));return r.getStringWithCharsetAt(e+1,t-1,i).toString()},s.TXXX=function(e,t,r,n,a){var i=d(r.getByteAt(e));return u(e,t,r,i)},s.WXXX=function(e,t,r,n,a){if(0===t)return null;var i=d(r.getByteAt(e));return u(e,t,r,i)},s["W*"]=function(e,t,r,n,a){return 0===t?null:r.getStringWithCharsetAt(e,t,"iso-8859-1").toString()},s.TCON=function(e,t,r,n){return s["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")},s.TCO=s.TCON,s.USLT=function(e,t,r,n,a){var i=e,o=d(r.getByteAt(e)),s=r.getStringAt(e+1,3),u=r.getStringWithCharsetAt(e+4,t-4,o);e+=4+u.bytesReadCount;var l=r.getStringWithCharsetAt(e,i+t-e,o);return{language:s,descriptor:u.toString(),lyrics:l.toString()}},s.ULT=s.USLT,s.UFID=function(e,t,r,n,a){var i=f.readNullTerminatedString(r.getBytesAt(e,t));e+=i.bytesReadCount;var o=r.getBytesAt(e,t-i.bytesReadCount);return{ownerIdentifier:i.toString(),identifier:o}};var p=["Other","32x32 pixels 'file icon' (PNG only)","Other file icon","Cover (front)","Cover (back)","Leaflet page","Media (e.g. label side of CD)","Lead artist/lead performer/soloist","Artist/performer","Conductor","Band/Orchestra","Composer","Lyricist/text writer","Recording Location","During recording","During performance","Movie/video screen capture","A bright coloured fish","Illustration","Band/artist logotype","Publisher/Studio logotype"];t.exports=o},{"./ArrayFileReader":3,"./MediaFileReader":11,"./StringUtils":13}],9:[function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./MediaTagReader"),h=(e("./MediaFileReader"),e("./ID3v2FrameReader")),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,s(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,l),r=t,a=[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(e){return"ID3"===String.fromCharCode.apply(String,e.slice(0,3))}}],(n=[{key:"_loadData",value:function(e,t){e.loadRange([6,9],{onSuccess:function(){e.loadRange([0,10+e.getSynchsafeInteger32At(6)-1],t)},onError:t.onError})}},{key:"_parseData",value:function(e,t){var r=0,n=e.getByteAt(r+3);if(4<n)return{type:"ID3",version:">2.4",tags:{}};var a=e.getByteAt(r+4),i=e.isBitSetAt(r+5,7),o=e.isBitSetAt(r+5,6),s=e.isBitSetAt(r+5,5),u=e.getSynchsafeInteger32At(r+6);(r+=10,o)&&(r+=4===n?e.getSynchsafeInteger32At(r):e.getLongAt(r,!0)+4);var l={type:"ID3",version:"2."+n+"."+a,major:n,revision:a,flags:{unsynchronisation:i,extended_header:o,experimental_indicator:s,footer_present:!1},size:u,tags:{}};if(t)var c=this._expandShortcutTags(t);var f=u+10;l.flags.unsynchronisation&&(e=h.getUnsyncFileReader(e,r,u),r=0,f=e.getSize());var d=h.readFrames(r,f,e,l,c);for(var p in m)if(m.hasOwnProperty(p)){var A=this._getFrameData(d,m[p]);A&&(l.tags[p]=A)}for(var g in d)d.hasOwnProperty(g)&&(l.tags[g]=d[g]);return l}},{key:"_getFrameData",value:function(e,t){for(var r,n=0;r=t[n];n++)if(r in e)return(e[r]instanceof Array?e[r][0]:e[r]).data}},{key:"getShortcuts",value:function(){return m}}])&&i(r.prototype,n),a&&i(r,a),t}(),m={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};t.exports=a},{"./ID3v2FrameReader":8,"./MediaFileReader":11,"./MediaTagReader":12}],10:[function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=e("./MediaTagReader"),a=(e("./MediaFileReader"),function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,s(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,l),r=t,a=[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(e){return"ftyp"===String.fromCharCode.apply(String,e.slice(4,8))}}],(n=[{key:"_loadData",value:function(e,t){var r=this;e.loadRange([0,16],{onSuccess:function(){r._loadAtom(e,0,"",t)},onError:t.onError})}},{key:"_loadAtom",value:function(e,t,r,n){if(t>=e.getSize())n.onSuccess();else{var a=this,i=e.getLongAt(t,!0);if(0==i||isNaN(i))n.onSuccess();else{var o=e.getStringAt(t+4,4);if(this._isContainerAtom(o)){"meta"==o&&(t+=4);var s=(r?r+".":"")+o;"moov.udta.meta.ilst"===s?e.loadRange([t,t+i],n):e.loadRange([t+8,t+8+8],{onSuccess:function(){a._loadAtom(e,t+8,s,n)},onError:n.onError})}else e.loadRange([t+i,t+i+8],{onSuccess:function(){a._loadAtom(e,t+i,r,n)},onError:n.onError})}}}},{key:"_isContainerAtom",value:function(e){return 0<=["moov","udta","meta","ilst"].indexOf(e)}},{key:"_canReadAtom",value:function(e){return"----"!==e}},{key:"_parseData",value:function(e,t){var r={};for(var n in t=this._expandShortcutTags(t),this._readAtom(r,e,0,e.getSize(),t),d)if(d.hasOwnProperty(n)){var a=r[d[n]];a&&(r[n]="track"===n?a.data.track:a.data)}return{type:"MP4",ftyp:e.getStringAt(8,4),version:e.getLongAt(12,!0),tags:r}}},{key:"_readAtom",value:function(e,t,r,n,a,i,o){o=void 0===o?"":o+"  ";for(var s=r;s<r+n;){var u=t.getLongAt(s,!0);if(0==u)return;var l=t.getStringAt(s+4,4);if(this._isContainerAtom(l)){"meta"==l&&(s+=4);var c=(i?i+".":"")+l;return void this._readAtom(e,t,s+8,u-8,a,c,o)}(!a||0<=a.indexOf(l))&&"moov.udta.meta.ilst"===i&&this._canReadAtom(l)&&(e[l]=this._readMetadataAtom(t,s)),s+=u}}},{key:"_readMetadataAtom",value:function(e,t){var r=e.getLongAt(t,!0),n=e.getStringAt(t+4,4),a=e.getInteger24At(t+16+1,!0),i=c[a];if("trkn"==n)o={track:e.getByteAt(t+16+11),total:e.getByteAt(t+16+13)};else if("disk"==n)o={disk:e.getByteAt(t+16+11),total:e.getByteAt(t+16+13)};else{var o,s=t+24,u=r-24;switch("covr"===n&&"uint8"===i&&(i="jpeg"),i){case"text":o=e.getStringWithCharsetAt(s,u,"utf-8").toString();break;case"uint8":o=e.getShortAt(s,!1);break;case"int":case"uint":o=("int"==i?1==u?e.getSByteAt:2==u?e.getSShortAt:4==u?e.getSLongAt:e.getLongAt:1==u?e.getByteAt:2==u?e.getShortAt:e.getLongAt).call(e,s+(8==u?4:0),!0);break;case"jpeg":case"png":o={format:"image/"+i,data:e.getBytesAt(s,u)}}}return{id:n,size:r,description:f[n]||"Unknown",data:o}}},{key:"getShortcuts",value:function(){return d}}])&&i(r.prototype,n),a&&i(r,a),t}()),c={0:"uint8",1:"text",13:"jpeg",14:"png",21:"int",22:"uint"},f={"Â©alb":"Album","Â©ART":"Artist",aART:"Album Artist","Â©day":"Release Date","Â©nam":"Title","Â©gen":"Genre",gnre:"Genre",trkn:"Track Number","Â©wrt":"Composer","Â©too":"Encoding Tool","Â©enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","Â©grp":"Grouping",keyw:"Keywords","Â©lyr":"Lyrics","Â©cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code",atID:"Artist ID",cnID:"Catalog ID",plID:"Collection ID",geID:"Genre ID","xid ":"Vendor Information",flvr:"Codec Flavor"},d={title:"Â©nam",artist:"Â©ART",album:"Â©alb",year:"Â©day",comment:"Â©cmt",track:"trkn",genre:"Â©gen",picture:"covr",lyrics:"Â©lyr"};t.exports=a},{"./MediaFileReader":11,"./MediaTagReader":12}],11:[function(e,t,r){function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=e("./StringUtils"),n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"_isInitialized",void 0),i(this,"_size",void 0),this._isInitialized=!1,this._size=0}var e,r,n;return e=t,n=[{key:"canReadFile",value:function(e){throw new Error("Must implement canReadFile function")}}],(r=[{key:"init",value:function(e){var t=this;if(!this._isInitialized)return this._init({onSuccess:function(){t._isInitialized=!0,e.onSuccess()},onError:e.onError});setTimeout(e.onSuccess,1)}},{key:"_init",value:function(e){throw new Error("Must implement init function")}},{key:"loadRange",value:function(e,t){throw new Error("Must implement loadRange function")}},{key:"getSize",value:function(){if(!this._isInitialized)throw new Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(e){throw new Error("Must implement getByteAt function")}},{key:"getBytesAt",value:function(e,t){for(var r=new Array(t),n=0;n<t;n++)r[n]=this.getByteAt(e+n);return r}},{key:"isBitSetAt",value:function(e,t){return 0!=(this.getByteAt(e)&1<<t)}},{key:"getSByteAt",value:function(e){var t=this.getByteAt(e);return 127<t?t-256:t}},{key:"getShortAt",value:function(e,t){var r=t?(this.getByteAt(e)<<8)+this.getByteAt(e+1):(this.getByteAt(e+1)<<8)+this.getByteAt(e);return r<0&&(r+=65536),r}},{key:"getSShortAt",value:function(e,t){var r=this.getShortAt(e,t);return 32767<r?r-65536:r}},{key:"getLongAt",value:function(e,t){var r=this.getByteAt(e),n=this.getByteAt(e+1),a=this.getByteAt(e+2),i=this.getByteAt(e+3),o=t?(((r<<8)+n<<8)+a<<8)+i:(((i<<8)+a<<8)+n<<8)+r;return o<0&&(o+=4294967296),o}},{key:"getSLongAt",value:function(e,t){var r=this.getLongAt(e,t);return 2147483647<r?r-4294967296:r}},{key:"getInteger24At",value:function(e,t){var r=this.getByteAt(e),n=this.getByteAt(e+1),a=this.getByteAt(e+2),i=t?((r<<8)+n<<8)+a:((a<<8)+n<<8)+r;return i<0&&(i+=16777216),i}},{key:"getStringAt",value:function(e,t){for(var r=[],n=e,a=0;n<e+t;n++,a++)r[a]=String.fromCharCode(this.getByteAt(n));return r.join("")}},{key:"getStringWithCharsetAt",value:function(e,t,r){var n,a=this.getBytesAt(e,t);switch((r||"").toLowerCase()){case"utf-16":case"utf-16le":case"utf-16be":n=o.readUTF16String(a,"utf-16be"===r);break;case"utf-8":n=o.readUTF8String(a);break;default:n=o.readNullTerminatedString(a)}return n}},{key:"getCharAt",value:function(e){return String.fromCharCode(this.getByteAt(e))}},{key:"getSynchsafeInteger32At",value:function(e){var t=this.getByteAt(e),r=this.getByteAt(e+1),n=this.getByteAt(e+2);return 127&this.getByteAt(e+3)|(127&n)<<7|(127&r)<<14|(127&t)<<21}}])&&a(e.prototype,r),n&&a(e,n),t}();t.exports=n},{"./StringUtils":13}],12:[function(e,t,r){function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e("./MediaFileReader");var n=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"_mediaFileReader",void 0),i(this,"_tags",void 0),this._mediaFileReader=e,this._tags=null}var e,r,n;return e=t,n=[{key:"getTagIdentifierByteRange",value:function(){throw new Error("Must implement")}},{key:"canReadTagFormat",value:function(e){throw new Error("Must implement")}}],(r=[{key:"setTagsToRead",value:function(e){return this._tags=e,this}},{key:"read",value:function(t){var r=this;this._mediaFileReader.init({onSuccess:function(){r._loadData(r._mediaFileReader,{onSuccess:function(){try{var e=r._parseData(r._mediaFileReader,r._tags)}catch(e){if(t.onError)return void t.onError({type:"parseData",info:e.message})}t.onSuccess(e)},onError:t.onError})},onError:t.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(e,t){throw new Error("Must implement _loadData function")}},{key:"_parseData",value:function(e,t){throw new Error("Must implement _parseData function")}},{key:"_expandShortcutTags",value:function(e){if(!e)return null;for(var t,r=[],n=this.getShortcuts(),a=0;t=e[a];a++)r=r.concat(n[t]||[t]);return r}}])&&a(e.prototype,r),n&&a(e,n),t}();t.exports=n},{"./MediaFileReader":11}],13:[function(e,t,r){function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),i(this,"_value",void 0),i(this,"bytesReadCount",void 0),i(this,"length",void 0),this._value=e,this.bytesReadCount=t,this.length=e.length}var e,t,n;return e=r,(t=[{key:"toString",value:function(){return this._value}}])&&a(e.prototype,t),n&&a(e,n),r}(),n={readUTF16String:function(e,t,r){var n=0,a=1,i=0;r=Math.min(r||e.length,e.length),254==e[0]&&255==e[1]?(t=!0,n=2):255==e[0]&&254==e[1]&&(t=!1,n=2),t&&(a=0,i=1);for(var o=[],s=0;n<r;s++){var u=e[n+a],l=(u<<8)+e[n+i];if(n+=2,0==l)break;if(u<216||224<=u)o[s]=String.fromCharCode(l);else{var c=(e[n+a]<<8)+e[n+i];n+=2,o[s]=String.fromCharCode(l,c)}}return new f(o.join(""),n)},readUTF8String:function(e,t){var r=0;t=Math.min(t||e.length,e.length),239==e[0]&&187==e[1]&&191==e[2]&&(r=3);for(var n=[],a=0;r<t;a++){var i=e[r++];if(0==i)break;if(i<128)n[a]=String.fromCharCode(i);else if(194<=i&&i<224){var o=e[r++];n[a]=String.fromCharCode(((31&i)<<6)+(63&o))}else if(224<=i&&i<240){o=e[r++];var s=e[r++];n[a]=String.fromCharCode(((255&i)<<12)+((63&o)<<6)+(63&s))}else if(240<=i&&i<245){var u=((7&i)<<18)+((63&(o=e[r++]))<<12)+((63&(s=e[r++]))<<6)+(63&e[r++])-65536;n[a]=String.fromCharCode(55296+(u>>10),56320+(1023&u))}}return new f(n.join(""),r)},readNullTerminatedString:function(e,t){var r=[];t=t||e.length;for(var n=0;n<t;){var a=e[n++];if(0==a)break;r[n-1]=String.fromCharCode(a)}return new f(r.join(""),n)}};t.exports=n},{}],14:[function(a,e,t){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=a("./ChunkedFileData"),p=a("./MediaFileReader"),r=function(e){function i(e){var t,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=this,f(l(t=!(n=u(i).call(this))||"object"!==o(n)&&"function"!=typeof n?l(r):n),"_url",void 0),f(l(t),"_fileData",void 0),t._url=e,t._fileData=new d,t}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,p),t=i,n=[{key:"canReadFile",value:function(e){return"string"==typeof e}},{key:"setConfig",value:function(e){for(var t in e)e.hasOwnProperty(t)&&(this._config[t]=e[t]);for(var r=this._config.disallowedXhrHeaders,n=0;n<r.length;n++)r[n]=r[n].toLowerCase()}}],(r=[{key:"_init",value:function(e){i._config.avoidHeadRequests?this._fetchSizeWithGetRequest(e):this._fetchSizeWithHeadRequest(e)}},{key:"_fetchSizeWithHeadRequest",value:function(r){var n=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(e){var t=n._parseContentLength(e);t?(n._size=t,r.onSuccess()):n._fetchSizeWithGetRequest(r)},onError:r.onError})}},{key:"_fetchSizeWithGetRequest",value:function(n){var a=this,e=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",e,{onSuccess:function(e){var t=a._parseContentRange(e),r=a._getXhrResponseContent(e);if(t){if(null==t.instanceLength)return void(i._config.allowFetchingEntireFile?a._fetchEntireFile(n):n.onError());a._size=t.instanceLength}else a._size=r.length;a._fileData.addData(0,r),n.onSuccess()},onError:n.onError})}},{key:"_fetchEntireFile",value:function(r){var n=this;this._makeXHRRequest("GET",null,{onSuccess:function(e){var t=n._getXhrResponseContent(e);n._size=t.length,n._fileData.addData(0,t),r.onSuccess()},onError:r.onError})}},{key:"_getXhrResponseContent",value:function(e){return e.responseBody||e.responseText||""}},{key:"_parseContentLength",value:function(e){var t=this._getResponseHeader(e,"Content-Length");return null==t?t:parseInt(t,10)}},{key:"_parseContentRange",value:function(e){var t=this._getResponseHeader(e,"Content-Range");if(t){var r=t.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!r)throw new Error("FIXME: Unknown Content-Range syntax: "+t);return{firstBytePosition:parseInt(r[1],10),lastBytePosition:parseInt(r[2],10),instanceLength:r[3]?parseInt(r[3],10):null}}return null}},{key:"loadRange",value:function(r,n){var a=this;a._fileData.hasDataRange(r[0],Math.min(a._size,r[1]))?setTimeout(n.onSuccess,1):((r=this._roundRangeToChunkMultiple(r))[1]=Math.min(a._size,r[1]),this._makeXHRRequest("GET",r,{onSuccess:function(e){var t=a._getXhrResponseContent(e);a._fileData.addData(r[0],t),n.onSuccess()},onError:n.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(e){var t=e[1]-e[0]+1,r=1024*Math.ceil(t/1024);return[e[0],e[0]+r-1]}},{key:"_makeXHRRequest",value:function(e,t,r){var n=this._createXHRObject();n.open(e,this._url);var a=function(){200===n.status||206===n.status?r.onSuccess(n):r.onError&&r.onError({type:"xhr",info:"Unexpected HTTP status "+n.status+".",xhr:n}),n=null};void 0!==n.onload?(n.onload=a,n.onerror=function(){r.onError&&r.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:n})}):n.onreadystatechange=function(){4===n.readyState&&a()},i._config.timeoutInSec&&(n.timeout=1e3*i._config.timeoutInSec,n.ontimeout=function(){r.onError&&r.onError({type:"xhr",info:"Timeout after "+n.timeout/1e3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:n})}),n.overrideMimeType("text/plain; charset=x-user-defined"),t&&this._setRequestHeader(n,"Range","bytes="+t[0]+"-"+t[1]),this._setRequestHeader(n,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),n.send(null)}},{key:"_setRequestHeader",value:function(e,t,r){i._config.disallowedXhrHeaders.indexOf(t.toLowerCase())<0&&e.setRequestHeader(t,r)}},{key:"_hasResponseHeader",value:function(e,t){var r=e.getAllResponseHeaders();if(!r)return!1;for(var n=r.split("\r\n"),a=[],i=0;i<n.length;i++)a[i]=n[i].split(":")[0].toLowerCase();return 0<=a.indexOf(t.toLowerCase())}},{key:"_getResponseHeader",value:function(e,t){return this._hasResponseHeader(e,t)?e.getResponseHeader(t):null}},{key:"getByteAt",value:function(e){return 255&this._fileData.getByteAt(e).charCodeAt(0)}},{key:"_isWebWorker",value:function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}},{key:"_createXHRObject",value:function(){if("undefined"==typeof window&&!this._isWebWorker())return new(a("xhr2").XMLHttpRequest);if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;throw new Error("XMLHttpRequest is not supported")}}])&&s(t.prototype,r),n&&s(t,n),i}();f(r,"_config",void 0),r._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30},e.exports=r},{"./ChunkedFileData":5,"./MediaFileReader":11,xhr2:2}],15:[function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e("./MediaFileReader");var s=e("./XhrFileReader"),u=e("./BlobFileReader"),l=e("./ArrayFileReader"),c=(e("./MediaTagReader"),e("./ID3v1TagReader")),f=e("./ID3v2TagReader"),d=e("./MP4TagReader"),p=e("./FLACTagReader"),A=[],g=[];function h(e,t){var r=0<=e.offset&&e.offset+e.length>=t,n=e.offset<0&&(-e.offset>t||0<e.offset+e.length);return!(r||n)}var m=function(){function t(e){n(this,t),o(this,"_file",void 0),o(this,"_tagsToRead",void 0),o(this,"_fileReader",void 0),o(this,"_tagReader",void 0),this._file=e}return i(t,[{key:"setTagsToRead",value:function(e){return this._tagsToRead=e,this}},{key:"setFileReader",value:function(e){return this._fileReader=e,this}},{key:"setTagReader",value:function(e){return this._tagReader=e,this}},{key:"read",value:function(t){var r=new(this._getFileReader())(this._file),n=this;r.init({onSuccess:function(){n._getTagReader(r,{onSuccess:function(e){new e(r).setTagsToRead(n._tagsToRead).read(t)},onError:t.onError})},onError:t.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var e=0;e<A.length;e++)if(A[e].canReadFile(this._file))return A[e];throw new Error("No suitable file reader found for "+this._file)}},{key:"_getTagReader",value:function(e,t){if(this._tagReader){var r=this._tagReader;setTimeout(function(){t.onSuccess(r)},1)}else this._findTagReader(e,t)}},{key:"_findTagReader",value:function(n,a){for(var e=[],t=[],i=n.getSize(),r=0;r<g.length;r++){var o=g[r].getTagIdentifierByteRange();h(o,i)&&(0<=o.offset&&o.offset<i/2||o.offset<0&&o.offset<-i/2?e.push(g[r]):t.push(g[r]))}var s=!1,u={onSuccess:function(){if(s){for(var e=0;e<g.length;e++){var t=g[e].getTagIdentifierByteRange();if(h(t,i)){try{var r=n.getBytesAt(0<=t.offset?t.offset:t.offset+i,t.length)}catch(e){return void(a.onError&&a.onError({type:"fileReader",info:e.message}))}if(g[e].canReadTagFormat(r))return void a.onSuccess(g[e])}}a.onError&&a.onError({type:"tagFormat",info:"No suitable tag reader found"})}else s=!0},onError:a.onError};this._loadTagIdentifierRanges(n,e,u),this._loadTagIdentifierRanges(n,t,u)}},{key:"_loadTagIdentifierRanges",value:function(e,t,r){if(0!==t.length){for(var n=[Number.MAX_VALUE,0],a=e.getSize(),i=0;i<t.length;i++){var o=t[i].getTagIdentifierByteRange(),s=0<=o.offset?o.offset:o.offset+a,u=s+o.length-1;n[0]=Math.min(s,n[0]),n[1]=Math.max(u,n[1])}e.loadRange(n,r)}else setTimeout(r.onSuccess,1)}}]),t}(),y=function(){function r(){n(this,r)}return i(r,null,[{key:"addFileReader",value:function(e){return A.push(e),r}},{key:"addTagReader",value:function(e){return g.push(e),r}},{key:"removeTagReader",value:function(e){var t=g.indexOf(e);return 0<=t&&g.splice(t,1),r}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){s.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(e){s.setConfig({disallowedXhrHeaders:e})}},{key:"setXhrTimeoutInSec",value:function(e){s.setConfig({timeoutInSec:e})}},{key:"allowFetchingEntireFile",value:function(e){s.setConfig({allowFetchingEntireFile:e})}}]),r}();if(y.addFileReader(s).addFileReader(u).addFileReader(l).addTagReader(f).addTagReader(c).addTagReader(d).addTagReader(p),"undefined"!=typeof process&&!process.browser)if("undefined"!=typeof navigator&&"ReactNative"===navigator.product){var _=e("./ReactNativeFileReader");y.addFileReader(_)}else{var v=e("./NodeFileReader");y.addFileReader(v)}t.exports={read:function(e,t){new m(e).read(t)},Reader:m,Config:y}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./FLACTagReader":6,"./ID3v1TagReader":7,"./ID3v2TagReader":9,"./MP4TagReader":10,"./MediaFileReader":11,"./MediaTagReader":12,"./NodeFileReader":1,"./ReactNativeFileReader":1,"./XhrFileReader":14}]},{},[15])(15)})}function se(e){var t=e.data;"string"==typeof t&&(t=v(t));var r=t.tags,n=Xt(t.type,t.id)[0],a=t.options,i=(Je(a,"metadata"),{trackObject:n,tags:r,options:a,callback:t.callback&&Et._metaPullingOrderCallback});"error"===r?Et._onError(i):Et._onSuccess(i)}Y.essential&&Y.metadata&&Y.storage||(L.__ERROR__=!0,y("error"));var ue={__splayer__:!0,type:"history",id:1,name:D.history,ready:!0},le={__splayer__:!0,type:"task",id:1,name:D.task,ready:!0},ce={__splayer__:!0,type:"_",id:1,name:D._,ready:!0},fe={__splayer__:!0,type:"queue",id:1,name:D.queue,ready:!0},de={__splayer__:!0,type:"storage",id:1,name:D.storage,ready:!0},pe={track:{type:[],id:{},name:{},src:{},_children:{playlist:{},collection:{},album:{},artist:{},genre:{},storage:{},queue:{},history:{},task:{},_:{}}},stream:{type:[],id:{},name:{},src:{},_children:{playlist:{},collection:{},album:{},artist:{},genre:{},storage:{},queue:{},history:{},task:{},_:{}}},playlist:{type:[],id:{},name:{},_children:{track:{},stream:{},collection:{},storage:{},history:{},_:{}}},collection:{type:[],id:{},name:{},_children:{track:{},stream:{},playlist:{},artist:{},album:{},genre:{},storage:{},history:{},_:{}}},album:{type:[],id:{},name:{},_children:{track:{},stream:{},collection:{},artist:{},genre:{},storage:{},task:{},history:{},_:{}}},artist:{type:[],id:{},name:{},_children:{track:{},stream:{},collection:{},album:{},genre:{},storage:{},task:{},history:{},_:{}}},genre:{type:[],id:{},name:{},_children:{track:{},stream:{},collection:{},album:{},artist:{},storage:{},history:{},_:{}}},queue:{type:[fe],id:{1:fe},_children:{track:{},stream:{},storage:{},_:{}}},storage:{type:[de],id:{1:de},_children:{track:{},stream:{},playlist:{},collection:{},album:{},artist:{},genre:{},queue:{},history:{},_:{}}},history:{type:[ue],id:{1:ue},_children:{track:{},stream:{},playlist:{},collection:{},album:{},artist:{},genre:{},storage:{},_:{}}},task:{type:[le],id:{1:le},_children:{track:{},stream:{},artist:{},album:{},_:{}}},_:{type:[ce],id:{1:ce},_children:{track:{},stream:{},playlist:{},collection:{},album:{},artist:{},genre:{},storage:{},history:{},queue:{},task:{}}}};function Ae(e,t,r){if(!t){if("object"==typeof e)if(!gt(e)&&!pt(e)||e.type&&"application/json"!==e.type)for(var n in e)F.call(e,n)&&Ae(n,e[n]);else{var a=new _;a.onloadend=function(){Ae(a.result)},a.readAsText(e)}else"string"==typeof e&&(e.slice(0,14)==='{"'+B+'"'&&"}"===e[e.length-1]?Ae(v(e)):tt({url:e,onload:function(e){Ae(e)}}));return this}if(!e||!t||mt(e))return this;"s"===e[e.length-1]&&(e=e.slice(0,-1));var i=pe[e];if(!i)return this;t instanceof Array||(t=[t]);var o,s,u=r&&r.position,l=Je(r,"metadata"),c=Je(r,"extradata"),f=["tracks","streams","playlists","collections","artists","albums","genres"],d={__splayer__:1,__totalTasks__:1,__finishedTasks__:1,type:1},p=yt(e),A=0,g=t.length,h=Xt("task");for(p&&(d.src=1);A<g;A++){if((s=ft(e,t[A])).id){if(i.id[s.id])continue}else if(!p&&s.name&&i.name[s.name])continue;var m=ye.create(e,s);m&&!i.id[m.id]&&(s.__dontExtend__||it(s,m,d),m.images&&(m.images=ye.toImageObjectsArray(s.images)),m.title||"track"!==m.type||(m.__titleName__=!0,m.title=m.name),ye.addToDatabase(m,!1,u),!l&&!c||m.__metadata__&&m.__extradata__||"playlist"===e||"genre"===e||"collection"===e||("artist"===e||"album"===e)&&(!l||"embedded"===l||m.__metadata__||"__unknown__"===m.id)||m.images&&"auto"===l||("album"===e||"track"===e||"stream"===e)&&"internet"===l&&!m.artists?(ye.treatChildren(m,f,!0),m.ready=!0,y("add",[m,null,u]),Tt("ready",[m],m)):(ye.treatChildren(m,f),y("add",[m,null,u]),h.add(m),o=!0))}return o&&Et.start(r),this}function ge(e,t,r){for(var n=0,a=e.length;n<a;n++)if(e[n].id===t){e.splice(n,1),r&&r.splice(n,1);break}}var he,me,ye={getStorableImageObjectsArray:function(e){for(var t=[[],[]],r=0,n=e.length;r<n;r++)t["object"==typeof e[r].src?1:0].push(e[r]);return t},toStorable:function(e){var t,r,n={},a=B+e.type+e.id,i={__loaded__:1,__preloaded__:1,__tracks__:1,__streams__:1,__playlists__:1,__collections__:1,__albums__:1,__artists__:1,__genres__:1};for(var o in n.__totalStored__=1,e)if(F.call(e,o)){if(i[o]||mt(o)||"src"===o&&"object"==typeof e.src)continue;n[ht(o)?"__"+o+"__":o]=e[o]}"object"==typeof e.src&&(n.__src__=a+"src",n.__totalStored__++),n.images&&(r=(t=this.getStorableImageObjectsArray(n.images))[1],n.images=t[0]);var s=r&&r.length,u=0;if(s)for(n.__totalStored__+=s,n.__images__=[];u<s;u++)n.__images__.push({type:r[u].type,src:r[u].src,key:a+"images"+u});return n},addToDatabase:function(e,t,r){var n,a,i,o,s=e.type,u=e.name,l=e.id;if((i=t?(n=t.type,a=t.id,pe[n]._children[s][a]=pe[n]._children[s][a]||(o={type:[],id:{},name:{}},yt(s)&&(o.src={}),o)):pe[s])&&!i.id[l]){if(i.id[l]=e,void 0!==r?kt.call(i.type,r,e):i.type.push(e),t){var c=ct(n);e[c]=e[c]||[],void 0!==r?kt.call(e[c],r,this.toSimplified(t)):e[c].push(this.toSimplified(t))}if(u&&(i.name[u]=i.name[u]||[]).push(e),yt(s)){var f=_t(e.src);(i.src[f]=i.src[f]||[]).push(e)}}},removefromDatabase:function(e,t){var r=e.type,n=e.id,a=e.name,i=t&&t.type,o=t&&t.id,s=t?pe[i]._children[r][o]:pe[r];if(s&&s.id[n]){if(delete s.id[n],s.name&&s.name[a]&&(ge(s.name[a],n),s.name[a].length||delete s.name[a]),t){var u=ct(r);ge(s.type,n,t[u]),t[u].length||(delete t[u],delete pe[i]._children[r][o])}else ge(s.type,n);if(yt(r)){var l=_t(e.src);ge(s.src[l],n),s.src[l].length||delete s.src[l]}}},editSrcOrNameInDatabase:function(e,t,r,n){var a,i,o=r.type,s=r.name,u=n?pe[n.type]._children[o][n.id][e]:pe[o][e];"src"===e&&(a=_t(r.src),i=_t(t));for(var l=u[a||s],c=l&&l.length,f=0;f<c;f++)if(l[f].id===r.id){l.splice(f,1);break}l&&!l.length&&delete u[a||s];var d=i||t;(u[d]=u[d]||[]).push(r)},getHashID:function(e){for(var t=0,r=0,n=e.length;r<n;)t=(t<<5)-t+e.charCodeAt(r++)<<0;return t+2147483647+1},toImageObjectsArray:function(e){for(var t=[],r=0,n=e.length;r<n;r++)t.push({type:"custom",src:e[r].src||e[r]});return t},treatChildren:function(r,e,t){var n=r.type,a=yt(n);if(e){for(var i={},o=0,s=e.length;o<s;o++){var u=e[o];r[u]&&(i[u]=r[u].map(function(e){if(e=ft(u.slice(0,-1),e),"albums"===u&&!e.ready){var t="artist"===n?[ye.toSimplified(r)]:a?i.artists||r.artists:void 0;t&&(e.artists?e.artists.push(t[0]):e.artists=[t[0]],e.__dontExtend__=!1)}return e}),delete r[u])}delete r.__2BeTreated__,i.artists&&(Ae("artist",i.artists),Xt("artist",i.artists).add(r),delete i.artists),Ae(i),Xt(i).add(r)}t&&(("stream"===n&&opt.defaultDataObjectsForStreams||"track"===n||"album"===n||"artist"===n)&&(a&&!r.albums&&(Ae("album",{id:"__unknown__",name:"Unknown Album"}),Xt("album","__unknown__").add(r)),"artist"!==n&&(r.artists||(Ae("artist",{id:"__unknown__",name:"Unknown Artist"}),Xt("artist","__unknown__").add(r)),r.genres||(Ae("genre",{id:"__other__",name:"Other"}),Xt("genre","__other__").add(r)))),a&&r.artists&&r.albums&&Xt(r.artists[0]).add(r.albums))},toSimplified:function(e){return{__splayer__:!0,__simplified__:!0,type:e.type,id:e.id}},DataObject:function(e,t){var r,n,a,i,o,s={};if(yt(e)){if(t.format&&!x[t.format])return!1;if(At(r=t.__theSrc__||t.src)){if(!I[r.match(/data:(.*);/)[1]])return!1;r=rt(r)}if(n="string"==typeof r?(s.format=t.format||(o=r).split(/[#?]/)[0].substr(2+(~-o.lastIndexOf(".")>>>0)),s.name=t.name||et(r),s.input="url",e+r):(s.format=t.format||(a=r.type,"mpeg"===(i=a.replace(/audio\/|;|x-/g,""))?"mp3":"aacp"===i?"aac":i),s.input=pt(r)?"file":"blob",s.name=t.name||et(r.name||""),e+s.input+r.type+r.size+r.name),!s.format||!x[s.format])return!1;s.playable=Y.formats[s.format],s.src=r,s.stats={load:{count:0,parent:null,lastModifiedDate:null},ended:{count:0,lastModifiedDate:null}},delete t.__theSrc__}else s.name=t.name,n=e+s.name;return s.__splayer__=!0,s.__finishedTasks__=0,s.__totalTasks__=0,s.type=e,s.id=t.id||this.getHashID(n),s.date=(new w).toJSON(),s.name||(s.name=s.id+""),s},create:function(e,t){if(yt(e)&&t.src instanceof Array){for(var r,n,a=0,i=t.src.length;a<i;a++)if(t.__theSrc__=t.src[a],(r=this.DataObject(e,t))&&r.playable){if("ogg"!==r.format&&"oga"!==r.format)return r;n=r}return n||r}return this.DataObject(e,t)}};function _e(e){for(var t in M)F.call(M,t)&&e[t]&&(e["__"+t+"__"]=e[t],delete e[t])}function ve(e){if(e.images)for(var t=e.images.length;t--;)e.images[t].src||e.images.splice(t,1)}function be(e,t){var r=e.__src__;r&&(e.src=t[r]);var n=e.__images__;if(n){for(var a=0,i=n.length;a<i;a++)n[a].src=t[n[a].key],delete n[a].key;e.images||(e.images=[]),A.push.apply(e.images,n)}}function ke(e){for(var t in M)if(F.call(M,t)){var r=e["__"+t+"__"];if(r)for(var n=0,a=r.length;n<a;n++)Xt(r[n]).add(e,!1,!0)}}function Se(e,t){if((gt(e)||pt(e))&&(!e.type||"application/json"===e.type)){var r=new _;return r.onloadend=function(){Se(r.result,t)},r.readAsText(e),this}if("string"==typeof e){if(e.slice(0,14)!=='["'+B+'"'||"]"!==e[e.length-1])return tt({url:e,onload:function(e){Se(e,t)}}),this;e=v(e)}else e instanceof Array||(e=[e]);for(var n=0,a=e.length;n<a;n++){var i=e[n].type;e[n]!==B&&dt(e[n])&&("track"!==i||t||e[n].src&&("object"!=typeof e[n].src||!ot(e[n].src)))&&(_e(e[n]),ve(e[n]),t&&be(e[n],t),Xt.has(e[n])&&Xt(e[n]).remove(!0),mt(i)?pe[i].type[0]=pe[i].id[1]=e[n]:ye.addToDatabase(e[n]))}for(n=0;n<a;n++)e[n]!==B&&dt(e[n])&&(ke(e[n]),y("set",[e[n]]));return this}he=window,me=function(i){function e(e){return ie?e():void oe.push(e)}function a(e,t){if(!t||e===t){ie=ae;for(var r=oe.length,n=0;n<r;n++)oe[n]()}}function o(e,t){if(Q)return new Q(e,t);for(var r=new X,n=0,a=e.length;n<a;n++)r.append(e[n]);return r.getBlob(t&&t.type)}function s(e,t,r){var n=o(e,r);return n.name=t,n.lastModifiedDate=new Date,n}function u(e){var t,r=e.klass,n=e.buffer,a={type:e.type};return"File"===r?t=s([n],e.name,a):"Blob"===r?t=o([n],a):"ArrayBuffer"===r&&(t=n),t||new i[r](n)}function l(e,t){var r,n=A(r=e)?"File":g(r)?"Blob":p(r)?"ArrayBuffer":G.call(r).slice(8,-1),a={__fridge__:ae,klass:n};if("File"===n||"Blob"===n){var i=new K;i.onloadend=function(){a.buffer=i.result,a.type=e.type,a.name=e.name,t(a)},i.readAsArrayBuffer(e)}else("ArrayBuffer"===n||p(e.buffer))&&(a.buffer=e.buffer||e,t(a))}function c(e){for(var t="",r=new H(e.buffer),n=r.byteLength,a=5e4,i=0;i<n;i+=a)n<i+a&&(a=n-i),t+=J.apply(J,r.subarray(i,i+a));return U+e.klass+"_"+e.type+"*"+e.name+":"+t}function f(e){for(var t,r,n={},a=10;a<400;a++)if(n.klass||"_"!==e[a])if(n.type||"*"!==e[a]){if(":"===e[a]){n.name=e.substring(r+1,a);break}}else n.type=e.substring(t+1,r=a);else n.klass=e.substring(10,t=a);return n[U]=ae,n.buffer=function(e){for(var t=e.length,r=new H(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r.buffer}(e.slice(a+1)),n}function d(e,t){return void 0===e?e=null:"string"==typeof(n=e)&&n.slice(0,10)===U?e=u(f(e)):t?e=te(e):A(e)?e=s([e],e.name,{type:e.type}):"object"==typeof(r=e)&&r[U]&&p(r.buffer)&&(e=u(e)),e;var r,n}function p(e){return z&&e instanceof z}function A(e){return N&&e instanceof N}function g(e){return Q&&e instanceof Q}function h(e,t){var r=le[e];r&&r!==t&&O._removeItem[r](e)}function m(e,t,r,n){if(!C||!re)return r&&r(ne,ae);h(e,"l");try{C.setItem(U+e,n?t:ee(t))}catch(e){return r(ne,ae)}le[e]="l",r&&r(ae)}function n(e,t){return C&&re&&"l"===le[e]?void t(d(C.getItem(U+e),ae)):t(ne,ae)}function r(e,t){return C?"l"!==le[e]?t&&t(ae):(C.removeItem(U+e),delete le[e],void(t&&t(ae))):t&&t(ne,ae)}function y(e){if(!C)return e();for(var t in le)"l"===le[t]&&r(t);e()}function _(e){if(!re)return e(ne,ne,ae);for(var t in le)"l"===le[t]&&function(t,r){n(t,function(e){r(e,t)})}(t,e);e(ne,ne,ae)}function v(e,t,r){if(!pe)return r&&r(ne,ae);null===t&&(t=void 0),h(e,"i");var n=E[B]([x],D);n[S](x).put(t,e),n[M]=function(){le[e]="i",r&&r(ae)},r&&(n[q]=n[P]=function(){r(ne,ae)})}function b(t){if(!pe)return t();var e=E[B]([x],D);e[S](x).clear(),e[M]=function(){for(var e in le)"i"===le[e]&&delete le[e];t()},e[q]=e[P]=t}function t(t){var r=E[B]([x],j)[S](x).openCursor();r[F]=function(){var e=r.result;return e?(t(e.value,e.key),void e.continue()):t(ne,ne,ae)}}function k(n){return pe?void t(function(e,t,r){return r?n(ne,ne,ae):void n(d(e),t)}):n(ne,ne,ae)}function R(t,r,n,e){if(!W||!re)return n&&n(ne,ae);h(t,"w");try{r=e?r:ee(r)}catch(e){n&&n(ne,ae)}I[B](function(e){e[L]("INSERT OR REPLACE INTO "+x+" (key, value) VALUES (?, ?)",[t,r],function(){le[t]="w",n&&n(ae)},function(){n&&n(ne,ae)})},function(){n&&n(ne,ae)})}function w(t){return W?void I[B](function(e){e[L]("DELETE FROM "+x,[],t,t)}):t()}function T(i){return W&&re?void I[B](function(e){e[L]("SELECT * FROM "+x,[],function(e,t){for(var r=0,n=t.rows.length;r<n;r++){var a=t.rows.item(r);i(d(a.value,ae),a.key)}i(ne,ne,ae)})}):i(ne,ne,ae)}var O,C,E,I,x="fridge",B="transaction",S="objectStore",F="onsuccess",M="oncomplete",q="onerror",P="onabort",D="readwrite",j="readonly",L="executeSql",U="__"+x+"__",V=U+"blob",W=i.openDatabase,z=i.ArrayBuffer,N=i.File,Q=i.Blob,X=i.BlobBuilder||i.WebKitBlobBuilder||i.MSBlobBuilder||i.MozBlobBuilder,K=i.FileReader,H=i.Uint8Array,Z=i.parseInt,J=String.fromCharCode,G={}.toString,Y=i.navigator,$=Y&&Y.userAgent,ee=JSON.stringify,te=JSON.parse,re=ee&&te,ne=!1,ae=!0,ie=ne,oe=[],se={driver:"auto",webSQLSize:49e5},ue=x+" init error",le={},ce=0,fe=0;try{(C=i.localStorage).setItem(x,x),C.removeItem(x)}catch(e){}try{var de,pe=(de=i.indexedDB)||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB||i.OIndexedDB}catch(e){}(pe&&!pe.open||!i.IDBKeyRange||W&&$&&/(Safari|iPhone|iPad|iPod)/.test($)&&!/Chrome/.test($)&&!/BlackBerry/.test(Y.platform)&&"function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code"))&&(pe=ne);var Ae,ge=$&&$.match(/Firefox\/(\d+)/),he=de&&(!ge||17<=Z(ge[1],10));return W&&(fe+=2),pe&&(fe+=3),function(){if(C)for(var e in C)-1<e.indexOf(U)&&(le[e.slice(10)]="l")}(),function(){if(pe){var e=pe.open(x,1);e.onupgradeneeded=function(){(E=e.result).createObjectStore(x)},e[q]=e[P]=function(){throw Error(ue)},e[F]=function(){E=e.result,ce++,function(r,n){var e;try{(e=r[B]([x],D))[S](x).put(o([1]),V)}catch(e){return n(ne)}e[P]=function(e){e.preventDefault(),e.stopPropagation(),n(ne)},e[M]=function(){r[B]([x],D)[S](x).delete(V);var e=$&&$.match(/Chrome\/(\d+)/),t=$&&$.match(/Edge\//);n(t||!e||43<=Z(e[1],10))}}(E,function(e){Ae=e,a(++ce,fe)}),t(function(e,t,r){return r?(delete le[V],void a(++ce,fe)):void(le[t]="i")})}}}(),setTimeout(function(){W&&(I=W(x,"1.0",x,se.webSQLSize))[B](function(e){e[L]("CREATE TABLE IF NOT EXISTS "+x+" (key unique, value)",[],function(){ce++,I[B](function(e){e[L]("SELECT key FROM "+x,[],function(e,t){for(var r=0,n=t.rows.length;r<n;r++)le[t.rows.item(r).key]="w";a(++ce,fe)})})},function(){throw Error(ue)})})},4),O={_ready:e,_setItem:{l:m,i:v,w:R},_getItem:{l:n,i:function(e,t){if(!pe||"i"!==le[e])return t(ne,ae);var r=E[B]([x],j)[S](x).get(e);r[F]=function(){t(d(r.result))},r[q]=function(){t(ne,ae)}},w:function(t,r){return W&&re&&"w"===le[t]?void I[B](function(e){e[L]("SELECT value FROM "+x+" WHERE key = ? LIMIT 1",[t],function(e,t){r(d(t.rows.item(0).value,ae))},function(){r(ne,ae)})}):r(ne,ae)}},_removeItem:{l:r,i:function(e,t){if(!pe)return t&&t(ne,ae);if("i"!==le[e])return t&&t(ae);var r=E[B]([x],D)[S](x).delete(e);r[M]=function(){delete le[e],t&&t(ae)},t&&(r[q]=r[P]=function(){t(ne,ae)})},w:function(t,r){return W?"w"!==le[t]?r&&r(ae):void I[B](function(e){e[L]("DELETE FROM "+x+" WHERE key = ?",[t],function(){delete le[t],r&&r(ae)},function(){r&&r(ne,ae)})}):r&&r(ne,ae)}},_clear:{l:y,i:b,w:w},_each:{l:_,i:k,w:T},config:function(e){for(var t in e)se[t]=e[t]},setItem:function(n,a,i){var o=this;e(function(){var t=se.driver[0];void 0===a&&(a=null);var e,r="object"==typeof(e=a)&&null!==e&&(g(e)||A(e)||p(e.buffer||e));return r&&!K?i&&i(ne,ae):void("a"!==t?r?"i"===t&&Ae&&he?v(n,a,i):l(a,function(e){"i"===t&&he||(e=c(e)),o._setItem[t](n,e,i,ae)}):o._setItem[t](n,a,i):r?Ae&&he?v(n,a,function(e,t){return e?i&&i(e,t):void l(a,function(r){r=c(r),m(n,r,function(e,t){return e?i&&i(e,t):void R(n,r,i,ae)},ae)})}):l(a,function(r){he||(r=c(r)),v(n,r,function(e,t){return e?i&&i(e,t):(r=c(r),void m(n,r,function(e,t){return e?i&&i(e,t):void R(n,r,i,ae)},ae))})}):m(n,a,function(e,t){return e?i&&i(e,t):void v(n,a,function(e,t){return e?i&&i(e,t):void R(n,a,i)})}))})},getItem:function(t,r){var n=this;e(function(){var e=se.driver[0];return"a"!==e||(e=le[t])?void n._getItem[e](t,r):r(ne,ae)})},each:function(o,r){var s=this;e(function(){function e(e,t,r){return r?void(n&&i===++a&&o(ne,ne,ae)):void o(e,t)}var t=se.driver[0],n=r&&r.finished,a=0,i=1;"a"===t?(i=3,_(e),k(e),T(e)):s._each[t](e)})},removeItem:function(t,r){var n=this;e(function(){var e=se.driver[0];return"a"!==e||(e=le[t])?void n._removeItem[e](t,r):r(ae)})},clear:function(a){var i=this;e(function(){function e(){a&&n===++r&&a(ae)}var t=se.driver[0],r=0,n=1;"a"===t?(n=3,y(e),b(e),w(e)):i._clear[t](e)})},keys:function(n){e(function(){var e=[],t=se.driver[0];for(var r in le)"a"!==t&&le[r]!==t||e.push(r);n(e)})}},pe||W||a(),O},"object"==typeof exports&&"undefined"!=typeof module?module.exports=me(he):"function"==typeof define&&define.amd?define("fridge",function(){return me(he)}):he.fridge=me(he);var Re=fridge;function we(n){var a=[],i={};return Re.each(function(e,t,r){if(r)return Se(a,i),Xt("storage").add(a),Xt(a).sort("date","a",{modify:!0}),n&&n(a),void y("extract",[a]);-1<t.indexOf(B)&&(dt(e)?a.push(e):i[t]=e)},{finished:!0}),this}function Te(e,t,r,n){if(!e||!t)return this;var a,i,o="global";r?(i=r.id,o=r.type,d[o][i]||(d[o][i]={}),d[o][i][e]=a=d[o][i][e]||[]):d[o][e]=a=d[o][e]||[];var s={type:e,fn:t,dataObject:r,callback:n};return a.push(s),this}function Oe(e,t,r){if(!e)return this;var n,a,i="global";if(!(a=r?(i=r.type,n=r.id,d[i][n]&&d[i][n][e]):d[i][e]))return this;if(t)for(var o=0;o<a.length;o++)a[o].fn===t&&a.splice(o--,1);if(!t||!a.length){var s=d[i];r?(delete s[n][e],ot(s[n])&&delete s[n]):delete s[e]}return this}function Ce(e,t,r){return Te(e,t,r,function(e,t,r){Oe(e,t,r)}),this}function Ee(){var e=Ie._getLoadedIndex();return e&&(Ie._shuffledIndexes=ut(e[2],e[0]),Ie._shuffledType=Ie.loaded.type,Ie._shuffledParent=Ie.parent,Ie._shuffledSet=!0,Tt("reshuffle",[Ie.loaded],Ie.loaded)),this}var Ie={loaded:null,preloaded:null,parent:null,_getLoadedIndex:function(){if(!Ie.loaded)return null;var r,n=Xt("queue").children(Ie.loaded.type);return n.each(function(e,t){if("number"==typeof e.__loaded__)return!(r=[t,n,n.length])}),r},next:function(e,t){var r=Ie._getLoadedIndex();if(!r)return null;var n=r[1][r[0]+1];return!n||e&&n.type!==e?null:n},prev:function(e,t){var r=Ie._getLoadedIndex();if(!r)return null;var n=r[1][r[0]-1];return!n||e&&n.type!==e?null:n},_shuffledSet:null,_shuffledIndexes:[],_shuffledParent:null,_shuffledType:"",_shuffledObject:null,shuffle:function(){if(!Ie.loaded)return null;var e=Xt(Ie.parent||"queue").children(Ie.loaded.type);return Ie._shuffledSet&&lt(Ie.parent,Ie._shuffledParent)&&Ie._shuffledType===Ie.loaded.type||Ee(),Ie._shuffledObject||(Ie._shuffledIndexes.length?Ie._shuffledObject=e[Ie._shuffledIndexes.shift()]:null)},first:function(e,t){var r;if(t)for(var n=0,a=t.type.length;n<a;n++)if(t.type[n].type===e){r=t.type[n];break}return r},last:function(e,t){var r;if(t)for(var n=t.type.length;n--;)if(t.type[n].type===e){r=t.type[n];break}return r}};function xe(e){if(void 0===e||"function"==typeof e){var t=100*L._currentAudio.volume;return e?(e(t),this):t}"string"==typeof e&&-1<e.indexOf("%")&&(e=e.replace("%","")),100<e?e=100:e<0&&(e=0),f[0].volume=f[1].volume=e/100;var r=Ie.loaded;return Tt("volumechange",[e,r],r),this}var Be={offline:!navigator.onLine,online:navigator.onLine,playing:!1,paused:!1,stopped:!1},Fe={slower:.5,slow:.75,normal:1,fast:2,faster:4};function Me(e,t){var r,n=!t||void 0===t.safePause||t.safePause,a=L._currentAudio.playbackRate;return e?("function"==typeof e?e(a):("string"==typeof e&&(void 0!==Fe[e]?e=Fe[e]:-1<e.indexOf("x")&&(e=e.replace("x",""))),n&&Be.playing&&(L._currentAudio.pause(),r=!0),f[0].playbackRate=f[0].defaultPlaybackRate=f[1].playbackRate=f[1].defaultPlaybackRate=e,r&&L._currentAudio.play()),this):a}function qe(){return f[0].muted=f[0].defaultMuted=f[1].muted=f[1].defaultMuted=!0,Tt("mute",[Ie.loaded],Ie.loaded),this}function Pe(){return f[0].muted=f[0].defaultMuted=f[1].muted=f[1].defaultMuted=!1,Tt("unmute",[Ie.loaded],Ie.loaded),this}var De={date:(new w).toJSON(),loaded:null,parent:null,time:null,playing:null,paused:null,stopped:null,muted:null,volume:null,rate:null,queue:null,history:null};function je(t,e){return"string"==typeof t||"number"==typeof t?(function(e,t){if(!e||"number"==typeof e)return t(e||0);if(-1<e.indexOf("%"))return Ge(function(){t(+e.replace("%","")*L._currentAudio.duration/100)});var r=0,n=[1,60,3600,86400],a=e.split(":").reverse(),i=a.length,o=0;for(;o<i;)r+=a[o]*n[o],o++;t(r)}(t,function(e){L._currentAudio.currentTime=e}),this):(Ye(L._currentAudio.currentTime,function(e){r=e,t&&t(e)},e),t?this:r||0);var r}function Le(){return L._currentAudio.play(),this}function Ue(){return L._currentAudio.pause(),this}function Ve(){return Ue(),je(0),Be.stopped=!0,Tt("stop",[Ie.loaded],Ie.loaded),this}var We={loaded:function(e){this&&(-1<e.indexOf("parent")&&De.parent?Xt(De.parent).children(this).load():Xt(this).load())},time:function(){null!==this&&je(this)},playing:function(){this&&Le()},paused:function(){this&&Ue()},stopped:function(){this&&Ve()},muted:function(){this?qe():Pe()},volume:function(){null!==this&&xe(this)},rate:function(){null!==this&&Me(this)},queue:function(){this&&Se(this)},history:function(){this&&Se(this)}};function ze(e){for(var t=0,r=(e=(e||"loaded volume muted rate time").split(" ")).length;t<r;t++)"parent"!==e[t]&&We[e[t]].call(De[e[t]],e);return y("restore",[e]),this}function Ne(e,t){var r;return r=t?(r=pe[t.type]._children[e])&&r[t.id]:pe[e]}function Qe(e,t){var r=e.__map__;if(!r||!r[t]){r||(r=e.__map__={}),r[t]||(r[t]={});for(var n=e.type.length,a=0;a<n;a++){var i=e.type[a],o=i.type,s="src"===t?_t(i.src):i[t],u=r[t][o];u||(u=r[t][o]={}),u[s]?u[s].push(i):u[s]=[i]}}return r[t]}function Xe(e,t,r){if(!e)return!o&&this;var n,a,i,o,s,u,l;if(r&&(i=r.parent,a=r.direct,o=r.boolean,s=r.method,r.selection&&!r.selection.type&&(r.selection={type:r.selection}),u=r.selection),a){if(u){if("map1"===s)l=(l=(E=Qe(u,"id")[e])&&E[t])&&l[0];else for(var c=(n=u).type.length,f=0;f<c;f++)if(n.type[f].id==t&&n.type[f].type===e){l=n.type[f];break}}else(n=Ne(e,i))&&(l=n.id[t]);return o?!!l:l}if("string"==typeof e){if(-1<e.indexOf("*")&&(e=e.replace(/\*/g,"track stream playlist collection album artist genre")),-1<e.indexOf(" ")){for(var d=e.split(" "),p=0,A=d.length;p<A;p++)if(o){if(!Xe(d[p],t,r))return!1}else st(this,Xt(d[p],t,r));return!!o||this}var g;if(-1<e.indexOf(":")&&(e=(g=e.split(":"))[0],g=g[1]),"s"===e[e.length-1]&&(e=e.slice(0,-1)),n=u||Ne(e,i),g){var h=Ie[g],m="function"==typeof h?h(e,n):h;if("first"!==g&&"last"!==g)return st(this,[m],r);if(o){if(!m)return!1}else m&&(this[this.length++]=m);return!!o||this}if(!n)return!o&&this;if(!t){if(u){for(var y=n.type.length,_=0;_<y;_++)if(n.type[_].type===e){if(o)return!0;this[this.length++]=n.type[_]}return!o&&this}return o?0<n.type.length:st(this,n.type)}var v=(t=t instanceof Array?t:[t]).length,b=0;if(u&&"map2"===s){for(var k=function(e,t){var r=0,n=t.length,a={__keys__:[]};for(a[e]={};r<n;r++){var i,o;"object"==typeof t[r]?(o=void 0!==t[r].id?"id":void 0!==t[r].src?"src":void 0!==t[r].name?"name":Rt(t[r]),i=t[r][o],"src"===o&&(i=_t(At(i)?rt(i):i))):(o="id",i=t[r]),a[e][o]||(a.__keys__.push(o),a[e][o]={}),a[e][o][i]=!0}return a}(e,t),R=k.__keys__,w=R.length,T=(A=n.type.length,p=0,0);p<A;p++)for(var O=0;O<w;O++){var C=R[O];if(k[e][C]["src"===C?_t(n.type[p].src):n.type[p][C]]){o?T++:this[this.length++]=n.type[p];break}}return o?T===v:this}for(;b<v;b++){p=0,A=0,C=void 0;var E,I=void 0,x=void 0;if("object"!=typeof t[b])if(u){if("map1"===s)x=(x=(E=Qe(u,"id")[e])&&E[t[b]])&&x[0];else for(A=n.type.length;p<A;p++)if(n.type[p].id==t[b]&&n.type[p].type===e){x=n.type[p];break}}else x=n.id[t[b]];else if(C=void 0!==t[b].id?"id":void 0!==t[b].src?"src":void 0!==t[b].name?"name":Rt(t[b]),I=t[b][C],"src"===C&&(I=_t(At(I)?rt(I):I)),u){if("map1"===s)x=(x=(E=Qe(u,"id")[e])&&E[I])&&x[0];else for(A=n.type.length;p<A;p++)if(n.type[p].type===e&&("src"===C?_t(n.type[p].src)===I:wt(n.type[p][C],I))){if(o){x=!0;break}this[this.length++]=n.type[p]}}else if("id"===C||"src"===C||"name"===C)x=n[C][I];else for(A=n.type.length;p<A;p++)if(n.type[p].type===e&&wt(n.type[p][C],I)){if(o){x=!0;break}this[this.length++]=n.type[p]}if(o){if(!x)return!1}else x&&(C&&"id"!==C?st(this,x):this[this.length++]=x)}}else if("object"==typeof e){if(e instanceof Xt||e[B]||e instanceof Array)return st(this,e[B]?[e]:e,r);for(var C in e)if(F.call(e,C))if(o){if(!Xe(C,e[C],r))return!1}else st(this,Xt(C,e[C],r))}return!!o||this}function Ke(e,t){var r,n,a=0,i=e.length,o=t.length;if(0===i||0===o)return 0;if(e===t)return 1;var s=Math.floor(Math.max(i,o)/2)-1,u=new Array(i),l=new Array(o);for(r=0;r<i;r++){var c=r+s<=o?r+s:o-1;for(n=s<=r?r-s:0;n<=c;n++)if(!0!==u[r]&&!0!==l[n]&&e[r]===t[n]){++a,u[r]=l[n]=!0;break}}if(0===a)return 0;var f=0,d=0;for(r=0;r<i;r++)if(!0===u[r]){for(n=f;n<o;n++)if(!0===l[n]){f=n+1;break}e[r]!==t[n]&&++d}var p=(a/i+a/o+(a-d/2)/a)/3,A=0;if(.7<p){for(;e[A]===t[A]&&A<4;)++A;p+=.1*A*(1-p)}return p}function He(){opt.autoUrlize&&(e(),window.addEventListener("popstate",e,!1)),y("ready",[Xt])}function Ze(e,t){if(e===t){if(Y.multithreading&&opt.multithreading&&(L.worker=new l(s.createObjectURL($e([JSMediaTags+JSONPrune+'JSMediaTags();var _prune=JSONPrune();onmessage=function(e){var s=e.data;"string"==typeof s&&(s=JSON.parse(s)),jsmediatags.Config.allowFetchingEntireFile(s.allowFetchingEntireFile),new jsmediatags.Reader(s.src).setTagsToRead(s.tagsToRead).read({onSuccess:function(e){delete s.src,delete s.tagsToRead,s.tags=e.tags,postMessage(_prune(s))},onError:function(){delete s.src,delete s.tagsToRead,s.tags="error",postMessage(_prune(s))}})};'],{type:"text/javascript"}))),L.worker.onmessage=se,l.prototype.postMessage=l.prototype.postMessage||l.prototype.webkitPostMessage),JSMediaTags(),opt.autoRestore?ze():(xe(opt.volume),Me(opt.rate),opt.muted?qe():Pe()),opt.lastSession){var r=n.getItem(B+"session");r&&it(v(r),De)}if(opt.autoExtract)return we(He);He()}}function Je(e,t){return(e&&void 0!==e[t]?e:opt)[t]}function Ge(e){if(L._currentAudio.duration)return e();Ce("_durationchange",e)}function Ye(t,r,e){var n,a=Je(e,"timeFormat"),i=Je(e,"_isDuration");if(!t)return r((n=Je(e,"timeFormat"))&&"p"!==n[0]?"a"===n[0]?"0:00":n.replace(/[a-z]/g,"0"):0);if(t===1/0||!a)return r(t);if("p"===a[0])return i?r(100):void Ge(function(){var e=L._currentAudio.duration;r(e===1/0?e:100*t/e)});var o,s=~~(t/86400),u="h"===a[0]?~~(t/3600):~~(t/86400%1*24),l="m"===a[0]?~~(t/60):~~(t/3600%1*60),c="s"===a[0]?~~t:Math.round(t/60%1*60),f="";if(o={d:s,h:u,m:l,s:c,dd:s<10?"0"+s:s,hh:u<10?"0"+u:u,mm:l<10?"0"+l:l,ss:c<10?"0"+c:c},"auto"===a)f=o.m+":"+o.ss,0!=u&&(f=o.h+":"+f),0!=s&&(f=o.d+":"+f);else for(var d=a.split(":"),p=d.length,A=0;A<p;)f+=o[d[A]],A!==p-1&&(f+=":"),A++;r(f)}function $e(e,t){if(t=t||{},i)return new i(e,t);for(var r=new u,n=0,a=e.length;n<a;n++)r.append(e[n]);return r.getBlob(t.type)}function et(e){return e.substring(e.lastIndexOf("/")+1).split(".")[0]}function tt(e){var t,r,n=new a;if(n.open("GET",e.url,!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.contentType&&n.setRequestHeader("Content-Type",e.contentType),e.timeout&&(n.timeout=e.timeout),e.type){if("blob"===e.type&&!Y.extra.XHRTypeBlob)return void(e.onerror&&e.onerror(n));n.responseType=e.type}n.onreadystatechange=function(){e.customOnloadForMeta?200===n.status?(3===n.readyState||4===n.readyState)&&7e4<n.responseText.length&&(e.customOnloadForMeta(n.responseText.substring(5e3,7e4)),r=!0,n.abort()):!r&&4===n.readyState&&e.onerror&&(t=!0,e.onerror(n)):4===n.readyState&&(200===n.status?e.onload(n.response||n.responseText,n):e.onerror&&(t=!0,e.onerror(n)))},e.onerror&&(n.onerror=function(){t||e.onerror(n)}),n.send()}function rt(e){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=c(t[1]),a=n.length,i=new g(a);a--;)i[a]=n.charCodeAt(a);return $e([i],{type:r})}function nt(e){for(var t="",r=5e4,n=0,a=e.length;n<a;n+=r)a<n+r&&(r=a-n),t+=C.apply(C,e.slice(n,n+r));return E(t)}function at(e){var t=0,r=this,n=r.length;if(void 0===n){for(key in r)if(F.call(r,key)&&!1===e.call(r,r[key],key))break}else for(;t<n&&!1!==e.call(r,r[t],t);t++);return this}function it(e,t,r){for(var n in e)!F.call(e,n)||r&&r[n]||(t[n]=e[n])}function ot(e){for(var t in e)if(F.call(e,t))return!1;return!0}function st(e,t,r){var n,a,i,o,s=e&&+e.length||0,u=t.length,l=0;r&&(n=r.boolean,a=r.parent,i=r.selection,o=r.reselect);for(var c={parent:a,selection:i,boolean:n,method:u<6?"loop":"map",direct:!0};l<u;l++){var f;if(f=t[l]&&(n||i||o||t[l].__simplified__)?Xe(t[l].type,t[l].id,c):t[l],n){if(!f)return!1}else f&&(e[s++]=f)}return e&&(e.length=s,t.parent&&(e.parent=t.parent)),!!n||e}function ut(e,t,r){if(!r){r=[];for(var n=0;n<e;n++)r[n]=n}void 0!==t&&r.splice(r.indexOf(t),1);var a,i,o=r.length;if(o)for(;--o;)a=r[i=Math.floor(Math.random()*(o+1))],r[i]=r[o],r[o]=a;return r}function lt(e,t){return e&&t?e[B]&&t[B]&&e.id===t.id&&e.type===t.type:e===t}function ct(e){return mt(e)?e:e+"s"}function ft(e,t){if("string"!=typeof t&&!gt(t)&&!pt(t))return t;var r={__dontExtend__:!0};return r[yt(e)?"src":"name"]=t,r}function dt(e){return e&&"object"==typeof e&&e[B]}function pt(e){return"object"==typeof e&&t&&e instanceof t}function At(e){return"string"==typeof e&&-1<e.indexOf("data:audio/")}function gt(e){return"object"==typeof e&&i&&e instanceof i}function ht(e){return!!M[e]}function mt(e){return!!q[e]}function yt(e){return!!P[e]}function _t(e){return"object"!=typeof e?e:(pt(e)?"File":"Blob")+"_"+e.type+"_"+e.size+"_"+e.name}function vt(e,t){return(e=e<0?e+t:t<=e?t-1:e)<0&&(e=0),e}function bt(e,t){this.splice(vt(R(t,10),this.length),0,this.splice(R(e,10),1)[0])}function kt(e,t){this.splice(vt(R(e,10),this.length),0,t)}function St(e,t){var r="object"==typeof e,n=r?s.createObjectURL(e):e,a=document.createElement("a");a.style="display: none !important",a.href=n,a.download=t,document.body.appendChild(a),a.click(),m(function(){document.body.removeChild(a),r&&s.revokeObjectURL(n)},0)}function Rt(e){for(var t in e)if(F.call(e,t))return t}function wt(e,t,r){if(e&&e.constructor===Array){if(r&&r._adapt&&M[r._prop]){var n=typeof t;if("string"!==n&&"number"!==n)return!1;for(var a=0,i=e.length;a<i;a++){var o=Xe(e[a].type,e[a].id,{direct:!0})||e[a];if(wt(o.title||o.name,t,r))return!0}return!1}if(!t||t.constructor!==Array)return!1;for(var s=0,u=e.length;s<u;s++)if(wt(e[s],t[0],r))return!0;return!1}for(;"object"==typeof t&&null!==t;){if("object"!=typeof e||null===e)return!1;e.__splayer__&&e.__simplified__&&(e=Xe(e.type,e.id,{direct:!0})||e);var l=void 0!==t.id?"id":void 0!==t.name?"name":void 0!==t.src?"src":Rt(t);if(!l)return!Rt(e);e=e[l],t=t[l]}if(!r||!r._filter)return e===t;if(e=(e+"").toLowerCase(),t=(t+"").toLowerCase(),!r.algorithm)return-1<e.indexOf(t);var c=Ke(e,t),f=c>=(r.similarity||.65);return f&&(r._dataObject.__similarity__=c),f}function Tt(e,t,r){y(e,t),r&&y(e,t,r)}function Ot(e,t){if("number"==typeof e[t]){var r=f[e[t]],n=r.src;r.removeAttribute("data-type"),r.removeAttribute("data-id"),r.__unloading__=!0,r.src="",r.load(),r.__isSrcObjectURL__&&s.revokeObjectURL(n),delete e[t]}}function Ct(e,t,r){var n=f[t];n.__isSrcObjectURL__="object"==typeof e.src,n.setAttribute("data-type",e.type),n.setAttribute("data-id",e.id),delete n.__unloading__,n.preload=r,n.src=n.__isSrcObjectURL__?s.createObjectURL(e.src):e.src,n.load()}var Et={_onSuccess:function(e){var t=e.trackObject,r=e.tags,n=e.options,a=Je(n,"metadata"),i=Je(n,"embeddedImages"),o=Je(n,"embeddedImagesType"),s=e.callback;if(!t.genres&&r.genre&&((t.__2BeTreated__=t.__2BeTreated__||[]).push("genres"),t.genres=[r.genre]),!t.artists&&r.artist&&((t.__2BeTreated__=t.__2BeTreated__||[]).unshift("artists"),t.artists=[r.artist]),!t.albums&&r.album&&((t.__2BeTreated__=t.__2BeTreated__||[]).push("albums"),t.albums=[r.album]),!r.title||!t.__titleName__&&t.title||(t.title=r.title),!t.year&&r.year&&(t.year=new w(r.year).getFullYear()),!t.no&&r.track&&(t.no=r.track),!t.comment&&r.comment){var u=r.comment.text||r.comment;"string"==typeof u&&(t.comment=u)}var l=r.APIC||r.PIC||r.covr;if(i&&l&&("complete"===a||!t.images)){t.images=t.images||[],l instanceof Array||(l=[l]);for(var c=0,f=l.length;c<f;c++){var d=l[c].data;"-pruned-"===d&&(d=r.picture),t.images.push({type:"embedded",src:"blob"===o?$e([new g(d.data)],{type:d.format}):"data:"+d.format+";base64,"+nt(d.data)})}}Et._finishX(t,s,n)},_onError:function(e){var t=e.trackObject,r=e.options,n=e.callback;Et._finishX(t,n,r)},_finishX:function(e,t,r){if(t)return t(e,r);++e.__finishedTasks__===e.__totalTasks__&&Et.finish(e,r)},__internetImgSrcSizeStuff:{_names:["small","medium","large","extralarge"],itunes:["64x64","300x300","600x600","1000x1000"],deezer:["64x64","300x300","600x600","1000x1000"],lastfm:["64s","300x300","600x600","ar0"]},__internetImgSrcResizer:{_lastLinkStringEditor:function(e,t){return e.substring(0,e.lastIndexOf("/")+1)+t},itunes:function(e,t){return this._lastLinkStringEditor(e,t+"cc.jpg")},deezer:function(e,t){return this._lastLinkStringEditor(e,t+"-000000-80-0-0.jpg")},lastfm:function(e,t){var r=e.lastIndexOf("/"),n=e.substring(0,r),a=n.lastIndexOf("/");return n.substring(0,a+1)+t+e.substring(r).slice(0,-4)+".jpg"}},_internetImgSrcToImgObjectsArray:function(e,t){var r,n=[],a=Et.__internetImgSrcSizeStuff;for(r=0;r<4;r++)n.push({type:"internet",service:t,size:a._names[r],src:Et.__internetImgSrcResizer[t](e,a[t][r])});return n},_getInternetServiceLink:{_itunes:function(e,t,r){return r+"https://itunes.apple.com/search?term="+e.toLowerCase()+"&media=music&limit=1&entity="+t},_deezer:function(e,t,r){return r+"https://api.deezer.com/search/"+t+"?limit=1&q="+e},lastfm:function(e,t,r,n){var a="https://ws.audioscrobbler.com/2.0/?format=json&autocorrect=1&api_key="+Je(n,"lastfmKey")+"&method="+e+".getinfo&"+e+"="+t;return"artist"!==e&&(a+="&artist="+r),a},itunes:function(e,t,r,n){var a=Je(n,"corsProxy");return this._itunes("artist"===e?t:t+"%20"+r,"artist"===e?"musicArtist":"track"===e?"musicTrack":"album",a)},deezer:function(e,t,r,n){var a=Je(n,"corsProxy");return this._deezer("artist"===e?t:t+"%20"+r,e,a)}},__internetResponseMap:{itunes:{track:{results:[{albums:["collectionName"],images:["artworkUrl100"],year:"releaseDate",no:"trackNumber",genres:["primaryGenreName"]}]},album:{results:[{images:["artworkUrl100"],copyright:"copyright",year:"releaseDate",genres:["primaryGenreName"]}]},artist:{results:[{genres:["primaryGenreName"],__metaOgImage__:"artistLinkUrl"}]}},deezer:{track:{data:[{albums:[{album:"title"}],images:[{album:"cover_small"}]}]},album:{data:[{images:["cover_small"]}]},artist:{data:[{__correctName__:"name",images:["picture_small"]}]}},lastfm:{track:{track:{albums:[{album:"title"}],year:{wiki:"published"},images:[{album:{image:{0:"#text"}}}],no:{album:{"@attr":"position"}},genres:{toptags:{tag:{"*":"name"}}},__excludedGenres__:[{album:"title"},"name",{artist:"name"}]}},album:{album:{images:[{image:{0:"#text"}}],year:{wiki:"published"},wiki:{wiki:"content"},genres:{tags:{tag:{"*":"name"}}},__excludedGenres__:["name","artist"]}},artist:{artist:{__correctName__:"name",__metaOgImage__:"url",wiki:{bio:"content"},genres:{tags:{tag:{"*":"name"}}},__excludedGenres__:["name"]}}}},__internetResponseValueProcess:{images:function(e,t){if("deezer"!==t||!(-1<e[0].indexOf("artist//56x56")||-1<e[0].indexOf("cover//56x56")))return Et._internetImgSrcToImgObjectsArray(e[0],t)},year:function(e,t){return new w(e).getFullYear()},genres:function(e,t,a){return"lastfm"===t&&a?(a.push("albums I own","female vocalists","male vocalists"),e.filter(function(e){if(/\d/.test(e))return!1;for(var t,r=a.length,n=e.toLowerCase();r--;)if(a[r]&&n===a[r].toLowerCase()){t=!0;break}return!t})):e}},__IRItemMapPropValueXReader:function(e,t){if(t&&e){if(e instanceof Array){var r,n=[],a=e.length;for(r=0;r<a;r++)n.push(Et.__IRItemMapPropValueXReader(e[r],t));return n}for(;"string"!=typeof e;)for(var i in e)if(F.call(e,i)){if("*"===i){var o=[];if(t instanceof Array){var s;a=t.length;for(s=0;s<a;s++)o.push(t[s][e[i]])}return o}if(e=e[i],!(t=t[i]))return}return t[e]}},_internetResponseReaderAndMerger:function(e,t,r,n){var a=Je(n,"metadata"),i=r.type;"stream"===i&&(i="track");var o,s="__excludedGenres__",u=Et.__internetResponseMap[t][i];for(var l in u)F.call(u,l)&&(o=l);var c=u[o],f=e[o];if(f instanceof Array&&(c=c[0],f=f[0]),f){if(c[s]){var d=Et.__IRItemMapPropValueXReader(c[s],f);d&&(r[s]=d)}for(var l in c)if(F.call(c,l)){if(l===s||"images"!==l&&r[l])continue;e=Et.__IRItemMapPropValueXReader(c[l],f);var p=Et.__internetResponseValueProcess[l];if(e&&e[0]){if(p&&(e=p(e,t,r[s])),void 0===e)continue;if(r[l])"images"===l&&"complete"===a&&A.push.apply(r[l],e);else{if(e instanceof Array&&"images"!==l)(r.__2BeTreated__=r.__2BeTreated__||[])["artists"===l?"unshift":"push"](l);r[l]=e}}}delete r[s]}},__getMetaOgImageFromURL:function(e,n,t){tt({url:Je(t,"corsProxy")+e,contentType:"text/plain",customOnloadForMeta:function(e){var t=e.indexOf('<meta property="og:image"'),r=e.substring(t,t+300).match(/og:image.*content=\"(.*)\"/);return n(r?r[1]:null)},onerror:function(){return n(null)}})},_extraTaskGetMetaOgImage:function(e,n,a,i){var t=n.__metaOgImage__;t&&(n.__totalTasks__++,Et.__getMetaOgImageFromURL(t,function(e){var t=Je(i,"internetService");if(e&&("lastfm"!==t||-1===e.indexOf("2a96cbd8b46e442fc41c2b86b821562f"))&&("itunes"!==t||-1===e.indexOf("apple-music-d37562e0c0117f3604f8064933d1f462"))){var r=Et._internetImgSrcToImgObjectsArray(e,t);n.images?A.push.apply(n.images,r):n.images=r}delete n.__metaOgImage__,Et._finishX(n,a,i)},i))},isInternetServiceError:{deezer:function(e,t,r){return"onload"===r&&e.error&&4===e.error.code},lastfm:function(e,t,r){return"onload"===r?29===e.error||16===e.error:500===t.status},itunes:function(e,t,r){return"onerror"===r&&(403===t.status||503===t.status||404===t.status)}},currentRunning:0,maxProcessing:0,currentOrder:["album","artist","stream","track"],extra:function(t,e){var r=new o;r.preload="metadata";var n="object"==typeof t.src,a=m(function(){r.onerror()},1e4);function i(){this.ondurationchange=this.onerror=this.onabort=null,n&&s.revokeObjectURL(this.src),this.src="",this.load(),r=null}r.ondurationchange=function(){k(a),t.availability=!0,void 0===t.duration&&Ye(this.duration,function(e){t.duration=e},{_isDuration:!0}),Et._finishX(t,!1,e),i.call(this)},r.onerror=r.onabort=function(){k(a),t.availability=!1,Et._finishX(t,!1,e),i.call(this)},r.src=n?s.createObjectURL(t.src):t.src,r.load()},internet:function(n,a,i){Je(i,"metadata");var o=Je(i,"internetService"),e=(Je(i,"corsProxy"),Je(i,"enhanceAutocorrect")),t=n.type,r=n.name,s=n.title||n.name,u=Xt(n.artists&&n.artists[0]),l=u[0];if(!s||"artist"!==t&&!l)return Et._finishX(n,a,i);if(e&&"itunes"!==o&&"artist"!==t&&l&&!l.ready)return u.ready(function(){Et.internet(n,a,i)},{highPriority:!0});l=l&&(l.__correctName__||l.name),r&&(r=T(r)),s&&(s=T(s)),l&&(l=T(l)),"stream"===t&&(t="track");var c=Et._getInternetServiceLink[o](t,s,l,i)+"#"+Math.random(),f=!1,d={url:c,onload:function(e,t){var r=v(e);if(Et.isInternetServiceError[o](r,!1,"onload"))return f?Et._finishX(n,a,i):(f=!0,d.url+=f,Et.setTimeout(tt,4e3,d,i));Et._internetResponseReaderAndMerger(r,o,n,i),Et._toggle4EmbAlbumsAutocorrect(n,i),Et._extraTaskGetMetaOgImage(r,n,a,i),Et._finishX(n,a,i)},onerror:function(e){if(Et.isInternetServiceError[o](!1,e,"onerror")&&!f)return f=!0,"itunes"===o&&404===e.status&&d.url.replace(/%20/g,"-"),d.url+=f,Et.setTimeout(tt,1e4,d,i);Et._finishX(n,a,i)}};tt(d)},_getSrcForEmbedded:function(e,t,r){if(!Je(r,"_CPMode"))return t(e);tt({url:e,type:"blob",onload:function(e){t(e)},onerror:function(){t(e)}})},embedded:function(e,t,r){var n,a=Je(r,"multithreading"),i=Je(r,"allowFetchingEntireFile"),o=Je(r,"embeddedImages"),s=Je(r,"_CPMode"),u=e.type,l=e.format,c=["title","artist","album","genre","comment","track","year"];return"track"!==u||"ogg"===l||"oga"===l?Et._finishX(e,t,r):(o&&c.push("picture"),Y.multithreading&&a&&!s&&("object"!=typeof e.src&&/^(?:[a-z]+:)\/\//i.test(e.src)||Y.extra.workerFileReader&&"auto"!==a)?(n={type:u,id:e.id,src:e.src,tagsToRead:c,allowFetchingEntireFile:i,options:r,callback:!!t},void m(function(){"object"!=typeof n.src&&(n=h(n)),L.worker.postMessage(n)},0)):(n={trackObject:e,options:r,callback:t},jsmediatags.Config.allowFetchingEntireFile(i),void Et._getSrcForEmbedded(e.src,function(e){new jsmediatags.Reader(e).setTagsToRead(c).read({onSuccess:function(e){n.tags=e.tags,Et._onSuccess(n)},onError:function(){Et._onError(n)}})})))},_toggle4EmbAlbumsAutocorrect:function(e,t){var r=e.__pullingOrder__;Je(t,"enhanceAutocorrect")&&"track"===e.type&&r&&"embedded"===r[0]&&(e.albums&&!e.__embalbums__?(e.__embalbums__=e.albums,delete e.albums):(e.__embalbums__&&!e.albums&&(e.albums=e.__embalbums__),delete e.__embalbums__))},_metaPullingOrderCallback:function(e,t){var r=e.__pullingOrder__,n=Je(t,"metadata");Et._toggle4EmbAlbumsAutocorrect(e,t),"complete"!==n&&("auto"!==n||e.images&&e.albums)?Et._finishX(e,!1,t):("embedded"===r[0]&&ye.treatChildren(e,e.__2BeTreated__),e.__finishedTasks__++,e.__totalTasks__++,Et[r[1]](e,!1,t))},meta:function(e,t){var r=Je(t,"metadata"),n=(Je(t,"extradata"),Je(t,"enhanceAutocorrect"),"embedded"),a="internet",i="auto"===r||"complete"===r;if("track"===e.type&&i){var o=e.title&&e.artists?[a,n]:[n,a];e.__pullingOrder__=o,Et[o[0]](e,Et._metaPullingOrderCallback,t)}else i&&(r=a),Et[r](e,!1,t)},parse:function(e,t){var r,n=e.type,a=Je(t,"metadata"),i=Je(t,"extradata");!e.__extradata__&&i&&yt(n)&&(r=++Et.currentRunning,e.__totalTasks__++,e.__extradata__=!0,Et.extra(e,t)),!e.__metadata__&&a&&(r||(r=++Et.currentRunning),e.__totalTasks__++,e.__metadata__=!0,Et.meta(e,t)),Xt("task").children(e).remove()},run1:function(e){if(!Et.locked&&Et.currentRunning!==Et.maxProcessing){var t;if(pe.task._children.track[1]||pe.task._children.stream[1]||pe.task._children.artist[1]||pe.task._children.album[1]){for(;!t;){var r=pe.task._children[Et.currentOrder.pop()][1];t=r&&r.type[0],Et.currentOrder.length||(Et.currentOrder=["album","artist","stream","track"])}return Et.parse(t,e)}Et.stop(e)}},running:!1,locked:!1,_intervalId:0,_getInterval:{embedded:function(e){var t=Je(e,"embeddedImages");return Je(e,"_CPMode")?t?150:40:t?250:60},internet:function(e){return"itunes"===Je(e,"internetService")?3100:100}},getInterval:function(e){var t=Je(e,"metadata");return Et._getInterval[t]?Et._getInterval[t]():Math.max(Et._getInterval.embedded(),Et._getInterval.internet())},lock:function(){Et.locked=!0},unlock:function(){Et.locked=!1},setTimeout:function(e,t,r,n){Et.stop(),Et.lock(),m(function(){e(r),Et.unlock(),Et.start(n,!0)},t)},start:function(e,t){if(!Et.running&&!Et.locked){Je(e,"metadata"),Je(e,"internetService");var r=Je(e,"enhanceAutocorrect"),n=Je(e,"maxProcessing"),a=Je(e,"multithreading");"auto"===n?(Et.maxProcessing=r?12:6,Y.multithreading&&a&&(Et.maxProcessing*=1.5)):Et.maxProcessing=n,Et.running=!0,Et._intervalId=b(function(e){Et.running&&Et.run1(e)},Et.getInterval(e),e),t||Et.run1(e)}},stop:function(e){Et.running&&!Et.locked&&(Et.running=!1,r(Et._intervalId),Et._intervalId=0)},finish:function(e,t){Et.currentRunning--,e.ready=!0,ye.treatChildren(e,e.__2BeTreated__,!0),Tt("ready",[e],e)}},It={MDE:Et,DO:ye,getOption:Je,isSameDataObject:lt,isDataObject:dt,database:pe,colon:Ie,opt:opt,ons:d,createXHR:tt,fridge:Re,sharedData:L,extend:it,dataURItoBlob:rt,compareValues:wt,compareTo:Ke};var xt={folderToAddJSON:function(e,t,r){if(e){var n={__splayer__:!0,track:[]},a=0,i=e.length;for(t=t||"";a<i;a++)-1<e[a].type.indexOf("audio")&&n.track.push({src:O(t+e[a].webkitRelativePath)});var o=$e([h(n)],{type:"application/json"});return o.name="splayer.addJSON."+(new w).getTime()+".json",r||St(o,o.name),o}}};var Bt={ended:1,muted:1,seeking:1,seekable:1};function Ft(t,r){return Ge(function(){var e=L._currentAudio;Ye(e.duration-e.currentTime,t,r)}),this}function Mt(e){for(var t in e)if(F.call(e,t)){if("_children"===t){Mt(e[t]);continue}e[t]=e[t]instanceof Array?[]:{}}}function qt(e,t){var r=Ie.loaded,n=r&&r.duration;return!t&&n?e(n):Ge(function(){Ye(L._currentAudio.duration,e,t)}),this}function Pt(e,t){return this.length=e.length,this.TimeRanges=e,this._options=t,this}Pt.prototype={start:function(e){var t;return Ye(this.TimeRanges.start(e||0),function(e){t=e},this._options),t},end:function(e){var t;return Ye(this.TimeRanges.end(e||0),function(e){t=e},this._options),t}};var Dt={play:Ue,pause:Le,stop:Le,mute:Pe,unmute:qe};function jt(){var e=Ie.loaded,t=Ie.parent;e=Ie.loaded,t=Ie.parent;return De.date=(new w).toJSON(),De.loaded=e?ye.toSimplified(e):null,De.parent=t?ye.toSimplified(t):null,De.time=je(),De.playing=Be.playing,De.paused=Be.paused,De.stopped=Be.stopped,De.muted=L._currentAudio.muted,De.volume=xe(),De.rate=Me(),De.queue=Xt("queue")[0],De.history=Xt("history")[0],n&&n.setItem(B+"session",h(De)),y("sessionchange",[De]),this}function Lt(e,t,r){mt(e.type)||(t?(ye.removefromDatabase(e,t),ye.removefromDatabase(t,e),r||Tt("remove",[e,t],e)):(Xt(e).empty(!1,r),ye.removefromDatabase(e),r||Tt("remove",[e],e)))}function Ut(e,t,r){var n=t.type,a=t.id,i=r?pe[r.type]._children[n][r.id]:pe[n],o=0,s=i.type.length;for(e=vt(e,s);o<s;o++)if(i.type[o].id===a){bt.call(i.type,o,e),r&&bt.call(r[ct(n)],o,e),Tt("move",[e,o,t,r],t);break}}function Vt(e,t){for(;e instanceof Array;)t instanceof Array?(e=e[0],t=t[0]):e="";for(;"object"==typeof e;)if("object"!=typeof t)e="";else{dt(e)&&e.__simplified__&&(e=Xe(e.type,e.id,{direct:!0})||e);var r=Rt(t);e=e[r],t=t[r]}return[e?(e+"").toLowerCase():"",t]}function Wt(e,t,r,n){var a=e.type;if(r[a])return!0;r[a]=!0,(t?pe[t.type]._children[a][t.id]:pe[a]).type.sort(n),y("sort",[a,t])}function zt(e){var t=L.backgroundEvents,r=t.indexOf(e);t.push(-1<r?t.splice(r,1):e)}function Nt(t,e){if(t){var r=t.availability;e?(t.availability=!0,void 0===t.duration&&Ye(this.duration,function(e){y("durationchange",[t.duration=e,t],t)},{_isDuration:!0})):t.availability=!1,r!==t.availability&&Tt("availabilitychange",[t.availability,t],t)}}var Qt={window:{online:function(){Be.online=!0,Be.offline=!1,y("online")},offline:function(){Be.offline=!0,Be.online=!1,y("offline")},beforeunload:function(e){Ie.loaded&&jt(),y("close",[e])}},audio:{abort:function(){this.__unloading__||(this===L._currentAudio?(Tt("abort",[Ie.loaded],Ie.loaded),opt.extradata&&Nt.call(this,Ie.loaded,!1)):(zt("abort"),Tt("preloadabort",[Ie.preloaded],Ie.preloaded),opt.extradata&&Nt.call(this,Ie.preloaded,!1)))},error:function(){this.__unloading__||(this===L._currentAudio?(Tt("loaderror",[Ie.loaded],Ie.loaded),opt.extradata&&Nt.call(this,Ie.loaded,!1)):(zt("loaderror"),Tt("preloaderror",[Ie.preloaded],Ie.preloaded),opt.extradata&&Nt.call(this,Ie.preloaded,!1)))},stalled:function(){this===L._currentAudio?Tt("stalled",[Ie.loaded],Ie.loaded):(zt("stalled"),Tt("preloadstalled",[Ie.preloaded],Ie.preloaded))},suspend:function(){this===L._currentAudio?Tt("suspend",[Ie.loaded],Ie.loaded):(zt("suspend"),Tt("preloadsuspend",[Ie.preloaded],Ie.preloaded))},emptied:function(){this===L._currentAudio?Tt("emptied",[Ie.loaded],Ie.loaded):(zt("emptied"),Tt("preloademptied",[Ie.preloaded],Ie.preloaded))},waiting:function(){this===L._currentAudio&&Tt("waiting",[Ie.loaded],Ie.loaded)},loadstart:function(){this.__unloading__||(this===L._currentAudio?Tt("loadstart",[Ie.loaded],Ie.loaded):(zt("loadstart"),Tt("preloadstart",[Ie.preloaded],Ie.preloaded)))},durationchange:function(){var t;if(this===L._currentAudio)qt(function(e){Tt("durationchange",[e,Ie.loaded],Ie.loaded)});else{var r=Ie.preloaded;if((t=[r.duration,r])[0])zt("durationchange"),Tt("preloaddurationchange",t,r);else{var e=this.id?0:1;Ye(f[e].duration,function(e){t[0]=e,zt("durationchange"),Tt("preloaddurationchange",t,r)},{_isDuration:!0})}}},loadedmetadata:function(){this===L._currentAudio?Tt("mediainfo",[Ie.loaded],Ie.loaded):(zt("mediainfo"),Tt("preloadmediainfo",[Ie.preloaded],Ie.preloaded))},loadeddata:function(){this===L._currentAudio?(Tt("data",[Ie.loaded],Ie.loaded),opt.extradata&&Nt.call(this,Ie.loaded,!0)):(zt("data"),Tt("preloaddata",[Ie.preloaded],Ie.preloaded),opt.extradata&&Nt.call(this,Ie.preloaded,!0))},progress:function(){this===L._currentAudio?Tt("progress",[Ie.loaded],Ie.loaded):(zt("progress"),Tt("preloadprogress",[Ie.preloaded],Ie.preloaded))},canplay:function(){this===L._currentAudio?Tt("canplay",[Ie.loaded],Ie.loaded):(zt("canplay"),Tt("preloadcanplay",[Ie.preloaded],Ie.preloaded))},canplaythrough:function(){this===L._currentAudio?Tt("canplaythrough",[Ie.loaded],Ie.loaded):(zt("canplaythrough"),Tt("preloadcanplaythrough",[Ie.preloaded],Ie.preloaded))},ended:function(){if(this===L._currentAudio){var e=Ie.loaded;e&&(e.stats.ended.count++,e.stats.ended.date=(new w).toJSON()),Be.ended=!0,Tt("ended",[e],e)}},pause:function(){this===L._currentAudio&&(Be.paused=!0,Be.stopped=Be.playing=!1,Tt("pause",[Ie.loaded],Ie.loaded))},play:function(){this===L._currentAudio&&(Be.playing=!0,Be.stopped=Be.paused=!1,Tt("play",[Ie.loaded],Ie.loaded))},playing:function(){this===L._currentAudio&&Tt("playing",[Ie.loaded],Ie.loaded)},ratechange:function(){this===L._currentAudio&&Tt("ratechange",[je(),Ie.loaded],Ie.loaded)},timeupdate:function(){if(!this.__unloading__&&this===L._currentAudio){var t=Ie.loaded;je(function(e){Tt("timeupdate",[e,t],t)}),Ft(function(e){Tt("remainingupdate",[e,t],t)})}},seeked:function(){this===L._currentAudio&&Tt("seeked",[Ie.loaded],Ie.loaded)},seeking:function(){this===L._currentAudio&&Tt("seeking",[Ie.loaded],Ie.loaded)}}};function Xt(e,t,r){return new Xe(e,t,r)}for(var Kt in Xt._=It,Xt.scripts=xt,Xt.support=Y,Xt.session=De,Xt.version="2.5.1",Qt.window)F.call(Qt.window,Kt)&&window.addEventListener(Kt,Qt.window[Kt],!1);for(var Kt in Qt.audio)F.call(Qt.audio,Kt)&&(f[0].addEventListener(Kt,Qt.audio[Kt],!1),f[1].addEventListener(Kt,Qt.audio[Kt],!1));Xt.config=function(e){return"object"==typeof e&&it(e,opt),this},Xt.ready=function(e){return L.totalTasks!==L.finishedTasks?Ce("_ready",e):(e(),this)},Xt.on=Te,Xt.one=Ce,Xt.trigger=y,Xt.off=Oe,Xt.audio=function(e,t){var r=t&&t.engine,n=f[void 0!==r?r:L.activeAudioEngine];return e?(e(),this):n},Xt.is=function(e){return Bt[e]?L._currentAudio[e]:Be[e]},Xt.add=Ae,Xt.has=function(e,t){return Xe(e,t,{boolean:!0})},Xt.play=Le,Xt.reload=function(){return L._currentAudio.load(),Tt("reload",[Ie.loaded],Ie.loaded),this},Xt.unload=function(){var e=Ie.loaded;return e&&(Ot(e,L.activeAudioEngine),Ie.loaded=Ie.parent=null,Xt("queue").empty(),Tt("unload",[e],e)),this},Xt.pause=Ue,Xt.stop=Ve,Xt.mute=qe,Xt.unmute=Pe,Xt.volume=xe,Xt.time=je,Xt.remaining=Ft,Xt.replay=function(){var e=L._currentAudio;return e.currentTime=0,e.play(),this},Xt.clear=function(){return function(){for(var e in pe)F.call(pe,e)&&(mt(e)?(Mt(pe[e]._children),pe[e].type[0]={__splayer__:!0,type:e,id:1,ready:!0,name:D[e]}):Mt(pe[e]))}(),Mt(d),Re.clear(),y("clear"),this},Xt.error=function(e){return L.__ERROR__?e():Ce("_error",e),this},Xt.duration=qt,Xt.buffered=function(e,t){return Ge(function(){e(new Pt(L._currentAudio.buffered,t))}),this},Xt.played=function(e,t){return Ge(function(){e(new Pt(L._currentAudio.played,t))}),this},Xt.next=function(){var e=Ie.next&&Ie.next();return e&&(Xt("queue").children(e).load(),Tt("next",[Ie.loaded],Ie.loaded),Le()),this},Xt.prev=function(){var e=Ie.prev&&Ie.prev();return e&&(Xt(Ie.parent||"queue").children(e).load(),Tt("prev",[Ie.loaded],Ie.loaded),Le()),this},Xt.shuffle=function(){var e=Ie.shuffle&&Ie.shuffle();return e&&(Xt(Ie.parent||"queue").children(e).load(),Tt("shuffle",[Ie.loaded],Ie.loaded),Le()),this},Xt.reshuffle=Ee,Xt.toggle=function(e,t){var r={play:Be.playing,pause:Be.paused,stop:Be.stopped,mute:Be.muted,unmute:!Be.muted};return e&&Xt[e]&&(r[e]?t?Xt[t]():Dt[e]():Xt[e](),y("toggle",[e,t])),this},Xt.rate=Me,Xt.finished=function(e){var t=Ie.loaded;return Oe("_ended"),e&&Te("_ended",function(){Xt[e]()}),Tt("finished",[e,t],t),this},Xt.extract=we,Xt.urlize=e,Xt.set=Se,Xt.saveSession=jt,Xt.restore=ze;var Ht={splice:A.splice,length:0,splayer:Xt.version,init:Xe,on:function(t,r){return t&&r?this.each(function(e){Te(t,r,e)}):this},one:function(t,r){return t&&r?this.each(function(e){Ce(t,r,e)}):this},off:function(t,r){return t?this.each(function(e){Oe(t,r,e)}):this},trigger:function(t,r){return t?this.each(function(e){y(t,r,e)}):this},ready:function(t,e){return e&&e.highPriority&&Xt("task").children(this).move(0),this.each(function(e){if(e.ready)return t(e),!0;Ce("_ready",t,e)})},each:at,get:function(e,t){var r=this,n=r.length,a=0;return r.ready(function(){n===++a&&e(1<n?r:r[0])},t),r},edit:function(r,n){if(!r)return this;if("string"==typeof r){if("id"===r||"type"===r||ht(r)||mt(r))return this;this.each(function(t){t.type,t.name,"images"===r?t.images=ye.toImageObjectsArray(n):(("name"===r||"src"===r)&&(Xt(t).children("* storage history queue task _").each(function(e){ye.editSrcOrNameInDatabase(r,n,t,e)}),ye.editSrcOrNameInDatabase(r,n,t)),t[r]=n),Tt("edit",[r,t[r],t],t)})}else for(var e in r)F.call(r,e)&&this.edit(e,r[e]);return this},children:function(t,r){var n=Xt();return this.each(function(e){st(n,Xt(t,r,{parent:e,reselect:!0}))}),n.parent=this,n},add:function(e,t,s){return e?this.each(function(a){var i=a.type,o=a.id;Xt(e,t).each(function(e){var t=e.type,r=e.id,n=pe[i]._children[t];if(!n||n[o]&&n[o].id[r])return!0;ye.addToDatabase(e,a),ye.addToDatabase(a,e),s||Tt("add",[e,a],a)})}):this},remove:function(r){var e=this,t=e.parent;return t?t.each(function(t){e.each(function(e){Lt(e,t,r)})}):e.each(function(e){Lt(e,!1,r)}),e},empty:function(s,u){return this.each(function(r){var n={},a=[];Xt(r).children(s||"* history task storage queue _").each(function(e){var t=e.type;ye.removefromDatabase(r,e),n[t]||(delete r[ct(t)],n[t]=!0,a.push(t))});var e=r.type,t=r.id,i=pe[e]._children;for(var o in i)F.call(i,o)&&delete i[o][t];u||Tt("empty",[a,r],r)})},move:function(r){var e=this,t=e.parent;return t?t.each(function(t){e.each(function(e){Ut(r,e,t)})}):e.each(function(e){Ut(r,e)}),e},has:function(e,t){var r=0,n=this.length;if(!n)return!1;for(;r<n;r++)if(!Xe(e,t,{parent:this[r],boolean:!0}))return!1;return!0},slice:function(e,t){var r=Xt(),n=this.length;if(!n)return this;for((!e||e<0)&&(e=0),(!t||n<t)&&(t=n);e<t;e++)r[r.length++]=this[e];return r.selection=this,r},sort:function(s,u,e){var n=this,t=n.parent;function a(e,t){return r=t,a=u,i=Vt(e[n=s],a),o=Vt(r[n],a),i[1]!==o[1]?0:i[0]>o[0]?"a"===i[1][0]?1:-1:i[0]<o[0]?"a"===i[1][0]?-1:1:0;var r,n,a,i,o}if(e&&e.modify)if(t)t.each(function(t){var r={};n.each(function(e){Wt(e,t,r,a)})});else{var r={};n.each(function(e){Wt(e,null,r,a)})}var i=Xt(n.toArray().sort(a));return i.selection=this,i},and:function(e,t){var r=Xt(this);return st(r,Xt(e,t)),r.selection=this,r},eq:function(e){var t=Xt(this[e]);return t.selection=this,t},first:function(){return this.eq(0)},last:function(){return this.eq(this.length-1)},not:function(e,t){var n={};return Xt(e,t).each(function(e){var t=e.type,r=e.id;n[t]||(n[t]={}),n[t][r]=!0}),this.filter(function(e){var t=e.type,r=e.id;return!(n[t]&&n[t][r])})},unique:function(){var n={};return this.filter(function(e){var t=e.type,r=e.id;return n[t]||(n[t]={}),!n[t][r]&&(n[t][r]=!0)})},reverse:function(){for(var e=Xt(),t=this.length;t--;)e[e.length++]=this[t];return e.selection=this,e},shuffle:function(){var e=Xt(this);return ut(this.length,void 0,e),e.selection=this,e},contains:function(e,t,r){return Xe(e,t,{selection:this,boolean:!0,method:r&&r.method})},filter:function(r,e,t){var n;return"function"==typeof r?(n=Xt(),this.each(function(e,t){r.call(this,e,t)&&(n[n.length++]=e)})):n=Xt(r,e,{selection:this,method:t&&t.method}),n.selection=this,n},search:function(e,t,r){var n=r&&r.algorithm,a=function(e,t,r,n){var a=Xt(),i=r||t;if(!i)return a;(n=n||{})._filter=!0,n._adapt=!r;var o=0,s=e.length,u=n.max||0,l=!r,c={track:["title","playlists","collections","albums","artists","genres"],stream:["title","playlists","collections","albums","artists","genres"],playlist:["name","tracks","streams","collections"],collection:["name","tracks","streams","playlists","albums","artists","genres"],album:["name","tracks","streams","collections","artists","genres"],artist:["name","tracks","streams","collections","albums","genres"],genre:["name","tracks","streams","collections","albums","artists"],queue:["name","tracks","streams"],storage:["name","tracks","streams","playlists","collections","albums","artists","genres","queue","history","_"],history:["name","tracks","streams","playlists","collections","albums","artists","genres","storage","_"],task:["name","tracks","streams","artists","albums","_"],_:["name","tracks","streams","playlists","collections","albums","artists","genres","storage","history","queue","task"]};for(/\d/.test(i)&&(c.track.push("year"),c.stream.push("year"),c.album.push("year"));o<s;o++){var f=n._dataObject=e[o];if(l)for(var d=c[f.type],p=0,A=d.length;p<A;p++){var g=f[n._prop=d[p]];if(g&&wt(g,t,n)){a[a.length++]=f;break}}else wt(f[t],r,n)&&(a[a.length++]=f);if(u&&a.length==u)break}return a}(this,e,t,r);if(a.selection=this,!n)return a;var i="__similarity__";return a.sort(i,"d").each(function(e){delete e[i]})},load:function(e){var t=Je(e,"fetch");"mediainfo"===t&&(t="metadata");var r=this[0],n=this.parent&&this.parent[0],a=r&&r.type;if(!r||!yt(a))return this;Ie.loaded&&Ot(Ie.loaded,"__loaded__"),Ie.loaded=r,Ie.parent=n||null;var i,o,s,u,l,c=r.__preloaded__;return"number"==typeof c?(i=c,L.activeAudioEngine=i,L._currentAudio=f[i],y("enginechange",[L._currentAudio]),function(t){for(var e=0,r=L.backgroundEvents.length;e<r;e++){var n=L.backgroundEvents[e];if("durationchange"===n){var a=[t.duration,t];a[0]?Tt(n,a,t):Ye(L._currentAudio.duration,function(e){a[0]=e,Tt(n,a,t)},{_isDuration:!0})}else Tt(n,[t],t)}L.backgroundEvents=[]}(r)):(r.__loaded__=0,Ct(r,0,t)),s=n,(o=r).stats.load.count++,o.stats.load.lastModifiedDate=(new w).toJSON(),o.stats.load.parent=s||null,lt(r,Ie._shuffledObject)&&(Ie._shuffledObject=null),n&&"queue"===n.type||(u=n,l=r.type,Xt("queue").empty().add(u?Xt(u).children(l):l)),function(e,t){var r=Xt("history"),n=opt.historyLimit,a=r.children(e.type),i=a.length;if(n<=i){var o=a[i-1];r.children(o).remove()}if(r.has(e)?r.children(e).move(i):r.add(e),t){var s=r.children(t.type),u=s.length;if(n<u){var l=s[u-1];r.children(l).remove()}r.has(t)?r.children(t).move(i):r.add(t)}}(r,n),Tt("load",[r],r),this},preload:function(e){var t=Je(e,"fetch");"mediainfo"===t&&(t="metadata");var r=this[0];if(!r||!yt(r.type))return this;var n=L.activeAudioEngine?0:1;return Ie.preloaded&&Ot(Ie.preloaded,"__preloaded__"),Ct(r,(Ie.preloaded=r).__preloaded__=n,t),Tt("preload",[r],r),this},enqueue:function(){var t=Xt("queue"),e=Ie._getLoadedIndex(),r=e?e[0]+1:0;return this.each(function(e){t.add(e).children(e).move(r),Tt("enqueue",[e],e)})},dequeue:function(){var t=Xt("queue");return this.each(function(e){t.children(e).remove(),Tt("dequeue",[e],e)})},store:function(c,e){var f=Xt("storage"),d=e&&e.children;return this.each(function(e){var t=e.type;"storage"!==t&&"task"!==t&&"_"!==t&&Xt(e).get(function(t){var e=B+t.type+t.id,r=ye.toStorable(t),o=0,s=r.__totalStored__,n=function(r,n){if(++o===s){if(Tt("store",[t],t),!d)return c&&c(r,n);var e=Xt(t).children("*");if(!e[0])return c&&c(r,n);var a=0,i=e.length;e.store(!!c&&function(e,t){r=r?e:r,n=n||t,++a===i&&c(r,n)})}},a=r.__src__;a&&(Re.setItem(a,t.src,n),t.__src__=a);var i=r.__images__,u=i&&i.length,l=0;if(i){for(;l<u;l++)Re.setItem(i[l].key,i[l].src,n),delete i[l].src;t.__images__=i}Re.setItem(e,r,n),f.add(t)})})},release:function(l,e){var c=Xt("storage"),f=e&&e.children;return this.each(function(t){var o=0,s=t.__totalStored__||1,e=B+t.type+t.id,r=t.__src__,n=function(r,n){if(++o===s){if(Tt("release",[t],t),!f)return l&&l(r,n);var e=Xt(t).children("*");if(!e[0])return l&&l(r,n);var a=0,i=e.length;e.release(!!l&&function(e,t){r=r?e:r,n=n||t,++a===i&&l(r,n)})}},a=t.__images__,i=a&&a.length,u=0;if(a)for(;u<i;u++)Re.removeItem(a[u].key,n);Re.removeItem(e,n),r&&Re.removeItem(r,n),c.children(t).remove(),delete t.__images__,delete t.__src__,delete t.__totalStored__})},download:function(){return this.each(function(e){var t=e.type;"track"===t&&(St(e.src,(e.title||e.name||t)+"."+e.format),e.downloaded=!0,Tt("download",[e],e))})},share:function(f,d){var p=void 0===(d=d||{}).popup||d.popup,A=document.location,g=opt.shareParams;return"url"===g&&(g="search"),this.each(function(e){var t,r,n,a,i,o,s,u=function(e,t,r,n){t="hash"===t?"#":"?";var a=new RegExp("(["+t+"&])"+r+"=.*?(&|$)","i"),i=-1!==e.indexOf(t)?"&":t;return e.match(a)?e.replace(a,"$1"+r+"="+n+"$2"):e+i+r+"="+n}(A[g],g,"splayer","S("+e.type+","+e.id+").load()"),l=A.origin+A.pathname+("hash"===g?A.search+u:u+A.hash),c=e.title||e.name;if("track"!==e.type&&"album"!==e.type||!e.artists||(c+=" - "+Xt(e.artists)[0].name),"facebook"===d.site)d.display=d.display||"popup",d.name=d.name||c,d.caption=d.caption||"SPlayer",d.link=d.link||l;else{if("twitter"!==d.site)return f?f(l):l;d.text=d.text||c,d.url=d.url||l}u=function(e){var t,r;for(var n in"t"===e.site[0]?t="https://twitter.com/intent/tweet":(t="https://www.facebook.com/dialog/feed",e.redirect_uri||(e.redirect_uri=e.link)),delete e.site,delete e.popup,e)F.call(e,n)&&(r?t+="&":(t+="?",r=!0),t+=n+"="+e[n]);return O(t)}(d),p&&(t=u,r=window.screenX,n=window.screenY,a=window.outerWidth,i=window.outerHeight,o=r+Math.max(a-525,0)/2,s=["width=525","height=525","top="+(n+Math.max(i-525,0)/2),"left="+o,"status=no","resizable=yes","toolbar=no","menubar=no","scrollbars=yes"],window.open(t,"SPlayer",s.join(",")).focus()),f&&f(u)})},blobify:function(o,e){var t=e&&e.images,s=!e||void 0===e.src||e.src;return t||s?this.each(function(r){var n=0,a=s?1:0,i=function(e,t){++n===a&&(o&&o.apply(o,e),Tt("blobify",e,t))};t&&r.images&&(a+=r.images.length,at.call(r.images,function(t){"string"==typeof t.src?-1<t.src.indexOf("data:")?(t.originalSrc=t.src,t.src=rt(t.src),i([r,null],r)):tt({url:t.src,type:"blob",onload:function(e){t.originalSrc=t.src,t.src=e,i([r,null],r)},onerror:function(){i([r,!0],r)}}):i([r,null],r)})),"string"==typeof r.src?tt({url:r.src,type:"blob",onload:function(e){r.originalSrc=r.src,r.src=e,i([r,null],r)},onerror:function(){i([r,!0],r)}}):i([r,null],r)}):this},toArray:function(e){e=e||[];for(var t=0,r=this.length;t<r;t++)e[e.length]=this[t];return e},toBlob:function(e){var t=e&&e.download,r=$e([this.toJSON()],{type:"application/json"});return r.name="splayer.setJSON."+(new w).getTime()+".json",t&&St(r,r.name),r},toJSON:function(){var e=this.toArray();return e.unshift(B),h(e)}};return Xt.prototype=Xe.prototype=Ht,L.__ERROR__||Ze(L.totalTasks,L.finishedTasks),void 0!==window&&(window.S=Xt),Xt});