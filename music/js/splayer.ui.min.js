/*!
* SPlayer UI: Interface for SPlayer API 
* Version: 2.5.1 
* Build: 25100 
* Â© JaguarScript (https://jaguar-script.web.app) */
!function(w,f,m,b){"use strict";function u(i,e){var t=0,a=0;do{if(t+=i.offsetTop||0,a+=i.offsetLeft||0,(i=i.offsetParent)===e)break}while(i);return{top:t,left:a}}!function(p,v){function m(i){for(var e=i.length;e--;)i[e].parentNode.removeChild(i[e])}function f(i,e,t,a){for(var r=i.slice(e,t),n=0,o=r.length;n<o;n++){var s=a.createItem(r[n],n,e,t);(n+1)%a.columns==0&&s.setAttribute("data-last-column","true"),l.appendChild(s)}return l}function i(i){var e=this;return e.container="object"==typeof i.container?i.container:v.querySelector(i.container),e.scrollParent=i.scrollParent?"object"==typeof i.scrollParent?i.scrollParent:e.container.closest(i.scrollParent):p,e.data=i.data,e.itemHeight=i.itemHeight||50,e.itemWidth=i.itemWidth,e.createItem=i.createItem,e.buffer=i.buffer||0,e.columns=i.columns||1,e.smartBuffer=void 0===i.smartBuffer||i.smartBuffer,e.responsive=i.responsive,e.offsetBefore=i.offsetBefore||0,e.offsetAfter=i.offsetAfter||0,e.scrollOffset=i.scrollOffset||0,e.optionsWrapper=i.wrapper,e.optionsItemsWrapper=i.itemsWrapper,e.lastStartIndex=0,e.lastEndIndex=0,e.wrapper=e.itemsWrapper=e._lastStartIndex=e._lastEndIndex=null,e._scrollEvent=function(){e.update()},e._resizeEvent=function(){e.refresh()},e.scrollParent.addEventListener("scroll",e._scrollEvent,!1),e.responsive&&p.addEventListener("resize",e._resizeEvent,!1),e.refresh(),e}var b=Array.prototype.slice,l=v.createDocumentFragment();p.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(i){var e,t=(this.document||this.ownerDocument).querySelectorAll(i),a=this;do{for(e=t.length;0<=--e&&t.item(e)!==a;);}while(e<0&&(a=a.parentElement));return a}),i.prototype={update:function(){var i,e,t,a,r,n=this,o=(a=n.scrollParent,r={},a===p?(r.scrollTop=void 0!==a.pageYOffset?a.pageYOffset:v.documentElement.scrollTop||v.body.scrollTop||0,r.clientHeight=a.innerHeight):(r.scrollTop=a.scrollTop,r.clientHeight=a.clientHeight),r),s=Math.floor((o.scrollTop-n.offsetBefore-n.scrollOffset)/n.itemHeight)*n.columns,l=Math.ceil(o.clientHeight/n.itemHeight)*n.columns,d=Math.max(s-n.buffer,0),u=Math.min(d+l+2*n.buffer,n.data.length);if(u>n.lastEndIndex)n.itemsWrapper.appendChild(f(n.data,n.lastEndIndex,u,n)),n.lastEndIndex=u;else if(n.lastEndIndex>u){var c=n.itemsWrapper.childNodes;t=c.length,m(b.call(c,u-n.lastEndIndex)),n.lastEndIndex=u}return d>n.lastStartIndex?d-n.lastStartIndex>=n.columns&&(m(b.call(n.itemsWrapper.childNodes,0,d-n.lastStartIndex)),i=!0):n.lastStartIndex>d&&n.lastStartIndex-d>=n.columns&&(n.lastStartIndex-d>=t&&(n.lastStartIndex=d+t,e=!0),n.itemsWrapper.insertBefore(f(n.data,d,n.lastStartIndex,n),n.itemsWrapper.firstChild),i=!0),i&&(e||(n.lastStartIndex=d),n.wrapper.style.paddingTop=d*n.itemHeight/n.columns+n.offsetBefore+"px"),n},_setHeight:function(){for(var i=this,e=i.data.length,t=e*i.itemHeight;e%i.columns;)t+=i.itemHeight,e++;return i.container.style.height=t/i.columns+i.offsetBefore+i.offsetAfter+"px",i},refresh:function(i){var e=this;if(i)return e._setHeight().update();e.itemWidth&&(e.columns=Math.floor(e.container.clientWidth/e.itemWidth)),e.smartBuffer&&(e.buffer=e.columns),e._setHeight(),e.optionsWrapper?e.wrapper="object"==typeof e.optionsWrapper?e.optionsWrapper:e.container.querySelector(e.optionsWrapper):(e.optionsItemsWrapper||m(e.container.childNodes),e.wrapper=v.createElement("div"),e.wrapper.className="vscroll-wrapper",e.container.appendChild(e.wrapper)),e.optionsItemsWrapper?e.itemsWrapper="object"==typeof e.optionsItemsWrapper?e.optionsItemsWrapper:e.container.querySelector(e.optionsItemsWrapper):e.itemsWrapper=e.wrapper,e.wrapper.setAttribute("data-columns",e.columns),m(e.itemsWrapper.childNodes),e.offsetBefore&&(e.wrapper.style.paddingTop=e.offsetBefore+"px"),e.lastStartIndex=0,e.lastEndIndex=0,e.update()},destroy:function(){var i=this;if(i.destroyed)return!0;for(var e in i.optionsWrapper||i.optionsItemsWrapper?(i.wrapper.style.paddingTop=null,i.wrapper.removeAttribute("data-columns"),m(i.itemsWrapper.childNodes)):m(i.container.childNodes),i.scrollParent.removeEventListener("scroll",i._scrollEvent,!1),p.removeEventListener("resize",i._resizeEvent,!1),i.container.style.height=null,i)delete i[e];return i.destroyed=!0}},p.VScroll=i}(m,b),f.fn.SAppendX=function(e,t){return this.each(function(){var i=f(this);0==t?i.prepend(e):t?i.children().eq(t-1).after(e):i.append(e)})};var h=function(i){this.canvas=b.createElement("canvas"),this.context=this.canvas.getContext("2d"),b.body.appendChild(this.canvas),this.width=this.canvas.width=i.width,this.height=this.canvas.height=i.height,this.context.drawImage(i,0,0,this.width,this.height)};h.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},h.prototype.update=function(i){this.context.putImageData(i,0,0)},h.prototype.getPixelCount=function(){return this.width*this.height},h.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},h.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var c=function(){};if(c.prototype.getColor=function(i,e){return this.getPalette(i,5,e)[0]},c.prototype.getPalette=function(i,e,t){(void 0===e||e<2||256<e)&&(e=10),(void 0===t||t<1)&&(t=10);for(var a,r,n,o,s=new h(i),l=s.getImageData().data,d=s.getPixelCount(),u=[],c=0;c<d;c+=t)r=l[(a=4*c)+0],n=l[a+1],o=l[a+2],125<=l[a+3]&&(250<r&&250<n&&250<o||u.push([r,n,o]));var p=g.quantize(u,e),v=p?p.palette():null;return s.removeCanvas(),v},c.prototype.getImageData=function(i,t){xhr=new XMLHttpRequest,xhr.open("GET",i,!0),xhr.responseType="arraybuffer",xhr.onload=function(i){if(200==this.status){uInt8Array=new Uint8Array(this.response),e=uInt8Array.length,binaryString=new Array(e);for(var e=0;e<uInt8Array.length;e++)binaryString[e]=String.fromCharCode(uInt8Array[e]);data=binaryString.join(""),base64=m.btoa(data),t("data:image/png;base64,"+base64)}},xhr.send()},!B)var B={map:function(i,t){var a={};return t?i.map(function(i,e){return a.index=e,t.call(a,i)}):i.slice()},naturalOrder:function(i,e){return i<e?-1:e<i?1:0},sum:function(i,a){var r={};return i.reduce(a?function(i,e,t){return r.index=t,i+a.call(r,e)}:function(i,e){return i+e},0)},max:function(i,e){return Math.max.apply(null,e?B.map(i,e):i)}};var g=function(){var _=5,S=8-_;function j(i,e,t){return(i<<2*_)+(e<<_)+t}function I(i){var e=[],t=!1;function a(){e.sort(i),t=!0}return{push:function(i){e.push(i),t=!1},peek:function(i){return t||a(),void 0===i&&(i=e.length-1),e[i]},pop:function(){return t||a(),e.pop()},size:function(){return e.length},map:function(i){return e.map(i)},debug:function(){return t||a(),e}}}function A(i,e,t,a,r,n,o){var s=this;s.r1=i,s.r2=e,s.g1=t,s.g2=a,s.b1=r,s.b2=n,s.histo=o}function P(){this.vboxes=new I(function(i,e){return B.naturalOrder(i.vbox.count()*i.vbox.volume(),e.vbox.count()*e.vbox.volume())})}function V(i,d){if(d.count()){var e=d.r2-d.r1+1,t=d.g2-d.g1+1,a=d.b2-d.b1+1,r=B.max([e,t,a]);if(1==d.count())return[d.copy()];var u,n,o,s,c=0,p=[],v=[];if(r==e)for(u=d.r1;u<=d.r2;u++){for(s=0,n=d.g1;n<=d.g2;n++)for(o=d.b1;o<=d.b2;o++)s+=i[j(u,n,o)]||0;c+=s,p[u]=c}else if(r==t)for(u=d.g1;u<=d.g2;u++){for(s=0,n=d.r1;n<=d.r2;n++)for(o=d.b1;o<=d.b2;o++)s+=i[j(n,u,o)]||0;c+=s,p[u]=c}else for(u=d.b1;u<=d.b2;u++){for(s=0,n=d.r1;n<=d.r2;n++)for(o=d.g1;o<=d.g2;o++)s+=i[j(n,o,u)]||0;c+=s,p[u]=c}return p.forEach(function(i,e){v[e]=c-i}),l(r==e?"r":r==t?"g":"b")}function l(i){var e,t,a,r,n,o=i+"1",s=i+"2",l=0;for(u=d[o];u<=d[s];u++)if(p[u]>c/2){for(a=d.copy(),r=d.copy(),n=(e=u-d[o])<=(t=d[s]-u)?Math.min(d[s]-1,~~(u+t/2)):Math.max(d[o],~~(u-1-e/2));!p[n];)n++;for(l=v[n];!l&&p[n-1];)l=v[--n];return a[s]=n,r[o]=a[s]+1,[a,r]}}}return A.prototype={volume:function(i){var e=this;return e._volume&&!i||(e._volume=(e.r2-e.r1+1)*(e.g2-e.g1+1)*(e.b2-e.b1+1)),e._volume},count:function(i){var e=this,t=e.histo;if(!e._count_set||i){var a,r,n,o=0;for(a=e.r1;a<=e.r2;a++)for(r=e.g1;r<=e.g2;r++)for(n=e.b1;n<=e.b2;n++)o+=t[j(a,r,n)]||0;e._count=o,e._count_set=!0}return e._count},copy:function(){var i=this;return new A(i.r1,i.r2,i.g1,i.g2,i.b1,i.b2,i.histo)},avg:function(i){var e=this,t=e.histo;if(!e._avg||i){var a,r,n,o,s=0,l=1<<8-_,d=0,u=0,c=0;for(r=e.r1;r<=e.r2;r++)for(n=e.g1;n<=e.g2;n++)for(o=e.b1;o<=e.b2;o++)s+=a=t[j(r,n,o)]||0,d+=a*(r+.5)*l,u+=a*(n+.5)*l,c+=a*(o+.5)*l;e._avg=s?[~~(d/s),~~(u/s),~~(c/s)]:[~~(l*(e.r1+e.r2+1)/2),~~(l*(e.g1+e.g2+1)/2),~~(l*(e.b1+e.b2+1)/2)]}return e._avg},contains:function(i){var e=this,t=i[0]>>S;return gval=i[1]>>S,bval=i[2]>>S,t>=e.r1&&t<=e.r2&&gval>=e.g1&&gval<=e.g2&&bval>=e.b1&&bval<=e.b2}},P.prototype={push:function(i){this.vboxes.push({vbox:i,color:i.avg()})},palette:function(){return this.vboxes.map(function(i){return i.color})},size:function(){return this.vboxes.size()},map:function(i){for(var e=this.vboxes,t=0;t<e.size();t++)if(e.peek(t).vbox.contains(i))return e.peek(t).color;return this.nearest(i)},nearest:function(i){for(var e,t,a,r=this.vboxes,n=0;n<r.size();n++)((t=Math.sqrt(Math.pow(i[0]-r.peek(n).color[0],2)+Math.pow(i[1]-r.peek(n).color[1],2)+Math.pow(i[2]-r.peek(n).color[2],2)))<e||void 0===e)&&(e=t,a=r.peek(n).color);return a},forcebw:function(){var i=this.vboxes;i.sort(function(i,e){return B.naturalOrder(B.sum(i.color),B.sum(e.color))});var e=i[0].color;e[0]<5&&e[1]<5&&e[2]<5&&(i[0].color=[0,0,0]);var t=i.length-1,a=i[t].color;251<a[0]&&251<a[1]&&251<a[2]&&(i[t].color=[255,255,255])}},{quantize:function(i,e){if(!i.length||e<2||256<e)return!1;var t,a,r,n,o,s,l=(t=i,s=new Array(1<<3*_),t.forEach(function(i){r=i[0]>>S,n=i[1]>>S,o=i[2]>>S,a=j(r,n,o),s[a]=(s[a]||0)+1}),s);l.forEach(function(){});var d,u,c,p,v,m,f,b,h,g,y=(d=l,h=f=v=1e6,g=b=m=0,i.forEach(function(i){u=i[0]>>S,c=i[1]>>S,p=i[2]>>S,u<v?v=u:m<u&&(m=u),c<f?f=c:b<c&&(b=c),p<h?h=p:g<p&&(g=p)}),new A(v,m,f,b,h,g,d)),w=new I(function(i,e){return B.naturalOrder(i.count(),e.count())});function x(i,e){for(var t,a=1,r=0;r<1e3;)if((t=i.pop()).count()){var n=V(l,t),o=n[0],s=n[1];if(!o)return;if(i.push(o),s&&(i.push(s),a++),e<=a)return;if(1e3<r++)return}else i.push(t),r++}w.push(y),x(w,.75*e);for(var k=new I(function(i,e){return B.naturalOrder(i.count()*i.volume(),e.count()*e.volume())});w.size();)k.push(w.pop());x(k,e-k.size());for(var C=new P;k.size();)C.push(k.pop());return C}}}();function y(i){return 146<=(299*parseInt(i[0],10)+587*parseInt(i[1],10)+114*parseInt(i[2],10))/1e3?"dark":"light"}function x(i,e,t){var a=parseInt(i[0]),r=parseInt(i[1]),n=parseInt(i[2]);return[Math.round((parseInt(e[0])-a)*t)+a,Math.round((parseInt(e[1])-r)*t)+r,Math.round((parseInt(e[2])-n)*t)+n]}function k(i){var e=i.toString().match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return e?[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]:function(i){i=i.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(i,e,t,a){return e+e+t+t+a+a});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null}(i)}function C(i){return"light"===i?"dark":"light"}var i,_,S,j,I,A,P,V,R,M,T,L,t,a,r,n,o=m.URL||m.webkitURL||m.mozURL||m.msURL||m.oURL,O={container:"body",pages:["music","radio","nowplaying","|","liked","playlists","|","recentplays"],tabs:["songs","albums","artists"],homepage:"music",hometab:"songs",sort:!0,download:!0,share:!0,facebookAppId:!1,maxRelatedCount:4,maxMoreCount:6,defaultAlbumsView:"albums",settings:!0,showLayerBackground:!1,showMenuBackground:!0,blurLayerBackground:!1,blurMenuBackground:!1,dynamicBarColors:!0,coloredMenu:!1,coloredLayerActions:!0,menuBackground:!1,mainColor:"#90CAF9",theme:"auto",searchAlgorithm:!0,searchInRelationTo:!0,searchDelay:!1,liveSearch:!0,rememberPlaylists:!0,rememberRecentPlays:!0},W={music:{title:"Music",icon:"ui-icon-music"},radio:{title:"Radio",icon:"ui-icon-radio"},nowplaying:{title:"Now playing",icon:"ui-icon-playing"},liked:{title:"Liked",icon:"ui-icon-heart"},playlists:{title:"Playlists",icon:"ui-icon-playlist3"},recentplays:{title:"Recent plays",icon:"ui-icon-history"}},s={album:{icon:"ui-icon-cd"},artist:{icon:"ui-icon-artist"},playlist:{icon:"ui-icon-playlist3"},nowplaying:{icon:"ui-icon-musical"}},E=((i=b.createElement("style")).appendChild(b.createTextNode("")),b.head.appendChild(i),i.sheet),D="ui-table",H={},N={},q={},p={container:null,slider:null,menu:null};function z(i){var e='<div class="ui-layer-actions-btn" data-ui-id="play"><i class="ui-icon-play"></i><span>Play All</span></div>';return"playlist"===i&&(e+='<div class="ui-layer-actions-btn" data-ui-id="remove"><i class="ui-icon-delete"></i><span>Remove</span></div>'),'<div class="ui-layer" data-ui-layer-type="'+i+'">            <div class="ui-layer-header">                <div class="ui-layer-image ui-default"><i class="'+s[i].icon+'"></i></div>                <div class="ui-layer-bg"></div>                <div class="ui-layer-bg-brightness"></div>                <div class="ui-layer-info">                   <div class="ui-layer-name ui-text-overflow-ellipsis"></div>                   <div class="ui-layer-sec-name ui-text-overflow-ellipsis"></div>                   <div class="ui-layer-other ui-text-overflow-ellipsis"></div>                   <div class="ui-layer-actions">'+e+'</div>                </div>            </div>            <div class="ui-layer-content ui-clearfix">                <div class="ui-layer-content-left ui-content-row"></div>                <div class="ui-layer-content-right ui-content-row"></div>                <div class="ui-layer-content-bottom ui-content-row"></div>            </div>        </div>'}function l(i){return'<div class="ui-obj '+(w._.isSameDataObject(i,w(":parent")[0])||w(":loaded").has(i.type,i.id)?"active":"")+'" data-ui-type="'+i.type+'" data-ui-id="'+i.id+'">                      <div class="ui-obj-image ui-default"><i class="'+s[i.type].icon+'"></i></div>                      <div class="ui-obj-image-blur"></div>                      <div class="ui-obj-info">                          <div class="ui-obj-name ui-text-overflow-ellipsis"></div>                          <div class="ui-obj-sec-name ui-text-overflow-ellipsis"></div>                          <div class="ui-obj-actions">                             <div class="ui-obj-actions-btn" data-ui-id="play"><i class="ui-icon-play"></i></div>                          </div>                      </div>                      <div class="ui-obj-songs"></div>                      </div>'}function U(){for(var i="",e="",t="",a=0,r=O.tabs.length;a<r;a++)t="songs"===O.tabs[a]?F():"",i+='<div class="ui-content-music-tab-btn" data-ui-tab="'+O.tabs[a]+'">'+O.tabs[a][0].toUpperCase()+O.tabs[a].substr(1)+"</div>",e+='<div class="ui-content-music-tab-content" data-ui-tab="'+O.tabs[a]+'">'+t+"</div>";return'<div id="ui-content-music-tab-btns">'+i+"</div>"+e}function F(i){return"playlists"===i?'<div class="ui-page-more">              <div class="ui-page-filter"><div class="ui-filter-btn" data-ui-id="newplaylist"><i class="ui-icon-add"></i><span >New Playlist</span></div></div>              </div>':'<div class="ui-page-more">              <div class="ui-page-filter"><div class="ui-filter-btn" data-ui-id="shuffle"><i class="ui-icon-shuffle"></i><span >Shuffle all</span></div></div>              '+(O.sort?'<div class="ui-page-filter ui-select-home ui-dropdown-home">                 <div class="ui-filter-btn ui-select-btn ui-dropdown-btn" data-ui-id="sorting"><i class="ui-icon-sorting"></i><span class="ui-select-current" data-ui-id="__All_genres__">Date added</span></div>                 <div class="ui-select-dropdown ui-dropdown-menu" data-ui-for="sorting">                   <ul>                     <li class="ui-select-selected" data-ui-id="date">Date added</li>                     <li data-ui-id="title">Title</li>                     <li data-ui-id="year">Year</li>                     <li data-ui-id="artists">Artists</li>                     <li data-ui-id="albums">Albums</li>                     <li data-ui-id="genres">Genres</li>                   </ul>                 </div>              </div>              <div class="ui-page-filter ui-select-home ui-dropdown-home">                 <div class="ui-filter-btn ui-select-btn ui-dropdown-btn" data-ui-id="genres"><i class="ui-icon-musical"></i><span class="ui-select-current" data-ui-id="__All_genres__">All genres</span></div>                 <div class="ui-select-dropdown ui-dropdown-menu" data-ui-for="genres">                   <ul>                     <li class="ui-select-selected" data-ui-id="__All_genres__">All genres</li>                   </ul>                 </div>              </div>':"")+"              </div>"}function X(i,e){e=e||"ui-bar";var t="like"===i?"ui-icon-heart":"ui-icon-"+i,a="";return q&&("like"===i&&q.like&&q.like.hasClass("active")?t+="-filled":("shuffle"===i&&q.shuffle&&q.shuffle.hasClass("active")||"loop"===i&&q.loop&&q.loop.hasClass("active"))&&(a=" active")),'<div class="'+e+"-box "+a+'" data-ui-id="'+i+'"><div class="'+e+'-btn"><i class="'+t+'"></i></div></div>'}function v(i,e,t){var a=i.type,r=i.id,n=w(i).children("album")[0],o=i.images||n&&n.images,s=i.title||i.name,l=w(i.artists)[0];l=l?l.name:"...";var d,u=e?'data-ui-parent-type="'+e.type+'" data-ui-parent-id="'+e.id+'"':"";d=o?'class="ui-trdropdown-image" style="background-image: url('+ai(o,"small")+')"':'class="ui-trdropdown-image ui-default"';var c="";if("track"===a){if(t&&(c+='<li data-ui-id="play"><i class="ui-icon-play"></i> Play</li>                                    <li data-ui-id="queue"><i class="ui-icon-playing"></i> Queue</li>'),-1<O.pages.indexOf("liked")&&(c+=w(i).has("playlist","__liked__")?'<li data-ui-id="like" class="active"><i class="ui-icon-heart-filled"></i> Unlike</li>':'<li data-ui-id="like"><i class="ui-icon-heart"></i> Like</li>'),-1<O.pages.indexOf("playlists")){var p='<li data-ui-id="add-create"><i class="ui-icon-add"></i> Create a Playlist</li>';w("playlist").not("playlist","__liked__").each(function(i){p+='<li data-ui-type="playlist" data-ui-id="'+i.id+'"><i class="ui-icon-playlist3"></i> '+i.name+"</li>"}),c+='<li data-ui-id="add" class="ui-li-dropdown-home">                                        <i class="ui-icon-add"></i> Add to <i class="ui-icon-dropdown"></i>                                        <div class="ui-li-dropdown-menu">                                            <ul class="ui-li-dropdown-menu-ul">'+p+"</ul>                                        </div>                                    </li>"}if(-1<O.tabs.indexOf("albums")&&(c+='<li data-ui-id="album"><i class="ui-icon-cd"></i> Go to Album</li>'),-1<O.tabs.indexOf("artists")&&(c+='<li data-ui-id="artist"><i class="ui-icon-artist"></i> Go to Artist</li>'),O.download&&(c+='<li data-ui-id="download"><i class="ui-icon-download"></i> Download</li>'),O.share){var v="";O.facebookAppId&&(v+='<li data-ui-id="share-facebook"><i class="ui-icon-facebook"></i> Share to Facebook</li>'),c+='<li data-ui-id="share" class="ui-li-dropdown-home">                                        <i class="ui-icon-share"></i> Share <i class="ui-icon-dropdown"></i>                                        <div class="ui-li-dropdown-menu">                                            <ul class="ui-li-dropdown-menu-ul">'+(v+='<li data-ui-id="share-twitter"><i class="ui-icon-twitter"></i> Share to Twitter</li>')+"</ul>                                        </div>                                    </li>"}}var m=q.volumeIcon.attr("class");return'<div class="ui-trdropdown-dropdown" data-ui-type="'+a+'" data-ui-id="'+r+'"'+u+">                    "+('<div class="ui-trdropdown-actions ui-clearfix">'+X("loop","ui-trdropdown")+X("shuffle","ui-trdropdown")+'<div class="ui-trdropdown-box ui-dropdown-btn" data-ui-id="volume"><div class="ui-trdropdown-btn"><i class="'+m+'"></i></div></div>'+X("like","ui-trdropdown")+"</div>")+'                    <div class="ui-trdropdown-header">                       <div '+d+'><i class="ui-icon-cd"></i></div>                       <div class="ui-trdropdown-info"><div class="ui-trdropdown-info-name ui-text-overflow-ellipsis" title="'+s+'">'+s+'</div><div class="ui-trdropdown-info-sec-name ui-text-overflow-ellipsis" title="'+l+'">'+l+'</div></div>                    </div>                    <ul class="ui-trdropdown-dropdown-ul">'+c+"</ul>                </div>"}function G(i){if(p.container=S.width(),p.menu=V.innerWidth(),p.slider=p.container-936,p.content=p.container-(p.menu+1),function(i){var e=i||p.container;if(1100<e){j.removeClass("ui-view-md ui-view-sm ui-view-xs").addClass("ui-view-lg");var t=L.find('.ui-bar-text[data-ui-id="duration"], #ui-bar-slider, .ui-bar-text[data-ui-id="time"]').detach();q.next.before(t),p.slider=e-936}else e<1100&&800<=e?(!j.hasClass("ui-view-md")&&j.hasClass("ui-menu-active")&&ii.menu.btn(),R.css("left","108px"),j.removeClass("ui-view-sm ui-view-xs").addClass("ui-view-lg ui-view-md"),t=L.find('.ui-bar-text[data-ui-id="duration"], #ui-bar-slider, .ui-bar-text[data-ui-id="time"]').detach(),L.prepend(t),p.slider=e-140):600<=e?(!j.hasClass("ui-view-md")&&j.hasClass("ui-menu-active")&&ii.menu.btn(),R.css("left","48px"),j.removeClass("ui-view-xs").addClass("ui-view-lg ui-view-md ui-view-sm"),t=L.find('.ui-bar-text[data-ui-id="duration"], #ui-bar-slider, .ui-bar-text[data-ui-id="time"]').detach(),L.prepend(t),p.slider=e-140):e<600&&(!j.hasClass("ui-view-md")&&j.hasClass("ui-menu-active")&&ii.menu.btn(),R.css("left","48px"),j.addClass("ui-view-lg ui-view-md ui-view-sm ui-view-xs"),t=L.find('.ui-bar-text[data-ui-id="duration"], #ui-bar-slider, .ui-bar-text[data-ui-id="time"]').detach(),L.prepend(t),p.slider=e-140)}(),O.showMenuBackground||O.coloredMenu){var e=V.innerHeight()+80;e<460&&(e=460),H.bg.width(e).height(e)}if(j.hasClass("ui-view-md")){var t=j.hasClass("ui-view-sm")?48:108;R.width(p.container-t+1+"px")}else R.width(p.container-(Math.max(p.menu,108)+1)+"px");q.slider.width(p.slider+"px");var a=R.find(".ui-table:visible"),r=a.width();r&&(1e3<r&&a.removeClass("ui-td-album-hide ui-td-artist-hide ui-td-genre-hide ui-td-released-hide"),r<1e3&&a.addClass("ui-td-album-hide ui-td-artist-hide"),r<1200&&a.addClass("ui-td-genre-hide ui-td-released-hide"))}function Y(){j.find(".ui-dropdown-menu").removeClass("ui-show");var i=j.find(".ui-trdropdown-dropdown");ri(i),i.remove(),q.more.removeClass("active"),j.find(".ui-td-btn-more.active, .ui-dropdown-btn.active").removeClass("active")}function $(i){T[i].bg.removeAttr("style"),T[i].image.removeAttr("style").addClass("ui-default"),T[i].name.empty(),T[i].name.removeAttr("title"),T[i].secName.empty(),T[i].secName.removeAttr("title"),T[i].other.empty(),T[i].contentLeft.empty(),T[i].contentRight.empty(),T[i].contentBottom.empty(),j.removeClass("ui-layer-has-images ui-layer-has-related")}function d(i){var e,t,a,r,n,o,s={algorithm:O.searchAlgorithm};if(O.searchAlgorithm||(s.max=8),n=O.searchInRelationTo?(e=w("track").search(i,!1,s),t=w("stream").search(i,!1,s),O.searchAlgorithm||(s.max=5),a=w("album").search(i,!1,s),r=w("artist").search(i,!1,s),w("playlist").search(i,!1,s)):(e=w("track").search("title",i,s),t=w("stream").search("title",i,s),O.searchAlgorithm||(s.max=5),a=w("album").search("name",i,s),r=w("artist").search("name",i,s),w("playlist").search("name",i,s)),O.searchAlgorithm&&(e=e.slice(0,8),t=t.slice(0,8),a=a.slice(0,5),r=r.slice(0,5),n=n.slice(0,5)),0<e.length){o=!0,N.search.append('<div class="ui-content-row ui-clearfix" data-ui-type="track">                                               <div class="ui-layer-content-h2">Songs</div>                                               <table class="'+D+'"><tbody></tbody></table>                                           </div>');var l=N.search.find("tbody");e.each(function(i){ti.track(i,l)})}if(0<t.length){o=!0,N.search.append('<div class="ui-content-row ui-clearfix" data-ui-type="stream">                                               <div class="ui-layer-content-h2">Radio</div>                                               <table class="'+D+'"><tbody></tbody></table>                                           </div>');var d=N.search.find('.ui-content-row[data-ui-type="stream"] tbody');t.each(function(i){ti.stream(i,d)})}if(0<a.length){o=!0,N.search.append('<div class="ui-content-row ui-clearfix" data-ui-type="album">                                               <div class="ui-layer-content-h2">Albums</div>                                           </div>');var u=N.search.find('.ui-content-row[data-ui-type="album"]');a.each(function(i){ti.album(i,u)})}if(0<r.length){o=!0,N.search.append('<div class="ui-content-row ui-clearfix" data-ui-type="artist">                                               <div class="ui-layer-content-h2">Artists</div>                                           </div>');var c=N.search.find('.ui-content-row[data-ui-type="artist"]');r.each(function(i){ti.artist(i,c)})}if(0<n.length){o=!0,N.search.append('<div class="ui-content-row ui-clearfix" data-ui-type="playlist">                                               <div class="ui-layer-content-h2">Playlists</div>                                           </div>');var p=N.search.find('.ui-content-row[data-ui-type="playlist"]');n.each(function(i){ti.playlist(i,p)})}o?(N.search.closest(".ui-page").removeClass("ui-content-is-loading"),G()):N.search.closest(".ui-page").addClass("ui-content-is-empty").removeClass("ui-content-is-loading")}function J(){R.removeClass("ui-layer-opened"),M.find(".ui-layer.active").removeClass("active"),$("album"),$("artist"),$("playlist")}var Q,K,Z,ii,ei,ti={stream:function(i,e,t){var a=w._.isSameDataObject(i,w(":loaded")[0])?"active":"",r=((t=t||0)+1)%2?"":" ui-trobj-even ",n=void 0!==i.availability?' data-ui-availability="'+i.availability+'" ':"",o=i.title||i.name,s=f('<tr class="ui-trobj '+a+r+'" data-ui-type="stream" data-ui-id="'+i.id+'" '+n+'>                              <td class="ui-td-number"><i class="ui-icon-radio"></i></td>                              <td class="ui-td-title"><span class="ui-text-overflow-ellipsis" title="'+o+'">'+o+"</span></td>                           </tr>");e&&(e.SAppendX(s),(s.index()+1)%2&&s.addClass("ui-trobj-even"));return s[0]},track:function(r,i,e,t,a){e=e?'data-ui-parent-type="'+e.type+'" data-ui-parent-id="'+e.id+'"':"",a=a||0;var n=w._.isSameDataObject(r,w(":loaded")[0])?"active":"",o=void 0!==r.availability?' data-ui-availability="'+r.availability+'" ':"",s=(a+1)%2?"":" ui-trobj-even ",l=w(r.artists)[0];l=l&&l.__splayer__?l.name:"...";var d=w(r.genres)[0];d=d&&d.__splayer__?d.name:"...";var u=w(r.albums)[0];u=u&&u.__splayer__?u.name:"...";var c=w(r).has("playlist","__liked__")?"heart-filled":"heart",p=r.title||r.name,v=f('<tr class="ui-trobj '+n+s+'" data-ui-type="track" data-ui-id="'+r.id+'" '+o+e+'">                         <td class="ui-td-number">'+(a+1)+'</td><td class="ui-td-title"><span class="ui-text-overflow-ellipsis" title="'+p+'">'+p+'</span><div class="ui-td-btn ui-td-btn-more"><i class="ui-icon-more"></i></div><div class="ui-td-btn ui-td-btn-like"><i class="ui-icon-'+c+'"></i></div></td>                         <td class="ui-td-artist ui-text-overflow-ellipsis" title="'+l+'">'+l+'</td>                         <td class="ui-td-album ui-text-overflow-ellipsis" title="'+u+'">'+u+'</td>                         <td class="ui-td-released ui-text-overflow-ellipsis">'+(r.year||"")+'</td>                         <td class="ui-td-genre ui-text-overflow-ellipsis">'+d+'</td>                         <td class="ui-td-duration ui-text-overflow-ellipsis">'+(r.duration||"")+"</td>                       </tr>");if(i){i.SAppendX(v,t);var m=v.index();(m+1)%2||v.addClass("ui-trobj-even"),v.find(".ui-td-number").text(m+1),void 0!==t&&i.find(".ui-trobj").each(function(i){f(this).find(".ui-td-number").text(i+1)})}return r.ready||w(r).get(function(){var i=w(r.artists)[0];i=i?i.name:"...";var e=w(r.genres)[0];e=e?e.name:"...";var t=w(r.albums)[0];t=t?t.name:"...";var a=r.title||r.name;void 0!==r.availability&&v.attr("data-ui-availability",r.availability+""),v.find(".ui-td-title span").text(a).attr("title",a),v.find(".ui-td-artist").text(i).attr("title",i),v.find(".ui-td-album").text(t).attr("title",t),r.year&&v.find(".ui-td-released").text(r.year),v.find(".ui-td-genre").text(e),v.find(".ui-td-duration").text(r.duration)},{highPriority:!0}),v[0]},album:function(d,i,u,c){var p=f(l(d)),e=d.name;u&&p.addClass("ui-obj-with-songs"),p.find(".ui-obj-name").text(e).attr("title",e);var t=w(d.artists),a=[];t.slice(0,2).each(function(i){a.push(i.name)});var r=a.join(", ");2<t.length&&(r+=", ...");var n=r||"...";p.find(".ui-obj-sec-name").text(n).attr("title",n),i&&i.append(p);var v=w(d);return v.get(function(i){var e=ai(i.images,"medium");e&&p.find(".ui-obj-image, .ui-obj-image-blur").css("backgroundImage","url("+e+")").removeClass("ui-default");var t=w(d.artists),a=[];t.slice(0,2).each(function(i){a.push(i.name)});var r=a.join(", ");2<t.length&&(r+=", ...");var n=r||"...";if(p.find(".ui-obj-sec-name").text(n).attr("title",n),u){var o=c?v.children("track",{artists:[c]}):v.children("track"),s=p.find(".ui-obj-songs");if(!o[0])return s.text("No songs have been added to this album");var l=s.html('<table class="'+D+'"><tbody></tbody></table>').find("tbody");o.each(function(i){ti.track(i,l,d)}),G()}},{highPriority:!0}),p[0]},artist:function(i,e){var t=f(l(i)),a=i.name;return t.find(".ui-obj-name").text(a).attr("title",a),e&&e.append(t),w(i).get(function(i){var e=ai(i.images,"medium");e&&t.find(".ui-obj-image, .ui-obj-image-blur").css("backgroundImage","url("+e+")").removeClass("ui-default")},{highPriority:!0}),t[0]},playlist:function(i,e){var t=f(l(i)),a=i.name;return t.find(".ui-obj-name").text(a).attr("title",a),e&&e.append(t),w(i).get(function(i){var e=ai(i.images,"medium");e&&t.find(".ui-obj-image, .ui-obj-image-blur").css("backgroundImage","url("+e+")").removeClass("ui-default")}),t[0]}};function ai(i,e){if(!i)return null;var t,a=0,r=i.length;if(1===r&&(t=i[0].src),!t)for(a=0;a<r;a++)if(i[a].size===e){t=i[a].src;break}return t||(t=i["small"!==e?i.length-1:0].src),"object"==typeof t&&(t=o.createObjectURL(t)),t}function ri(i){var e=i.css("backgroundImage");e&&-1<e.indexOf("blob:")&&o.revokeObjectURL(e.replace(/^url\(["']?/,"").replace(/["']?\)$/,""))}function ni(i){q.sliderProg.width(i*(100-1800/p.slider)/100+"%")}function oi(i){i.css({top:"50%",left:"50%",right:"auto",bottom:"auto","margin-left":i.outerWidth()/-2+"px","margin-top":i.outerHeight()/-2+"px"})}function si(i){if(j.hasClass("ui-view-xs"))return oi(i);var e=L.offset(),t=u(i[0],j[0]),a=+i.css("left").replace("px",""),r=+i.css("top").replace("px",""),n=i.closest(".ui-page, #ui-layers"),o=e.top+n.scrollTop()-t.top,s=t.left+i.outerWidth(),l=n[0].clientWidth+p.menu-s-4,d=o-i.outerHeight()-4;l<0&&i.css("left",a+l+"px"),d<0&&i.css("top",r+d+"px")}function li(i){var e=w(i),t=e.children("artist"),a=e.children("album"),r=ai(i.images||a[0]&&a[0].images,"medium"),n=ai(t[0]&&t[0].images,"extralarge");ri(T.nowplaying.image),ri(T.nowplaying.bg),r?T.nowplaying.image.css("backgroundImage","url("+r+")").removeClass("ui-default"):T.nowplaying.image.css("backgroundImage","none").addClass("ui-default"),O.showLayerBackground&&(n?(T.nowplaying.bg.css("backgroundImage","url("+n+")"),j.addClass("ui-layer-has-images")):(T.nowplaying.bg.css("backgroundImage","none"),j.removeClass("ui-layer-has-images"))),O.showMenuBackground&&(n?(H.bg.css("backgroundImage","url("+n+")"),j.addClass("ui-layer-has-images")):(H.bg.css("backgroundImage","none"),j.removeClass("ui-layer-has-images")));var o=i.title||i.name;if(T.nowplaying.name.text(o).attr("title",o),"track"===e[0].type){var s=(t[0]&&t[0].name||"...")+" - "+(a[0]&&a[0].name||"...");T.nowplaying.secName.text(s).attr("title",s),T.nowplaying.image.find("i").attr("class","ui-icon-musical")}else T.nowplaying.image.find("i").attr("class","ui-icon-radio")}function di(i){var e;return"track"===i?e=N.musicTabs.songs:"album"===i||"artist"===i?e=N.musicTabs[i+"s"]:"playlist"===i?e=N.playlists:"stream"===i&&(e=N.radio),e}function ui(i,e){0<i?e.removeClass("ui-content-is-empty"):e.addClass("ui-content-is-empty")}Q={currentPage:null,history:[],onhistorychange:function(){Q.history.length?H.back.removeClass("ui-hide"):H.back.addClass("ui-hide")},push:function(i){Q.history.push(i),j.attr({"data-ui-layer-type":i.type,"data-ui-layer-id":i.id,"data-ui-layer-view":O.defaultAlbumsView}),Q.onhistorychange()},goBack:function(){J();var i=Q.history.length,e=i-2,t=Q.history[e];if(t){var a=t.type,r=t.id;K[a](r,!0),j.attr({"data-ui-layer-type":a,"data-ui-layer-id":r,"data-ui-layer-view":O.defaultAlbumsView}),Q.history.splice(i-1,1),Q.onhistorychange()}else Q.clear();K.VS&&!K.VS.destroyed&&K.VS.container.offsetParent&&K.VS.refresh()},clear:function(){J(),Q.history=[],H.bg.css("backgroundImage","none"),j.removeAttr("data-ui-layer-type data-ui-layer-id"),j.removeClass("ui-layer-has-images ui-layer-has-related"),j.attr("data-ui-layer-view",O.defaultAlbumsView),Q.onhistorychange()}},K={VS:null,_active:function(i){"search"!==i&&A.val(""),f(".ui-menu, .ui-page").removeClass("active").filter("[data-ui-page="+i+"]").addClass("active"),f(".ui-content-music-tab-btn.active, .ui-content-music-tab-content.active").removeClass("active"),Q.clear(),G(),"music"!==i&&"nowplaying"!==i&&N[i].empty(),j.attr("data-ui-page",i),Q.currentPage=i},_activeLayer:function(i,e,t){R.addClass("ui-layer-opened"),f(".ui-layer").removeClass("active").filter('[data-ui-layer-type="'+i+'"]').addClass("active"),t||Q.push({type:i,id:e}),w(i,e)[0].images?j.addClass("ui-layer-has-images"):j.removeClass("ui-layer-has-images"),j.attr({"data-ui-layer-type":i,"data-ui-layer-id":e,"data-ui-layer-view":O.defaultAlbumsView}),M.scrollTop(0)},_activeTab:function(i){N.musicTabs.btn.add(N.musicTabs.content).removeClass("active").filter('[data-ui-tab="'+i+'"]').addClass("active"),G(),j.attr("data-ui-tab",i)},music:function(){K[j.attr("data-ui-tab")||O.hometab]()},albums:function(){K._active("music"),K._activeTab("albums");var i=N.musicTabs.albums,e=w._.database.album.type;ui(e.length,i.closest(".ui-page")),K.VS&&K.VS.destroy();var t=j.hasClass("ui-view-sm");K.VS=new VScroll({container:i[0],data:e,smartBuffer:!0,itemHeight:t?260:270,itemWidth:t?186:196,responsive:!0,scrollOffset:u(i[0],j[0]).top,scrollParent:'.ui-page[data-ui-page="music"]',createItem:function(i){return ti.album(i)}}),K.VS.page=i[0]},album:function(i,e,t){if(!i)return K.albums();var a=w("album",i),r=a.children("track"),n=a.children("genre"),o=a.children("artist");if(a[0]){t||"music"===j.attr("data-ui-page")||K.albums(),$("album"),K._activeLayer("album",a[0].id,e);var s=ai(a[0].images,"medium"),l=ai(a[0].images,"extralarge");s&&T.album.image.css("backgroundImage","url("+s+")").removeClass("ui-default"),O.showLayerBackground&&l&&T.album.bg.css("backgroundImage","url("+l+")"),O.showMenuBackground&&(l?H.bg.css("backgroundImage","url("+l+")"):H.bg.css("backgroundImage","none")),T.album.name.text(a[0].name).attr("title",a[0].name);var d=[];o.slice(0,3).each(function(i){d.push(i.name)});var u=d.join(", ");3<o.length&&(u+=", ...");var c=u||"...";T.album.secName.text(c).attr("title",c);var p=a.year||"",v=r.length+" Songs",m=[];n.each(function(i){m.push(i.name)});var f=[p,m.filter(Boolean).join(" / "),v].filter(Boolean).join(" - ");T.album.other.text(f);var b=n.and(r.children("genre")).children("album").unique().not(a).shuffle().slice(0,O.maxRelatedCount);if(b[0]){T.album.contentRight.html('<div class="ui-layer-content-h2">Related</div><div class="ui-clearfix"></div>');var h=T.album.contentRight.find("div:nth-child(2)");b.each(function(i){ti.album(i,h)}),j.addClass("ui-layer-has-related")}else j.removeClass("ui-layer-has-related");var g=o.children("album").not(a).shuffle().slice(0,O.maxMoreCount);if(g[0]){T.album.contentBottom.html('<div class="ui-layer-content-h2">More Albums from '+o[0].name+'</div><div class="ui-clearfix"></div>');h=T.album.contentBottom.find("div:nth-child(2)");g.each(function(i){ti.album(i,h)})}if(r[0]){T.album.contentLeft.html('<table class="'+D+'"><tbody></tbody></table>');var y=T.album.contentLeft.find("tbody");r.each(function(i){ti.track(i,y,a[0])})}else T.album.contentLeft.text("No songs have been added to this album");G()}},artists:function(){K._active("music"),K._activeTab("artists");var i=N.musicTabs.artists,e=w._.database.artist.type;ui(e.length,i.closest(".ui-page")),K.VS&&K.VS.destroy();var t=j.hasClass("ui-view-sm");K.VS=new VScroll({container:i[0],data:e,smartBuffer:!0,itemHeight:t?260:270,itemWidth:t?186:196,responsive:!0,scrollOffset:u(i[0],j[0]).top,scrollParent:'.ui-page[data-ui-page="music"]',createItem:function(i){return ti.artist(i)}}),K.VS.page=i[0]},artist:function(i,e,t){if(!i)return K.artists();var a=w("artist",i),r=a.children("genre"),n=a.children("album");if(a[0]){t||"music"===j.attr("data-ui-page")||K.artists(),$("artist"),K._activeLayer("artist",a[0].id,e);var o=ai(a[0].images,"medium"),s=ai(a[0].images,"extralarge");o&&T.artist.image.css("backgroundImage","url("+o+")").removeClass("ui-default"),O.showLayerBackground&&s&&T.artist.bg.css("backgroundImage","url("+s+")"),O.showMenuBackground&&(s?H.bg.css("backgroundImage","url("+s+")"):H.bg.css("backgroundImage","none")),T.artist.name.text(a[0].name).attr("title",a[0].name);var l=[];r.each(function(i){l.push(i.name)});var d=l.filter(Boolean).join(" / ");T.artist.other.text(d);var u=r.children("artist").not(a).unique().shuffle().slice(0,O.maxMoreCount);if(u[0]){T.artist.contentBottom.html('<div class="ui-layer-content-h2">More Artists</div><div class="ui-clearfix"></div>');var c=T.artist.contentBottom.find("div:nth-child(2)");u.each(function(i){ti.artist(i,c)})}if(n[0]){var p=j.attr("data-ui-layer-view"),v=(p="songs"===p?"albums":"songs")[0].toUpperCase()+p.substr(1)+" view";T.artist.contentLeft.html('<div class="ui-layer-content-h2"><div class="ui-layer-content-h2-left"><div class="ui-layer-content-h2-left-text">Albums</div></div> <div class="ui-layer-content-h2-right ui-layer-albums-view-btn"><i class="ui-icon-view"></i><div class="ui-layer-content-h2-right-text">'+v+'</div></div></div><div class="ui-layer-content-div ui-clearfix"></div>');var m=T.artist.contentLeft.find(".ui-layer-content-div");n.each(function(i){ti.album(i,m,"albums"===p,a[0])})}else T.artist.contentLeft.text("No albums have been added to this artist");G()}},songs:function(){K._active("music"),K._activeTab("songs");var i=N.musicTabs.songs,e=w._.database.track.type;ui(e.length,i.closest(".ui-page")),K.VS&&(K.VS.destroy(),i.find("#ui-vs-container").remove());var t=f('<div id="ui-vs-container"><div id="ui-vs-wrapper"><table class="'+D+'"><tbody></tbody></table></div></div>').appendTo(i);K.VS=new VScroll({container:t[0],wrapper:t.children()[0],itemsWrapper:t.find("tbody")[0],data:e,smartBuffer:!0,itemHeight:50,scrollOffset:u(i[0],j[0]).top+60,scrollParent:'.ui-page[data-ui-page="music"]',createItem:function(i,e,t){return ti.track(i,!1,!1,!1,e+t)}}),K.VS.page=i[0],G()},radio:function(){K._active("radio");var i=N.radio,e=w._.database.stream.type;ui(e.length,i.closest(".ui-page")),K.VS&&(K.VS.destroy(),i.empty());var t=f('<div id="ui-vs-container"><div id="ui-vs-wrapper"><table class="'+D+'"><tbody></tbody></table></div></div>').appendTo(i);K.VS=new VScroll({container:t[0],wrapper:t.children()[0],itemsWrapper:t.find("tbody")[0],data:e,smartBuffer:!0,itemHeight:50,scrollOffset:u(i[0],j[0]).top,scrollParent:'.ui-page[data-ui-page="radio"]',createItem:function(i,e,t){return ti.stream(i,!1,e+t)}}),K.VS.page=i[0],G()},nowplaying:function(){K._active("nowplaying");var i=N.nowplaying,e=w(":loaded"),a=e[0]?e[0].type:"track";$("nowplaying"),e[0]&&li(e[0]);var t=T.nowplaying.contentLeft;K.VS&&(K.VS.destroy(),t.empty());var r=f('<div id="ui-vs-container"><div id="ui-vs-wrapper"><table class="'+D+'"><tbody></tbody></table></div></div>').appendTo(t),n=w("queue")[0],o=w._.database.queue._children[a][1],s=o?o.type:[];ui(s.length,i.closest(".ui-page")),K.VS=new VScroll({container:r[0],wrapper:r.children()[0],itemsWrapper:r.find("tbody")[0],data:s,smartBuffer:!0,itemHeight:50,scrollOffset:u(t[0],j[0]).top,scrollParent:'.ui-page[data-ui-page="nowplaying"]',createItem:function(i,e,t){return"track"===a?ti.track(i,!1,n,!1,e+t):ti.stream(i,!1,e+t)}}),K.VS.page=i[0],G()},liked:function(){K._active("liked");var i=N.liked;K.VS&&(K.VS.destroy(),i.empty());var e=f('<div id="ui-vs-container"><div id="ui-vs-wrapper"><table class="'+D+'"><tbody></tbody></table></div></div>').appendTo(i),t=w._.database.playlist._children.track.__liked__;ui((t?t.type:[]).length,i.closest(".ui-page")),K.VS=new VScroll({container:e[0],wrapper:e.children()[0],itemsWrapper:e.find("tbody")[0],data:t?t.type:[],smartBuffer:!0,itemHeight:50,scrollOffset:u(i[0],j[0]).top,scrollParent:'.ui-page[data-ui-page="liked"]',createItem:function(i,e,t){return ti.track(i,!1,!1,!1,e+t)}}),K.VS.page=i[0],G()},playlists:function(){K._active("playlists");var i=N.playlists,e=w("playlist").not("playlist","__liked__").toArray();ui(e.length,i.closest(".ui-page")),K.VS&&K.VS.destroy();var t=j.hasClass("ui-view-sm");K.VS=new VScroll({container:i[0],data:e,smartBuffer:!0,itemHeight:t?260:270,itemWidth:t?186:196,responsive:!0,scrollOffset:u(i[0],j[0]).top,scrollParent:'.ui-page[data-ui-page="playlists"]',createItem:function(i){return ti.playlist(i)}}),K.VS.page=i[0]},playlist:function(i,e,t){if(!i)return K.playlists();var a=w("playlist",i),r=a.children("track"),n=a.children("genre");if(a[0]){t||"playlists"===j.attr("data-ui-page")||K.playlists(),$("playlist"),K._activeLayer("playlist",a[0].id,e);var o=ai(a[0].images,"medium"),s=ai(a[0].images,"extralarge");o&&T.playlist.image.css("backgroundImage","url("+o+")").removeClass("ui-default"),O.showLayerBackground&&s&&T.playlist.bg.css("backgroundImage","url("+s+")"),O.showMenuBackground&&(s?H.bg.css("backgroundImage","url("+s+")"):H.bg.css("backgroundImage","none")),T.playlist.name.text(a[0].name).attr("title",a[0].name);var l=r.length+" Songs",d=[];n.each(function(i){d.push(i.name)});var u=[d.filter(Boolean).join(" / "),l].filter(Boolean).join(" - ");if(T.playlist.other.text(u),r[0]){var c=T.playlist.contentLeft.html('<div class="ui-layer-content-h2">Songs</div><table class="'+D+'"><tbody></tbody></table>').find("tbody");r.each(function(i){ti.track(i,c)})}else T.playlist.contentLeft.text("No songs have been added to this playlist");G()}},recentplays:function(){K._active("recentplays");var i=N.recentplays,e=w("history").children("track").reverse().toArray();ui(e.length,i.closest(".ui-page")),K.VS&&(K.VS.destroy(),i.empty());var t=f('<div id="ui-vs-container"><div id="ui-vs-wrapper"><table class="'+D+'"><tbody></tbody></table></div></div>').appendTo(i);K.VS=new VScroll({container:t[0],wrapper:t.children()[0],itemsWrapper:t.find("tbody")[0],data:e,smartBuffer:!0,itemHeight:50,scrollOffset:u(i[0],j[0]).top,scrollParent:'.ui-page[data-ui-page="recentplays"]',createItem:function(i,e,t){return ti.track(i,!1,!1,!1,e+t)}}),K.VS.page=i[0],G()},settings:function(){K._active("settings"),N.settings.append('<div class="ui-content-row">                            <div class="ui-layer-content-h2">Import</div>                            <div class="ui-clearfix">                                <div class="ui-input-file-home">                                   <input id="ui-input-file-folder" data-ui-id="folder" class="ui-input-file" type="file" accept="audio/*" webkitdirectory mozdirectory msdirectory odirectory directory multiple>                                   <label for="ui-input-file-folder" class="ui-btn-with-icon"><i class="ui-icon-folder"></i> Folder</label>                                </div>                                <div class="ui-input-file-home">                                   <input id="ui-input-file-files" data-ui-id="files" class="ui-input-file" type="file" accept="audio/*" multiple>                                   <label for="ui-input-file-files" class="ui-btn-with-icon"><i class="ui-icon-file"></i> Files</label>                                </div>                                <div class="ui-input-file-home">                                   <input id="ui-input-file-json" data-ui-id="json" class="ui-input-file" type="file" accept="application/json">                                   <label for="ui-input-file-json" class="ui-btn-with-icon"><i class="ui-icon-json-file"></i> JSON</label>                                </div>                            </div>                         </div>                         <div class="ui-content-row">                            <div class="ui-layer-content-h2">Export</div>                            <div class="ui-clearfix">                                <div class="ui-btn-with-icon" id="ui-export-btn"><i class="ui-icon-export"></i> JSON</div>                            </div>                         </div>                         <div class="ui-content-row">                            <div class="ui-layer-content-h2">Version</div>                            <div class="ui-clearfix">SPlayer '+w.version+" - Supercharged HTML5 Music Player</div>                         </div>")}};var ci,pi={set:null,add:null,move:null,remove:null};function vi(n,o,i){if(i)return K.VS.refresh();K.VS&&o&&K.VS.page===o[0]&&(pi[n]||(setTimeout(function(){var i,e;if(i=o[0]===N.recentplays[0])K.VS.data=w("history").children("track").reverse();else if(e=o[0]===N.nowplaying[0])K.VS.data=w("queue").children("track stream");else if(o[0]===N.liked[0]){var t=w._.database.playlist._children.track.__liked__;K.VS.data=t?t.type:[]}else o[0]===N.playlists[0]&&(K.VS.data=w("playlist").not("playlist","__liked__"));var a=o.closest(".ui-page"),r=a.hasClass("ui-content-is-empty");"remove"===n?ui(K.VS.data.length,a):r&&(ui(1,a),K.VS.scrollOffset=u(o[0],j[0]).top,G()),K.VS.refresh(!(i||e||r)),pi[n]=!1},0),pi[n]=!0))}Z={extract:function(){vi("extract",!1,!0)},set:function(i){vi("set",di(i.type))},add:function(i,e){var t,a=i.type,r=e&&e.type;if(e&&("playlist"===a||"history"===a||"queue"===a))return Z.add(e,i);e?"playlist"===r&&"__liked__"===e.id&&"track"===a?(t=N.liked,R.find('.ui-trobj[data-ui-id="'+i.id+'"]').find(".ui-td-btn-like i").attr("class","ui-icon-heart-filled"),w._.isSameDataObject(i,w(":loaded")[0])&&(q.like.addClass("active").find("i").attr("class","ui-icon-heart-filled"),L.find('.ui-trdropdown-box[data-ui-id="like"] i').attr("class","ui-icon-heart-filled"))):"history"===r&&"track"===a?t=N.recentplays:"queue"===r&&(t=N.nowplaying):t=di(a),vi("add",t)},remove:function(i,e){var t,a=i.type,r=e&&e.type;if(e&&("task"===a||"playlist"===a||"history"===a||"queue"===a))return Z.remove(e,i);if(e)if("task"===r){var n=w("task").children("track").length,o=w("task").children("album stream artist").length;0<n||0<o?I.show():I.fadeOut(),f("#ui-not-title").text("Processing.."),f("#ui-not-desc").text(n+"/"+o+" remaining")}else"playlist"===r&&"__liked__"===e.id&&"track"===a?(t=N.liked,N.liked.find('.ui-trobj[data-ui-id="'+i.id+'"]').remove(),R.find('.ui-trobj[data-ui-id="'+i.id+'"]').find(".ui-td-btn-like i").attr("class","ui-icon-heart"),w._.isSameDataObject(i,w(":loaded")[0])&&(q.like.removeClass("active").find("i").attr("class","ui-icon-heart"),L.find('.ui-trdropdown-box[data-ui-id="like"] i').attr("class","ui-icon-heart"))):"history"===r&&"track"===a?t=N.recentplays:"queue"===r&&(t=N.nowplaying);else t=di(a);vi("remove",t)},move:function(i,e,t,a){var r,n=t.type;if(a){var o=a.type;"history"===o&&"track"===n?r=N.recentplays:"queue"===o&&(r=N.nowplaying)}else r=di(n);vi("move",r)},load:function(i){var e=w(i),u=i.type;L.attr("class","ui-dropdown-home ui-bar-"+u),R.find(".ui-trobj.active, .ui-obj.active").removeClass("active"),R.find('.ui-trobj[data-ui-id="'+i.id+'"]').addClass("active"),j.addClass("ui-bar-active"),ui(1,N.nowplaying.closest(".ui-page")),j.attr({"data-ui-loaded-type":u,"data-ui-loaded-id":i.id});var t=i.title||i.name;q.title.text(t).attr("title",t),ri(q.artwork),q.artwork.css("backgroundImage","none").addClass("ui-default"),"stream"===u?(q.artwork.find("i").attr("class","ui-icon-radio"),q.duration.html("&#x221e;")):(q.artwork.find("i").attr("class","ui-icon-cd"),q.artist.text("..."),w.duration(function(i){q.duration.text(i)}),e.has("playlist","__liked__")?q.like.addClass("active").find("i").attr("class","ui-icon-heart-filled"):q.like.removeClass("active").find("i").attr("class","ui-icon-heart")),w(":next")[0]?q.next.removeClass("ui-disabled"):q.next.addClass("ui-disabled"),w(":prev")[0]?q.prev.removeClass("ui-disabled"):q.prev.addClass("ui-disabled"),!0===i.availability?(q.play.removeClass("ui-disabled"),q.slider.removeClass("ui-disabled")):!1===i.availability&&(q.play.addClass("ui-disabled"),q.slider.addClass("ui-disabled")),e.get(function(i){"track"===u&&"nowplaying"===j.attr("data-ui-page")&&li(i);var e,t,a,r,n=w(i.albums),o=w(i.artists),s=ai(i.images||n[0]&&n[0].images,"small"),l="light"===O.theme?"rgba(255,255,255,.95)":"rgba(0,0,0,.95)";s?(O.dynamicBarColors?(e=s,t=function(i){L.css("backgroundColor","rgba("+function(i){for(var e=1,t=C(O.theme),a="light"===O.theme?[255,255,255]:[0,0,0];e<6;){if(y(i)===t)return i;i=x(i,a,(e+=2)/10)}return i}(i)+",.95)")},a=function(){L.css("backgroundColor",l)},(r=new Image).crossOrigin="Anonymous",r.onload=function(){t((new c).getColor(r))},r.onerror=a,r.src=e):L.css("backgroundColor",l),q.artwork.css("backgroundImage","url("+s+")").removeClass("ui-default")):L.css("backgroundColor",l);var d=o[0]&&o[0].name||"...";q.artist.text(d).attr("title",o),n[0]&&R.find('.ui-obj[data-ui-type="album"][data-ui-id="'+n[0].id+'"]').addClass("active"),o[0]&&R.find('.ui-obj[data-ui-type="artist"][data-ui-id="'+o[0].id+'"]').addClass("active")})},availabilitychange:function(i,e){var t=j.find('.ui-trobj[data-ui-type="'+e.type+'"][data-ui-id="'+e.id+'"]'),a=w._.isSameDataObject(e,w(":loaded")[0]);i?(t.attr("data-ui-availability","true"),a&&(q.play.removeClass("ui-disabled"),q.slider.removeClass("ui-disabled")),void 0!==e.duration&&t.find(".ui-td-duration").text(e.duration)):(t.attr("data-ui-availability","false"),a&&(q.play.addClass("ui-disabled"),q.slider.addClass("ui-disabled")))},timeupdate:function(i){q.time.text(i),t||w.time(ni,{timeFormat:"percent"})},volumechange:function(i){w.is("muted")&&0<i&&w.unmute(),q.volumeSliderValue.text(~~i),q.volumeSliderProg.width(i+"%");var e=q.volumeSliderIcon.add(q.volumeIcon);0==i?e.attr("class","ui-icon-mute"):70<=i?e.attr("class","ui-icon-high-volume"):i<70&&33<=i?e.attr("class","ui-icon-medium-volume"):i<33&&e.attr("class","ui-icon-low-volume")},mute:function(){q.volumeSliderIcon.add(q.volumeIcon).attr("class","ui-icon-mute")},unmute:function(){w.volume(function(i){var e=q.volumeSliderIcon.add(q.volumeIcon);0==i?w.volume(4):70<=i?e.attr("class","ui-icon-high-volume"):i<70&&33<=i?e.attr("class","ui-icon-medium-volume"):i<33&&e.attr("class","ui-icon-low-volume")})},play:function(i){if(i){var e="stream"===i.type?"ui-icon-stop":"ui-icon-pause";q.playIcon.attr("class",e)}},pause:function(){q.playIcon.attr("class","ui-icon-play")},finished:function(i){var e=L.find('.ui-trdropdown-dropdown .ui-trdropdown-box[data-ui-id="shuffle"]'),t=L.find('.ui-trdropdown-dropdown .ui-trdropdown-box[data-ui-id="loop"]');i&&"next"!==i||(q.shuffle.removeClass("active"),q.loop.removeClass("active"),e.removeClass("active"),t.removeClass("active")),"shuffle"===i?(q.shuffle.addClass("active"),e.addClass("active"),q.loop.removeClass("active"),t.removeClass("active")):"replay"===i&&(q.shuffle.removeClass("active"),e.removeClass("active"),q.loop.addClass("active"),t.addClass("active"))}},ii={search:{btn:function(){ii.menu.btn(),A.focus()},input:function(i){if(!i||!j.hasClass("ui-view-md")){A.parent(".ui-menu-search").addClass("active"),N.search.empty();var e=A[0].value;if(!e){var t=j.attr("data-ui-page-before-search"),a=j.attr("data-ui-layer-type-before-search");return t&&K[t](),a&&K[a](j.attr("data-ui-layer-id-before-search")),void j.removeAttr("data-ui-layer-type-before-search data-ui-page-before-search data-ui-layer-id-before-search")}var r=j.attr("data-ui-page");if("search"!==r){var n=j.attr("data-ui-layer-type"),o=j.attr("data-ui-layer-id");j.attr("data-ui-page-before-search",r),j.attr("data-ui-layer-type-before-search",n),j.attr("data-ui-layer-id-before-search",o)}if(K._active("search"),N.search.closest(".ui-page").addClass("ui-content-is-loading").removeClass("ui-content-is-empty"),!1===O.searchDelay)return d(e);ci&&clearTimeout(ci),ci=setTimeout(function(){d(e)},O.searchDelay)}}},bar:{more:function(i){if(i.stopPropagation(),q.more.hasClass("active"))Y();else{Y();var e=f(this),t=w(":loaded")[0],a=w(":parent")[0],r=f(v(t,a));e.after(r),j.hasClass("ui-view-xs")&&oi(r),q.more.addClass("active")}},loop:function(){q.loop.hasClass("active")?w.finished("next"):w.finished("replay")},shuffle:function(){q.shuffle.hasClass("active")?w.finished("next"):w.finished("shuffle")},like:function(i){var e=w(":loaded"),t=w("playlist","__liked__");t.has(e)?t.children(e).remove():t.add(e)},next:w.next,play:function(){var i=w(":loaded")[0],e=i&&"stream"===i.type?"stop":"pause";w.toggle("play",e)},prev:w.prev,volumeSliderIcon:function(){w.is("muted")?w.unmute():w.mute()},infoAndImg:K.nowplaying},barCustom:{volumeSlider:{mouseMove:function(i){if(n){"touchmove"===i.type&&(i=i.originalEvent),r=!0,i=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0]||i;var e=f(this),t=(i.pageX-e.offset().left)/e.width()*100;t<0?t=0:100<t&&(t=100),w.volume(~~t)}},mouseDown:function(){n=!0},mouseUp:function(i){r=n=!1,"touchend"===i.type&&(i=i.originalEvent),i=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0]||i;var e=f(this),t=(i.pageX-e.offset().left)/e.width()*100;w.volume(~~t)},mouseWheel:function(e){w.volume(function(i){0<e.originalEvent.wheelDelta||e.originalEvent.detail<0?w.volume(i+10):w.volume(i-10)})}},slider:{mouseMove:function(i){a&&("touchmove"===i.type&&(i=i.originalEvent),t=!0,ni(((i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0]||i).pageX-this.offsetLeft)/this.clientWidth*100))},mouseDown:function(){a=!0},mouseUp:function(i){t=a=!1,"touchend"===i.type&&(i=i.originalEvent);var e=((i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0]||i).pageX-this.offsetLeft)/this.clientWidth*100;100<=e?w.duration(function(i){w.time(i-.5).play()},{timeFormat:null}):w.time(e+"%").play()}},containerMouseUp:function(){a&&t&&(100<=(i=q.sliderProg[0].style.width.replace("%","")*(100+1800/p.slider)/100)?w.duration(function(i){w.time(i-.5).play()},{timeFormat:null}):w.time(i+"%").play());if(n&&r){var i=q.volumeSliderProg[0].style.width.replace("%","");w.volume(i+"%")}a=t=n=r=!1}},pageMore:{newPlaylist:function(){var i=f('<div id="ui-model">                    <div id="ui-model-box">                        <div id="ui-model-box-title"></div>                        <div id="ui-model-box-content"></div>                        <div id="ui-model-box-actions"></div>                    </div>                </div>');i.find("#ui-model-box-title").text("Create a new playlist");var e=i.find("#ui-model-box-content").html('<input type="text" placeholder="Name" />');i.find("#ui-model-box-actions").html('<div class="ui-model-btn" data-ui-id="cancel">Cancel</div><div class="ui-model-btn" data-ui-id="save">Save</div>'),j.append(i),e.find("input").focus()},shuffleAll:function(){var i=w("track");w("track:loaded")[0]?(w("queue").empty().add(i),w.reshuffle().shuffle()):w(i[Math.floor(Math.random()*i.length)]).load(),w.finished("shuffle").play()},sortingLi:function(){var i=f(this).attr("data-ui-id"),e="date"===i||"title"===i||"year"===i?"a":[{name:"a"}];w("track").sort(i,e,{modify:!0}),K.VS.refresh()},genres:function(){var i=j.find(".ui-select-dropdown[data-ui-for=genres] ul"),e=i.closest(".ui-select-home").find(".ui-select-current").attr("data-ui-id");i.empty();var t=f(b.createDocumentFragment());t.append("__All_genres__"===e?'<li class="ui-select-selected" data-ui-id="__All_genres__">All genres</li>':'<li data-ui-id="__All_genres__">All genres</li>'),w("track").children("genre").unique().each(function(i){t.append(e==i.id?'<li class="ui-select-selected" data-ui-id="'+i.id+'">'+i.name+"</li>":'<li data-ui-id="'+i.id+'">'+i.name+"</li>")}),i.append(t)},genresLi:function(){var i=f(this).attr("data-ui-id");K.VS.data="__All_genres__"===i?w._.database.track.type:w("genre",i).children("track"),K.VS.refresh()}},model:{inputInput:function(i){if(13===i.keyCode){var e=j.find("#ui-model input").val();e&&(w.add("playlist",e),ii.model.bg())}},bg:function(){j.find("#ui-model").remove()},box:function(i){i.stopPropagation()},btn:function(i){var e=f(this).attr("data-ui-id");if("save"===e){var t=j.find("#ui-model input").val();if(!t)return;w.add("playlist",t)}else"ok"===e&&(w("playlist",j.attr("data-ui-layer-id")).remove(),K.playlists());ii.model.bg()}},dropdown:{btn:function(i){i.stopPropagation();var e=f(this),t=e.closest(".ui-dropdown-home").find(".ui-dropdown-menu[data-ui-for="+e.attr("data-ui-id")+"]");if(e.hasClass("active"))return Y();Y(),e.addClass("active"),j.hasClass("ui-view-xs")?oi(t):t.removeAttr("style"),t.addClass("ui-show")},menu:function(i){i.stopPropagation()}},selectDropdown:{li:function(i){var e=f(this),t=e.closest(".ui-select-dropdown"),a=t.closest(".ui-dropdown-home").find('.ui-dropdown-btn[data-ui-id="'+t.attr("data-ui-for")+'"]');t.find("li").removeClass("ui-select-selected"),f(this).addClass("ui-select-selected"),t.closest(".ui-select-home").find(".ui-select-current").attr("data-ui-id",e.attr("data-ui-id")).text(e.text()),t.removeClass("ui-show"),a.removeClass("active")}},trDropdown:{btn:function(i){i&&i.stopPropagation();var e=f(this);if(e.hasClass("active"))return Y();Y();var t=e.closest(".ui-trobj"),a=t.attr("data-ui-id"),r=t.attr("data-ui-type"),n=t.attr("data-ui-parent-type"),o=w(r,a)[0],s=n&&w(n,t.attr("data-ui-parent-id"))[0],l=f(v(o,s,!0));e.addClass("active").after(l),l.removeAttr("style"),si(l)},menu:function(i){i.stopPropagation(),i.preventDefault()},li:function(i){i.stopPropagation();var e,t=f(this),a=t.attr("data-ui-id"),r=t.closest(".ui-trdropdown-dropdown"),n=w(r.attr("data-ui-type"),r.attr("data-ui-id")),o=r.attr("data-ui-parent-type");if("play"===a)o?w(o,r.attr("data-ui-parent-id")).children(n).load():n.load(),w.play(),Y();else if("queue"===a)n.enqueue(),Y();else if("like"===a){var s=w("playlist","__liked__");n.has(s)?s.children(n).remove():s.add(n),Y()}else if("add"===a||"share"===a)t.find(".ui-li-dropdown-menu").toggleClass("ui-show"),t.toggleClass("ui-li-dropdown-menu-showed"),t.find(".ui-icon-dropdown, .ui-icon-up").toggleClass("ui-icon-dropdown ui-icon-up");else if("album"===a||"artist"===a){var l=n.children(a)[0];l&&K[l.type](l.id),Y()}else"download"===a?w(n).download():"add-create"===a?(ii.pageMore.newPlaylist(),Y()):"share-twitter"===a?(w(n).share(!1,{site:"twitter"}),Y()):"share-facebook"===a?(w(n).share(!1,{site:"facebook",app_id:O.facebookAppId}),Y()):(e=t.attr("data-ui-type"))&&(w(n).add(e,a),Y())}},settings:{inputFile:function(){if("json"===f(this).attr("data-ui-id")){var i=new FileReader;i.onloadend=function(){"{"===i.result[0]?w.add(i.result):"["===i.result[0]&&w.set(i.result)},i.readAsText(this.files[0])}else for(var e=0,t=this.files&&this.files.length;e<t;e++)w.add("track",this.files[e])},exportBtn:function(){w("*").toBlob({download:!0})}},table:{tr:function(i){var e=f(this),t=e.attr("data-ui-parent-type"),a=w(e.attr("data-ui-type"),e.attr("data-ui-id"));t?w(t,e.attr("data-ui-parent-id")).children(a).load():a.load(),w.play()},trContextmenu:function(i){i.preventDefault(),j.find(".ui-trdropdown-dropdown").remove();var e=f(this),t=i.pageX-e.offset().left-50,a=i.pageY-e.offset().top,r=e.attr("data-ui-id"),n=e.attr("data-ui-type"),o=e.attr("data-ui-parent-type"),s=w(n,r)[0],l=o&&w(o,e.attr("data-ui-parent-id"))[0],d=f(v(s,l,!0));return d.css({right:"auto",top:a+"px",left:t+"px","margin-left":0,"margin-top":0}),e.find(".ui-td-btn-more").after(d),si(d),!1},like:function(i){i.stopPropagation();var e=f(this).closest("tr"),t=w(e.attr("data-ui-type"),e.attr("data-ui-id")),a=w("playlist","__liked__");a.has(t)?a.children(t).remove():a.add(t)}},musicTabs:{btn:function(){K[f(this).attr("data-ui-tab")]()}},menu:{btn:function(){j.toggleClass("ui-menu-active"),G(),H.ul.scrollTop(0),K.VS&&K.VS.refresh()},back:Q.goBack,li:function(){K[f(this).attr("data-ui-page")](),j.hasClass("ui-view-md")&&j.hasClass("ui-menu-active")&&ii.menu.btn()}},obj:function(){var i=f(this);K[i.attr("data-ui-type")](i.attr("data-ui-id"),!1,!0)},objPlay:function(i){i.stopPropagation();var e=f(this).closest(".ui-obj");w(e.attr("data-ui-type"),e.attr("data-ui-id")).children("track").load(),w.play()},objImage:function(){K.album(f(this).parent().attr("data-ui-id"))},albumsView:function(){var e=j.attr("data-ui-layer-view"),i=j.attr("data-ui-layer-id"),t=w("artist",i),a=t.children("album");if(j.attr("data-ui-layer-view","songs"===e?"albums":"songs"),T.artist.contentLeft.empty(),a[0]){var r=e[0].toUpperCase()+e.substr(1)+" view";T.artist.contentLeft.html('<div class="ui-layer-content-h2"><div class="ui-layer-content-h2-left"><div class="ui-layer-content-h2-left-text">Albums</div></div> <div class="ui-layer-content-h2-right ui-layer-albums-view-btn"><i class="ui-icon-view"></i><div class="ui-layer-content-h2-right-text">'+r+'</div></div></div><div class="ui-layer-content-div ui-clearfix"></div>');var n=T.artist.contentLeft.find(".ui-layer-content-div");a.each(function(i){ti.album(i,n,"albums"===e,t[0])})}},layerActions:{playAll:function(){w(j.attr("data-ui-layer-type"),j.attr("data-ui-layer-id")).children("track").load()[0]&&w.play()},remove:function(){var i=f('<div id="ui-model">                    <div id="ui-model-box">                        <div id="ui-model-box-title"></div>                        <div id="ui-model-box-content"></div>                        <div id="ui-model-box-actions"></div>                    </div>                </div>');i.find("#ui-model-box-title").text("Are you sure you want to remove this playlist?"),i.find("#ui-model-box-actions").html('<div class="ui-model-btn" data-ui-id="cancel">Cancel</div><div class="ui-model-btn" data-ui-id="ok">Ok</div>'),j.append(i)}}},ei={addAndRemove:function(i,e){O.rememberPlaylists&&e&&"playlist"===e.type&&w(e).store(),O.rememberRecentPlays&&e&&"history"===e.type&&w(e).store()},add:function(i,e){O.rememberPlaylists&&(e||"playlist"!==i.type||w(i).store())},remove:function(i,e){O.rememberPlaylists&&(e||"playlist"!==i.type||w(i).release())}},w.ui=function(i){return w.support.essential&&w.support.metadata&&w.support.storage&&(i&&f.extend(O,i),f(b).ready(function(i){var e;S=i(O.container),_=w._.opt,D=_.extradata?"ui-table":"ui-table ui-td-duration-hide",j=i('<div id="ui-wrapper" class="ui-wrapper"><div id="ui-notification"><i class="ui-icon-sync" id="ui-not-icon"></i><div class="ui-not-info"><div><div id="ui-not-title">Loading..</div><div id="ui-not-desc" class="ui-text-overflow-ellipsis">Getting ready</div></div></div></div>            <div id="ui-menu"><div id="ui-menu-bg"></div><div id="ui-menu-bg-brightness"></div><div class="ui-menu ui-menu-back ui-hide"><i class="ui-icon-back"></i></div><div class="ui-menu ui-menu-menu"><i class="ui-icon-menu"></i></div><div class="ui-menu ui-menu-search" data-ui-page="search"><i class="ui-icon-search"></i><input type="text" id="ui-search" placeholder="Search"><div class="ui-menu-border"></div></div><div class="ui-menu-div-ul"><ul></ul></div></div>            <div id="ui-content">               <div id="ui-layers">'+z("album")+z("artist")+z("playlist")+'</div>            </div>            <div id="ui-bar" class="ui-dropdown-home">               '+X("more")+X("loop")+X("shuffle")+'               <div class="ui-bar-box ui-dropdown-btn" data-ui-id="volume"><div class="ui-bar-btn"><i class="ui-icon-high-volume"></i></div></div>               <div class="ui-dropdown-menu" data-ui-for="volume" id="ui-bar-volume-slider-dropdown"><i class="ui-icon-high-volume" id="ui-bar-volume-slider-icon"></i><div id="ui-bar-volume-slider"><div id="ui-bar-volume-slider-prog"></div><div id="ui-bar-volume-slider-bg"></div></div><span id="ui-bar-volume-slider-value">100</span></div>               '+X("like")+'               <div class="ui-bar-text" data-ui-id="duration"><div id="ui-bar-duration">0:00</div></div>               <div class="ui-bar-slider" id="ui-bar-slider"><table><tbody><tr><td id="ui-bar-slider-prog"><div></div></td><td id="ui-bar-slider-handler"><span></span></td><td id="ui-bar-slider-left"><div></div></td></tr></tbody></table></div>               <div class="ui-bar-text" data-ui-id="time"><div id="ui-bar-time">0:00</div></div>               '+X("next")+X("play")+X("prev")+'               <div class="ui-bar-img"><div id="ui-bar-artwork" class="ui-default"><i class="ui-icon-cd"></i></div></div>               <div class="ui-bar-info"><div class="ui-bar-info-div"><div id="ui-bar-title" class="ui-text-overflow-ellipsis"></div><div id="ui-bar-artist" class="ui-text-overflow-ellipsis"></div></div></div>            </div></div>'),I=j.find("#ui-notification"),A=j.find("#ui-search"),P=j.find(".ui-menu-search i"),V=j.find("#ui-menu"),H.bg=V.find("#ui-menu-bg"),H.ul=V.find("ul"),H.btn=V.find(".ui-menu-menu"),H.back=V.find(".ui-menu-back"),R=j.find("#ui-content"),M=j.find("#ui-layers"),L=j.find("#ui-bar"),q.more=L.find('.ui-bar-box[data-ui-id="more"]'),q.loop=L.find('.ui-bar-box[data-ui-id="loop"]'),q.shuffle=L.find('.ui-bar-box[data-ui-id="shuffle"]'),q.volume=L.find('.ui-bar-box[data-ui-id="volume"]'),q.volumeDropdown=L.find("#ui-bar-volume-slider-dropdown"),q.volumeSlider=L.find("#ui-bar-volume-slider"),q.volumeIcon=L.find('.ui-bar-box[data-ui-id="volume"] i'),q.volumeSliderProg=L.find("#ui-bar-volume-slider-prog"),q.volumeSliderValue=L.find("#ui-bar-volume-slider-value"),q.volumeSliderIcon=L.find("#ui-bar-volume-slider-icon"),q.next=L.find('.ui-bar-box[data-ui-id="next"]'),q.play=L.find('.ui-bar-box[data-ui-id="play"]'),q.prev=L.find('.ui-bar-box[data-ui-id="prev"]'),q.like=L.find('.ui-bar-box[data-ui-id="like"]'),q.duration=L.find("#ui-bar-duration"),q.slider=L.find("#ui-bar-slider"),q.sliderProg=L.find("#ui-bar-slider-prog"),q.sliderHandler=L.find("#ui-bar-slider-handler"),q.time=L.find("#ui-bar-time"),q.artwork=L.find("#ui-bar-artwork"),q.title=L.find("#ui-bar-title"),q.artist=L.find("#ui-bar-artist"),q.infoAndImg=L.find(".ui-bar-img, .ui-bar-info"),q.loopBtn=q.loop.children(),q.playIcon=q.play.find("i"),j.addClass(((e=b.createElement("a")).style.cssText=" -webkit- -moz- -o- -ms- ".split(" ").join("filter:blur(2px); "),e.style.length&&(void 0===b.documentMode||9<b.documentMode)?"ui-css-filters":"ui-no-css-filters")),O.showLayerBackground&&j.addClass("ui-layer-background"),O.showMenuBackground&&j.addClass("ui-menu-background"),O.blurLayerBackground&&j.addClass("ui-blur-layer-background"),O.blurMenuBackground&&j.addClass("ui-blur-menu-background"),O.dynamicBarColors&&j.addClass("ui-dynamic-bar-colors"),O.coloredMenu&&j.addClass("ui-colored-menu"),O.coloredLayerActions&&j.addClass("ui-colored-layer-actions");var t=k(O.mainColor);"auto"===O.theme&&(O.theme=C(y(t))),j.addClass("ui-theme-"+O.theme),E.insertRule('#ui-bar-volume-slider-prog, #ui-bar-volume-slider-prog:before, .ui-menu-border, .ui-select-dropdown li.ui-select-selected, .ui-colored-layer-actions .ui-layer-actions-btn[data-ui-id="play"], .ui-btn-with-icon { background-color: rgb('+t.join()+") }",0),E.insertRule(".ui-table tr.active .ui-td-title span, .ui-table tr.active .ui-td-number, .ui-icon-heart-filled, .ui-obj.active .ui-obj-name { color: rgb("+t.join()+") }",0),E.insertRule(".ui-obj.active .ui-obj-sec-name { color: rgba("+t.join()+", .6) }",0),E.insertRule('.ui-colored-layer-actions .ui-layer-actions-btn[data-ui-id="play"]:active, .ui-btn-with-icon:active { background-color: rgba('+t.join()+", .8) }",0),E.insertRule('.ui-colored-layer-actions .ui-layer-actions-btn[data-ui-id="play"]:hover, .ui-btn-with-icon:hover { background-color: rgba('+t.join()+", .9) }",0),O.menuBackground&&E.insertRule("#ui-menu { background-color: rgb("+k(O.menuBackground).join()+") }",0);var a=O.theme,r="light"===a?[0,0,0]:[255,255,255],n="light"===a?[255,255,255]:[0,0,0];E.insertRule("#ui-wrapper, .ui-menu.active, .ui-menu-search input, .ui-content-music-tab-btn.active, .ui-select-dropdown li.ui-select-selected, .ui-trdropdown-dropdown, .ui-table .ui-td-title span, .ui-table .ui-td-number, .ui-dynamic-bar-colors #ui-bar .ui-bar-box .ui-icon-heart-filled, .ui-bar-stream #ui-bar-time, #ui-model-box-content input, #ui-bar-slider-handler span { color: rgb("+r.join()+"); }",0),E.insertRule(".ui-bar-slider div, #ui-bar-volume-slider-dropdown:hover #ui-bar-volume-slider-prog:before, .ui-menu-background.ui-layer-has-images .ui-menu-border, .ui-colored-menu .ui-menu-border, #ui-bar-slider:active #ui-bar-slider-handler span { background-color: rgb("+r.join()+"); }",0),E.insertRule("#ui-bar-volume-slider-dropdown, .ui-select-dropdown, .ui-trdropdown-dropdown, #ui-model-box, #ui-model-box-content input { background-color: rgb("+n.join()+"); }",0),E.insertRule("#ui-bar-volume-slider-dropdown, .ui-wrapper .ui-select-dropdown, .ui-wrapper .ui-trdropdown-dropdown, #ui-model-box { border: 1px solid rgb("+x(r,n,.07).join()+"); }",0),E.insertRule("#ui-bar-slider-left div { background-color: rgba("+r.join()+", .4); }",0),E.insertRule("#ui-wrapper, #ui-menu { background-color: rgb("+x(n,r,.07).join()+"); }",0),E.insertRule("#ui-bar, #ui-notification { background-color: rgba("+n.join()+", .95); }",0),E.insertRule(".ui-filter-btn:active { color: rgba("+r.join()+", .4); }",0),E.insertRule("#ui-bar-artist, .ui-bar-text, .ui-filter-btn:hover, .ui-trdropdown-info-sec-name, .ui-obj-sec-name, #ui-not-desc { color: rgba("+r.join()+", .6); }",0),E.insertRule(".ui-layer-sec-name, .ui-layer-other { color: rgba("+r.join()+", .7); }",0),E.insertRule("#ui-bar-volume-slider-bg { background-color: rgba("+r.join()+", .4); }",0),E.insertRule("#ui-menu-bg-brightness, .ui-layer-bg-brightness { background-color: rgba("+n.join()+", .7); }",0),E.insertRule(".ui-blur-menu-background #ui-menu-bg-brightness, .ui-blur-layer-background .ui-layer-bg-brightness, #ui-model { background-color: rgba("+n.join()+", .5); }",0),E.insertRule(".ui-menu, .ui-content-music-tab-btn, .ui-table, .ui-layer-content-h2-right, .ui-layer-content-h2-right-text { color: rgba("+r.join()+", .5); }",0),E.insertRule(".ui-page-more, .ui-layer-image, .ui-obj-image, #ui-content-music-tab-btns, #ui-bar-artwork { color: rgba("+r.join()+", .8); }",0),E.insertRule(".ui-model-btn:active { background-color: rgba("+r.join()+", .3); }",0),E.insertRule('#ui-wrapper.ui-dynamic-bar-colors .ui-bar-box.active[data-ui-id="shuffle"] .ui-bar-btn, #ui-wrapper.ui-dynamic-bar-colors .ui-bar-box.active[data-ui-id="loop"] .ui-bar-btn, .ui-layer-actions-btn:active, .ui-obj-actions-btn:active, .ui-model-btn:hover { background-color: rgba('+r.join()+", .2); }",0),E.insertRule(".ui-trdropdown-dropdown li:active, .ui-td-btn:active, .ui-menu:not(.ui-menu-hr):active, .ui-li-dropdown-home.ui-li-dropdown-menu-showed, .ui-bar-info:active { background-color: rgba("+r.join()+", .15); }",0),E.insertRule(".ui-trdropdown-dropdown li:hover, .ui-trdropdown-image, .ui-layer-image, .ui-td-btn:hover, .ui-obj-image, .ui-bar-box:active .ui-bar-btn, .ui-bar-btn.active, .ui-trdropdown-box:active .ui-trdropdown-btn, .ui-trdropdown-btn.active, #ui-bar-artwork, .ui-menu:not(.ui-menu-hr):hover, .ui-layer-actions-btn:hover, .ui-obj-actions-btn:hover, .ui-model-btn, .ui-bar-info:hover { background-color: rgba("+r.join()+", .1); }",0),E.insertRule('.ui-page[data-ui-page="nowplaying"] .ui-layer-bg-brightness { background: linear-gradient(rgba('+n.join()+",.8), rgba("+n.join()+",.1)) ; }",0),E.insertRule(".ui-obj:not(.ui-obj-with-songs) .ui-obj-actions { background: linear-gradient(transparent, rgba("+n.join()+",.8)) ; }",0),E.insertRule(".ui-table tr { background-color: rgba("+r.join()+", .02) ; }",0),E.insertRule("#ui-model-box-content input { border: 2px solid rgba("+r.join()+", .3) ; }",0),E.insertRule("#ui-model-box-content input:focus { border: 2px solid rgba("+r.join()+", .75) ; }",0),E.insertRule('.ui-trobj[data-ui-availability="false"], .ui-table .ui-trobj[data-ui-availability="false"] .ui-td-title span, .ui-table .ui-trobj[data-ui-availability="false"] .ui-td-number { color: rgba('+r.join()+", .2); }",0);for(var o=0,s=O.pages.length;o<s;o++){var l=O.pages[o];if("liked"===l&&SPlayer.add("playlist",{id:"__liked__",name:"liked"}),"|"!=l){H.ul.append('<li class="ui-menu" data-ui-page="'+l+'"><i class="'+W[l].icon+'"></i><span>'+W[l].title+'</span><div class="ui-menu-border"></div></li>');var d="music"===l?U():"playlists"===l?F(l):"nowplaying"===l?z("nowplaying"):"",u="";"music"===l?u='<div class="ui-content-empty">No music has been added</div>':"radio"===l?u='<div class="ui-content-empty">No streams have been added</div>':"liked"===l?u='<div class="ui-content-empty">Your liked songs will show up here</div>':"playlists"===l?u='<div class="ui-content-empty">No playlists have been added</div>':"recentplays"===l?u='<div class="ui-content-empty">No recent plays</div>':"nowplaying"===l&&(u="<div class='ui-content-empty'>This is where you will see the songs you're playing and songs that are coming up.</div>");var c="playlists"===l?F(l):"";R.append('<div class="ui-page ui-content-is-empty" data-ui-page="'+l+'">                                       <div class="ui-title">'+W[l].title+"</div>                                       "+c+'                                       <div class="ui-content" data-ui-page="'+l+'">'+d+"</div>                                       "+u+"                                    </div>")}else H.ul.append('<li class="ui-menu ui-menu-hr"><span></span></li>')}for(var p in R.append('<div class="ui-page ui-content-is-empty" data-ui-page="search">                               <div class="ui-title">Search results</div>                               <div class="ui-content" data-ui-page="search"></div>                               <div class="ui-content-empty">No results</div>                               <div class="ui-content-loading"><i class="ui-icon-sync"></i></div>                            </div>'),O.settings&&(H.ul.append('<li class="ui-menu" data-ui-page="settings"><i class="ui-icon-settings"></i><span>Settings</span><div class="ui-menu-border"></div></li>'),R.append('<div class="ui-page" data-ui-page="settings">                               <div class="ui-title">Settings</div>                               <div class="ui-content" data-ui-page="settings"></div>                            </div>')),H.li=V.find("li:not(.ui-menu-hr)"),T=function(){var i={image:".ui-layer-image",bg:".ui-layer-bg",bgBrightness:".ui-layer-bg-brightness",name:".ui-layer-name",secName:".ui-layer-sec-name",other:".ui-layer-other",contentLeft:".ui-layer-content-left",contentRight:".ui-layer-content-right",contentBottom:".ui-layer-content-bottom"},e={album:{},artist:{},playlist:{},nowplaying:{}};for(var t in e)if(e.hasOwnProperty(t))for(var a in i)i.hasOwnProperty(a)&&(e[t][a]=R.find('.ui-layer[data-ui-layer-type="'+t+'"] '+i[a]));return e}(),N.search=R.find('.ui-content[data-ui-page="search"]'),N.music=R.find('.ui-content[data-ui-page="music"]'),N.radio=R.find('.ui-content[data-ui-page="radio"]'),N.nowplaying=R.find('.ui-content[data-ui-page="nowplaying"]'),N.liked=R.find('.ui-content[data-ui-page="liked"]'),N.playlists=R.find('.ui-content[data-ui-page="playlists"]'),N.recentplays=R.find('.ui-content[data-ui-page="recentplays"]'),N.settings=R.find('.ui-content[data-ui-page="settings"]'),N.musicTabs={btn:N.music.find(".ui-content-music-tab-btn"),content:N.music.find(".ui-content-music-tab-content"),songs:N.music.find('.ui-content-music-tab-content[data-ui-tab="songs"]'),albums:N.music.find('.ui-content-music-tab-content[data-ui-tab="albums"]'),artists:N.music.find('.ui-content-music-tab-content[data-ui-tab="artists"]')},S.append(j),w.ready(function(){I.fadeOut()}),w.ui.open(O.homepage),G(),i(m).on("resize",G),S.on("click",Y),P.on("click",ii.search.btn),O.liveSearch&&A.on("input",ii.search.input),A.on("input",function(i){13==i.keyCode&&(ii.search.input(),j.hasClass("ui-view-md")&&j.hasClass("ui-menu-active")&&ii.menu.btn())}),ii.menu)ii.menu.hasOwnProperty(p)&&H[p].on("click",ii.menu[p]);for(var p in w.time(function(i){q.time.text(i)}),w.duration(function(i){i===1/0?q.duration.html("&#x221e;"):q.duration.text(i)}),ni(0),Z)Z.hasOwnProperty(p)&&w.on(p,Z[p]);for(var p in(O.rememberPlaylists||O.rememberRecentPlays)&&(w.on("add",ei.addAndRemove),w.on("add",ei.add),w.on("remove",ei.addAndRemove),w.on("remove",ei.remove)),ii.bar)ii.bar.hasOwnProperty(p)&&q[p].on("click",ii.bar[p]);L.on("click",'.ui-trdropdown-dropdown .ui-trdropdown-box[data-ui-id="loop"]',ii.bar.loop),L.on("click",'.ui-trdropdown-dropdown .ui-trdropdown-box[data-ui-id="shuffle"]',ii.bar.shuffle),L.on("click",'.ui-trdropdown-dropdown .ui-trdropdown-box[data-ui-id="like"]',ii.bar.like),L.on("click",'.ui-trdropdown-dropdown .ui-trdropdown-box[data-ui-id="volume"]',ii.dropdown.btn);var v=j.find(".ui-select-dropdown");v.on("click","li",ii.selectDropdown.li),v.filter('[data-ui-for="sorting"]').on("click","li",ii.pageMore.sortingLi),v.filter('[data-ui-for="genres"]').on("click","li",ii.pageMore.genresLi),j.find('.ui-filter-btn[data-ui-id="genres"]').on("click",ii.pageMore.genres),j.find('.ui-filter-btn[data-ui-id="shuffle"]').on("click",ii.pageMore.shuffleAll),j.find('.ui-filter-btn[data-ui-id="newplaylist"]').on("click",ii.pageMore.newPlaylist),N.musicTabs.btn.on("click",ii.musicTabs.btn),N.settings.on("change",".ui-input-file",ii.settings.inputFile),N.settings.on("click","#ui-export-btn",ii.settings.exportBtn),j.on("click",".ui-table tr",ii.table.tr),j.on("contextmenu",'.ui-table tr[data-ui-type="track"]',ii.table.trContextmenu),j.on("click",".ui-table .ui-td-btn-like",ii.table.like),j.on("click",".ui-table .ui-td-btn-more",ii.trDropdown.btn),j.on("click",".ui-trdropdown-dropdown li",ii.trDropdown.li),j.on("click contextmenu",".ui-trdropdown-dropdown",ii.trDropdown.menu),j.find(".ui-dropdown-btn").on("click",ii.dropdown.btn),j.find(".ui-dropdown-menu").on("click",ii.dropdown.menu),j.on("click","#ui-model",ii.model.bg),j.on("click","#ui-model .ui-model-btn",ii.model.btn),j.on("input","#ui-model input",ii.model.inputInput),j.on("click","#ui-model #ui-model-box",ii.model.box),q.volumeDropdown.on("mousewheel DOMMouseScroll",ii.barCustom.volumeSlider.mouseWheel),q.volumeSlider.on("mousemove touchmove",ii.barCustom.volumeSlider.mouseMove),q.volumeSlider.on("mousedown touchstart",ii.barCustom.volumeSlider.mouseDown),q.volumeSlider.on("mouseup touchend",ii.barCustom.volumeSlider.mouseUp),q.slider.on("mousedown touchstart",ii.barCustom.slider.mouseDown),q.slider.on("mouseup touchend",ii.barCustom.slider.mouseUp),q.slider.on("mousemove touchmove",ii.barCustom.slider.mouseMove),S.on("mouseup",ii.barCustom.containerMouseUp),R.on("click",".ui-obj:not(.ui-obj-with-songs)",ii.obj),R.on("click",'.ui-obj .ui-obj-actions-btn[data-ui-id="play"]',ii.objPlay),R.on("click",".ui-obj-with-songs .ui-obj-image",ii.objImage),T.artist.contentLeft.on("click",".ui-layer-albums-view-btn",ii.albumsView),R.on("click",'.ui-layer-actions-btn[data-ui-id="play"]',ii.layerActions.playAll),R.on("click",'.ui-layer-actions-btn[data-ui-id="remove"]',ii.layerActions.remove),w.finished("next")})),this},w.ui.open=function(i,e){return K[i](e),this},w.ui.back=function(){return Q.goBack(),this},w.ui.destroy=function(){for(var i in f(m).off("resize",G),Z)Z.hasOwnProperty(i)&&w.off(i,Z[i]);w.off("add",ei.addAndRemove),w.off("add",ei.add),w.off("remove",ei.addAndRemove),w.off("remove",ei.remove),S.children(j).remove();for(var e=E.cssRules.length;e--;)E.deleteRule(e);return O={container:"body",pages:["music","radio","nowplaying","|","liked","playlists","|","recentplays"],tabs:["songs","albums","artists"],homepage:"music",hometab:"songs",sort:!0,download:!0,share:!0,facebookAppId:!1,maxRelatedCount:4,maxMoreCount:6,defaultAlbumsView:"albums",settings:!0,showLayerBackground:!1,showMenuBackground:!0,blurLayerBackground:!1,blurMenuBackground:!1,dynamicBarColors:!0,coloredMenu:!1,coloredLayerActions:!0,menuBackground:!1,mainColor:"#90CAF9",theme:"auto",searchAlgorithm:!0,searchInRelationTo:!0,searchDelay:!1,liveSearch:!0,rememberPlaylists:!0,rememberRecentPlays:!0},D="ui-table",H={},N={},q={},p={container:n=r=a=t=L=T=M=R=V=P=A=I=j=S=null,slider:null,menu:null},this}}(SPlayer,jQuery,window,document);